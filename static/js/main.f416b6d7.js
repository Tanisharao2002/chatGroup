/*! For license information please see main.f416b6d7.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},p={};function v(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new v(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new v(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new v(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new v(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new v(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new v(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new v(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new v(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new v(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(p,e)||!f.call(d,e)&&(h.test(e)?p[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new v(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new v(e,1,!1,e.toLowerCase(),null,!0,!0)}));var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),I=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),S=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function B(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function j(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case E:return"Profiler";case I:return"StrictMode";case C:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===I?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function W(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function Z(e,t){X(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&W(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ve(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ve(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ie=null;function Ee(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=bi(t),_e(e.stateNode,e.type,t))}}function Te(e){xe?Ie?Ie.push(e):Ie=[e]:xe=e}function Se(){if(xe){var e=xe,t=Ie;if(Ie=xe=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ae(e,t){return e(t)}function Ce(){}var Ne=!1;function Pe(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ae(e,t,n)}finally{Ne=!1,(null!==xe||null!==Ie)&&(Ce(),Se())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var De=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){De=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,Be={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var Qe=i.unstable_scheduleCallback,We=i.unstable_cancelCallback,Je=i.unstable_shouldYield,Ye=i.unstable_requestPaint,Xe=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function vt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,_t,xt,It,Et,Tt=!1,St=[],At=null,Ct=null,Nt=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Ct=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void Et(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function Bt(){Tt=!1,null!==At&&Ut(At)&&(At=null),null!==Ct&&Ut(Ct)&&(Ct=null),null!==Nt&&Ut(Nt)&&(Nt=null),Pt.forEach(Vt),Rt.forEach(Vt)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return jt(t,e)}if(0<St.length){jt(St[0],e);for(var n=1;n<St.length;n++){var r=St[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==At&&jt(At,e),null!==Ct&&jt(Ct,e),null!==Nt&&jt(Nt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var qt=w.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Qt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Qt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Qt(e,t,n,r){if(Gt){var i=Jt(e,t,n,r);if(null===i)Gr(e,t,r,Wt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return At=Mt(At,e,t,n,r,i),!0;case"dragenter":return Ct=Mt(Ct,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&bt(a),null===(a=Jt(e,t,n,r))&&Gr(e,t,r,Wt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Wt=null;function Jt(e,t,n,r){if(Wt=null,null!==(e=gi(e=be(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Wt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),pn=an(dn),vn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),wn=an(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function In(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function En(){return In}var Tn=F({},fn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=an(Tn),An=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Cn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(Pn),Dn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Qn=null;function Wn(e){Ur(e,0)}function Jn(e){if(Q(wi(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(l){var Zn;if(l){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Xn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Qn=Hn=null)}function nr(e){if("value"===e.propertyName&&Jn(Qn)){var t=[];Kn(t,Qn,e,be(e)),Pe(Wn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Qn)}function ar(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=W();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=W((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==W(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},xr={},Ir={};function Er(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ir)return xr[e]=n[t];return e}l&&(Ir=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Er("animationend"),Sr=Er("animationiteration"),Ar=Er("animationstart"),Cr=Er("transitionend"),Nr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),s(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Tr,"onAnimationEnd"),Rr(Sr,"onAnimationIteration"),Rr(Ar,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Cr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[vi];void 0===n&&(n=t[vi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Yt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Qt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Pe((function(){var r=a,i=be(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Sn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Cn;break;case Tr:case Sr:case Ar:s=mn;break;case Cr:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=An}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,p=r;null!==p;){var v=(d=p).stateNode;if(5===d.tag&&null!==v&&(d=v,null!==h&&(null!=(v=Re(p,h))&&l.push(Kr(p,v,d)))),f)break;p=p.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[pi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=pn,v="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(l=An,v="onPointerLeave",h="onPointerEnter",p="pointer"),f=null==s?u:wi(s),d=null==c?u:wi(c),(u=new l(v,p+"leave",s,n,i)).target=f,u.relatedTarget=d,v=null,gi(i)===r&&((l=new l(h,p+"enter",c,n,i)).target=d,l.relatedTarget=f,v=l),f=v,s&&c)e:{for(h=c,p=0,d=l=s;d;d=Qr(d))p++;for(d=0,v=h;v;v=Qr(v))d++;for(;0<p-d;)l=Qr(l),p--;for(;0<d-p;)h=Qr(h),d--;for(;p--;){if(l===h||null!==h&&l===h.alternate)break e;l=Qr(l),h=Qr(h)}l=null}else l=null;null!==s&&Wr(o,u,s,l,!1),null!==c&&null!==f&&Wr(o,f,c,l,!0)}if("select"===(s=(u=r?wi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=Yn;else if(Gn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Kn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?wi(r):window,e){case"focusin":(Gn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,wr(o,n,i);break;case"selectionchange":if(vr)break;case"keydown":case"keyup":wr(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Zt="value"in(Xt=i)?Xt.value:Xt.textContent,zn=!0)),0<(m=Hr(r,k)).length&&(k=new wn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),$t=Zt=Xt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Re(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Wr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Zr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,pi="__reactContainer$"+fi,vi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function bi(e){return e[di]||null}var _i=[],xi=-1;function Ii(e){return{current:e}}function Ei(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ti(e,t){xi++,_i[xi]=e.current,e.current=t}var Si={},Ai=Ii(Si),Ci=Ii(!1),Ni=Si;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Si;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ei(Ci),Ei(Ai)}function Oi(e,t,n){if(Ai.current!==Si)throw Error(a(168));Ti(Ai,t),Ti(Ci,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Si,Ni=Ai.current,Ti(Ai,e),Ti(Ci,Ci.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ci),Ei(Ai),Ti(Ai,e)):Ei(Ci),Ti(Ci,n)}var Ui=null,Vi=!1,Bi=!1;function ji(e){null===Ui?Ui=[e]:Ui.push(e)}function zi(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),Qe($e,zi),i}finally{kt=t,Bi=!1}}return null}var qi=[],Gi=0,Ki=null,Hi=0,Qi=[],Wi=0,Ji=null,Yi=1,Xi="";function Zi(e,t){qi[Gi++]=Hi,qi[Gi++]=Ki,Ki=e,Hi=t}function $i(e,t,n){Qi[Wi++]=Yi,Qi[Wi++]=Xi,Qi[Wi++]=Ji,Ji=e;var r=Yi;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Yi=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else Yi=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function ta(e){for(;e===Ki;)Ki=qi[--Gi],qi[Gi]=null,Hi=qi[--Gi],qi[Gi]=null;for(;e===Ji;)Ji=Qi[--Wi],Qi[Wi]=null,Xi=Qi[--Wi],Qi[Wi]=null,Yi=Qi[--Wi],Qi[Wi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ji?{id:Yi,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function pa(e){null===aa?aa=[e]:aa.push(e)}var va=w.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ii(null),ga=null,ka=null,wa=null;function ba(){wa=ka=ga=null}function _a(e){var t=ma.current;Ei(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ia(e,t){ga=e,wa=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wu=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(wa!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Sa(e){null===Ta?Ta=[e]:Ta.push(e)}function Aa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Sa(t)):(n.next=i.next,i.next=n),t.interleaved=n,Ca(e,r)}function Ca(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Pa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cs)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Ca(e,n)}return null===(i=r.interleaved)?(t.next=t,Sa(r)):(t.next=i.next,i.next=t),r.interleaved=t,Ca(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,v=u;switch(h=t,d=n,v.tag){case 1:if("function"===typeof(p=v.payload)){f=p.call(d,f,h);break e}f=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=v.payload)?p.call(d,f,h):p)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Da(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Da(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Si,a=t.contextType;return"object"===typeof a&&null!==a?a=Ea(a):(i=Ri(t)?Ni:Ai.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Si),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Pa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Ea(a):(a=Ri(t)?Ni:Ai.current,i.context=Pi(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Qa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Wa(e){return(0,e._init)(e._payload)}function Ja(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Wa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Vc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Qa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Qa(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Qa(t,r)}return null}function v(i,a,u,s){for(var c=null,l=null,f=a,v=a=0,y=null;null!==f&&v<u.length;v++){f.index>v?(y=f,f=null):y=f.sibling;var m=d(i,f,u[v],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,v),null===l?c=m:l.sibling=m,l=m,f=y}if(v===u.length)return n(i,f),ia&&Zi(i,v),c;if(null===f){for(;v<u.length;v++)null!==(f=h(i,u[v],s))&&(a=o(f,a,v),null===l?c=f:l.sibling=f,l=f);return ia&&Zi(i,v),c}for(f=r(i,f);v<u.length;v++)null!==(y=p(f,i,v,u[v],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?v:y.key),a=o(y,a,v),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Zi(i,v),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,v=u,y=u=0,m=null,g=s.next();null!==v&&!g.done;y++,g=s.next()){v.index>y?(m=v,v=null):m=v.sibling;var k=d(i,v,g.value,c);if(null===k){null===v&&(v=m);break}e&&v&&null===k.alternate&&t(i,v),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,v=m}if(g.done)return n(i,v),ia&&Zi(i,y),l;if(null===v){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Zi(i,y),l}for(v=r(i,v);!g.done;y++,g=s.next())null!==(g=p(v,i,y,g.value,c))&&(e&&null!==g.alternate&&v.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&v.forEach((function(e){return t(i,e)})),ia&&Zi(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case b:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Wa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return v(r,a,o,s);if(L(o))return y(r,a,o,s);Qa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Ya=Ja(!0),Xa=Ja(!1),Za={},$a=Ii(Za),eo=Ii(Za),to=Ii(Za);function no(e){if(e===Za)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti($a,Za),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei($a),Ti($a,t)}function io(){Ei($a),Ei(eo),Ei(to)}function ao(e){no(to.current);var t=no($a.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti($a,n))}function oo(e){eo.current===e&&(Ei($a),Ei(eo))}var uo=Ii(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=w.ReactCurrentDispatcher,ho=w.ReactCurrentBatchConfig,po=0,vo=null,yo=null,mo=null,go=!1,ko=!1,wo=0,bo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Io(e,t,n,r,i,o){if(po=o,vo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,wo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,po=0,mo=yo=vo=null,go=!1,t)throw Error(a(300));return e}function Eo(){var e=0!==wo;return wo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?vo.memoizedState=mo=e:mo=mo.next=e,mo}function So(){if(null===yo){var e=vo.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?vo.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?vo.memoizedState=mo=e:mo=mo.next=e}return mo}function Ao(e,t){return"function"===typeof t?t(e):t}function Co(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((po&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,vo.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(wu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,vo.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=So(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(wu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Po(){}function Ro(e,t){var n=vo,r=So(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,wu=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Oo.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&po)||Do(n,t,i)}return i}function Do(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Ca(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ao,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,vo,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=vo.updateQueue)?(t={lastEffect:null,stores:null},vo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return So().memoizedState}function jo(e,t,n,r){var i=To();vo.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=So();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}vo.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return jo(8390656,8,e,t)}function Go(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Qo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Wo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Qo.bind(null,t,e),n)}function Jo(){}function Yo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=So();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Zo(e,t,n){return 0===(21&po)?(e.baseState&&(e.baseState=!1,wu=!0),e.memoizedState=n):(ur(n,t)||(n=vt(),vo.lanes|=n,Fs|=n,e.baseState=!0),t)}function $o(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return So().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Aa(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Sa(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Aa(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===vo||null!==t&&t===vo}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Ea,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Ea,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Qo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,vo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Uo,useDebugValue:Jo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=$o.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vo,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&po)||Do(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=Ns.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=(Yi&~(1<<32-ot(Yi)-1)).toString(32)+n),0<(n=wo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Go,useImperativeHandle:Wo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:Co,useRef:Bo,useState:function(){return Co(Ao)},useDebugValue:Jo,useDeferredValue:function(e){return Zo(So(),yo.memoizedState,e)},useTransition:function(){return[Co(Ao)[0],So().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Ea,useCallback:Yo,useContext:Ea,useEffect:Go,useImperativeHandle:Wo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:Xo,useReducer:No,useRef:Bo,useState:function(){return No(Ao)},useDebugValue:Jo,useDeferredValue:function(e){var t=So();return null===yo?t.memoizedState=e:Zo(t,yo.memoizedState,e)},useTransition:function(){return[No(Ao)[0],So().memoizedState]},useMutableSource:Po,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function pu(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Hs=r),hu(0,t)},n}function vu(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Qs?Qs=new Set([this]):Qs.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=w.ReactCurrentOwner,wu=!1;function bu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ia(t,i),r=Io(e,t,n,r,a,i),n=Eo(),null===e||wu?(ia&&n&&ea(t),t.flags|=1,bu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Dc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Iu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Iu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(wu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(wu=!0)}}return Su(e,t,n,r,i)}function Eu(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Os,Ds),Ds|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Os,Ds),Ds|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Os,Ds),Ds|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Os,Ds),Ds|=r;return bu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Su(e,t,n,r,i){var a=Ri(n)?Ni:Ai.current;return a=Pi(t,a),Ia(t,i),n=Io(e,t,n,r,a,i),r=Eo(),null===e||wu?(ia&&r&&ea(t),t.flags|=1,bu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Au(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ia(t,i),null===t.stateNode)Gu(e,t),qa(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ea(c):c=Pi(t,c=Ri(n)?Ni:Ai.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ga(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Ci.current||Na?("function"===typeof l&&(Ba(t,n,l,r),s=t.memoizedState),(u=Na||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Ea(s):s=Pi(t,s=Ri(n)?Ni:Ai.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ga(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var p=t.memoizedState;u!==f||h!==p||Ci.current||Na?("function"===typeof d&&(Ba(t,n,d,r),p=t.memoizedState),(c=Na||za(t,n,c,r,h,p,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Cu(e,t,n,r,a,i)}function Cu(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Ya(t,e.child,null,a),t.child=Ya(t,null,u,a)):bu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Pu(e,t,n,r,i){return da(),pa(i),t.flags|=256,bu(e,t,n,r),t.child}var Ru,Du,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Bu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Ya(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Bu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Bu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),wu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Ca(e,i),rc(r,e,i,-1))}return yc(),Bu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ac.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Qi[Wi++]=Yi,Qi[Wi++]=Xi,Qi[Wi++]=Ji,Yi=e.id,Xi=e.overflow,Ji=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bu(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(bu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Qu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Wu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Qu(t),null;case 1:case 17:return Ri(t.type)&&Di(),Qu(t),null;case 3:return r=t.stateNode,io(),Ei(Ci),Ei(Ai),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Du(e,t),Qu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Qu(t),null}if(e=no($a.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Y(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),$(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Y(e,r),i=J(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),$(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Qu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no($a.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Qu(t),null;case 13:if(Ei(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Qu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yc())),null!==t.updateQueue&&(t.flags|=4),Qu(t),null);case 4:return io(),Du(e,t),null===e&&zr(t.stateNode.containerInfo),Qu(t),null;case 10:return _a(t.type._context),Qu(t),null;case 19:if(Ei(uo),null===(o=t.memoizedState))return Qu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Qu(t),null}else 2*Xe()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Qu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ds)&&(Qu(t),6&t.subtreeFlags&&(t.flags|=8192)):Qu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Ju(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Ei(Ci),Ei(Ai),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Ei(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Du=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no($a.current);var a,o=null;switch(n){case"input":i=J(e,i),r=J(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yu=!1,Xu=!1,Zu="function"===typeof WeakSet?WeakSet:Set,$u=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[vi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)ps(e,t,n),n=n.sibling}function ps(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ec(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function vs(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Zu),t.forEach((function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));ps(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Ec(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Ec(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Ec(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Ec(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":Z(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(i,!!o.multiple,p,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Ec(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Ec(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(y){Ec(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=Xe())),4&r&&vs(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,ys(t,e),Xu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for($u=e,f=e.child;null!==f;){for(h=$u=f;null!==$u;){switch(p=(d=$u).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var v=d.stateNode;if("function"===typeof v.componentWillUnmount){r=d,n=d.return;try{t=r,v.props=t.memoizedProps,v.state=t.memoizedState,v.componentWillUnmount()}catch(y){Ec(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==p?(p.return=d,$u=p):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=ve("display",u))}catch(y){Ec(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Ec(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&vs(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Ec(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){$u=e,ws(e,t,n)}function ws(e,t,n){for(var r=0!==(1&e.mode);null!==$u;){var i=$u,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Yu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=Yu;var c=Xu;if(Yu=o,(Xu=s)&&!c)for($u=i;null!==$u;)s=(o=$u).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,$u=s):xs(i);for(;null!==a;)$u=a,ws(a,t,n),a=a.sibling;$u=i,Yu=u,Xu=c}bs(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,$u=a):bs(e)}}function bs(e){for(;null!==$u;){var t=$u;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Ec(t,t.return,d)}}if(t===e){$u=null;break}if(null!==(n=t.sibling)){n.return=t.return,$u=n;break}$u=t.return}}function _s(e){for(;null!==$u;){var t=$u;if(t===e){$u=null;break}var n=t.sibling;if(null!==n){n.return=t.return,$u=n;break}$u=t.return}}function xs(e){for(;null!==$u;){var t=$u;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Ec(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Ec(t,i,s)}}var a=t.return;try{as(t)}catch(s){Ec(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Ec(t,o,s)}}}catch(s){Ec(t,t.return,s)}if(t===e){$u=null;break}var u=t.sibling;if(null!==u){u.return=t.return,$u=u;break}$u=t.return}}var Is,Es=Math.ceil,Ts=w.ReactCurrentDispatcher,Ss=w.ReactCurrentOwner,As=w.ReactCurrentBatchConfig,Cs=0,Ns=null,Ps=null,Rs=0,Ds=0,Os=Ii(0),Ls=0,Ms=null,Fs=0,Us=0,Vs=0,Bs=null,js=null,zs=0,qs=1/0,Gs=null,Ks=!1,Hs=null,Qs=null,Ws=!1,Js=null,Ys=0,Xs=0,Zs=null,$s=-1,ec=0;function tc(){return 0!==(6&Cs)?Xe():-1!==$s?$s:$s=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Cs)&&0!==Rs?Rs&-Rs:null!==va.transition?(0===ec&&(ec=vt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,Zs=null,Error(a(185));mt(e,n,r),0!==(2&Cs)&&e===Ns||(e===Ns&&(0===(2&Cs)&&(Us|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===Cs&&0===(1&t.mode)&&(qs=Xe()+500,Vi&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&We(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&We(n),1===t)0===e.tag?function(e){Vi=!0,ji(e)}(cc.bind(null,e)):ji(cc.bind(null,e)),oi((function(){0===(6&Cs)&&zi()})),n=null;else{switch(wt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if($s=-1,ec=0,0!==(6&Cs))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cs;Cs|=2;var o=vc();for(Ns===e&&Rs===t||(Gs=null,qs=Xe()+500,dc(e,t));;)try{kc();break}catch(s){pc(e,s)}ba(),Ts.current=o,Cs=i,null!==Ps?t=0:(Ns=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=pt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,js,Gs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,js,Gs),t);break}_c(e,js,Gs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Es(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,js,Gs),r);break}_c(e,js,Gs);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=js,js=n,null!==t&&uc(t)),e}function uc(e){null===js?js=e:js.push.apply(js,e)}function sc(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Cs))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,js,Gs),ic(e,Xe()),null}function lc(e,t){var n=Cs;Cs|=1;try{return e(t)}finally{0===(Cs=n)&&(qs=Xe()+500,Vi&&zi())}}function fc(e){null!==Js&&0===Js.tag&&0===(6&Cs)&&xc();var t=Cs;Cs|=1;var n=As.transition,r=kt;try{if(As.transition=null,kt=1,e)return e()}finally{kt=r,As.transition=n,0===(6&(Cs=t))&&zi()}}function hc(){Ds=Os.current,Ei(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ps)for(n=Ps.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:io(),Ei(Ci),Ei(Ai),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Ei(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,Ps=e=Oc(e.current,null),Rs=Ds=t,Ls=0,Ms=null,Vs=Us=Fs=0,js=Bs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function pc(e,t){for(;;){var n=Ps;try{if(ba(),fo.current=ou,go){for(var r=vo.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(po=0,mo=yo=vo=null,ko=!1,wo=0,Ss.current=null,null===n||null===n.return){Ls=1,Ms=t,Ps=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var p=mu(u);if(null!==p){p.flags&=-257,gu(p,u,s,0,t),1&p.mode&&yu(o,l,t),c=l;var v=(t=p).updateQueue;if(null===v){var y=new Set;y.add(c),t.updateQueue=y}else v.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),pa(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Bs?Bs=[o]:Bs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Qs||!Qs.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(w){t=w,Ps===n&&null!==n&&(Ps=n=n.return);continue}break}}function vc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function yc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ns||0===(268435455&Fs)&&0===(268435455&Us)||sc(Ns,Rs)}function mc(e,t){var n=Cs;Cs|=2;var r=vc();for(Ns===e&&Rs===t||(Gs=null,dc(e,t));;)try{gc();break}catch(i){pc(e,i)}if(ba(),Cs=n,Ts.current=r,null!==Ps)throw Error(a(261));return Ns=null,Rs=0,Ls}function gc(){for(;null!==Ps;)wc(Ps)}function kc(){for(;null!==Ps&&!Je();)wc(Ps)}function wc(e){var t=Is(e.alternate,e,Ds);e.memoizedProps=e.pendingProps,null===t?bc(e):Ps=t,Ss.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Wu(n,t,Ds)))return void(Ps=n)}else{if(null!==(n=Ju(n,t)))return n.flags&=32767,void(Ps=n);if(null===e)return Ls=6,void(Ps=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ps=t);Ps=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=As.transition;try{As.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Js);if(0!==(6&Cs))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(Ps=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Ws||(Ws=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=As.transition,As.transition=null;var u=kt;kt=1;var s=Cs;Cs|=4,Ss.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(b){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var p;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(p=h.firstChild);)d=h,h=p;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(p=h.nextSibling))break;d=(h=d).parentNode}h=p}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,$u=t;null!==$u;)if(e=(t=$u).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,$u=e;else for(;null!==$u;){t=$u;try{var v=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==v){var y=v.memoizedProps,m=v.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(a(163))}}catch(b){Ec(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,$u=e;break}$u=t.return}v=ns,ns=!1}(e,n),ms(n,e),pr(ti),Gt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Ye(),Cs=s,kt=u,As.transition=o}else e.current=n;if(Ws&&(Ws=!1,Js=e,Ys=i),o=e.pendingLanes,0===o&&(Qs=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Hs,Hs=null,e;0!==(1&Ys)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Zs?Xs++:(Xs=0,Zs=e):Xs=0,zi()}(e,t,n,r)}finally{As.transition=i,kt=r}return null}function xc(){if(null!==Js){var e=wt(Ys),t=As.transition,n=kt;try{if(As.transition=null,kt=16>e?16:e,null===Js)var r=!1;else{if(e=Js,Js=null,Ys=0,0!==(6&Cs))throw Error(a(331));var i=Cs;for(Cs|=4,$u=e.current;null!==$u;){var o=$u,u=o.child;if(0!==(16&$u.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for($u=l;null!==$u;){var f=$u;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,$u=h;else for(;null!==$u;){var d=(f=$u).sibling,p=f.return;if(os(f),f===l){$u=null;break}if(null!==d){d.return=p,$u=d;break}$u=p}}}var v=o.alternate;if(null!==v){var y=v.child;if(null!==y){v.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}$u=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,$u=u;else e:for(;null!==$u;){if(0!==(2048&(o=$u).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,$u=g;break e}$u=o.return}}var k=e.current;for($u=k;null!==$u;){var w=(u=$u).child;if(0!==(2064&u.subtreeFlags)&&null!==w)w.return=u,$u=w;else e:for(u=k;null!==$u;){if(0!==(2048&(s=$u).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Ec(s,s.return,_)}if(s===u){$u=null;break e}var b=s.sibling;if(null!==b){b.return=s.return,$u=b;break e}$u=s.return}}if(Cs=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,As.transition=t}}return!1}function Ic(e,t,n){e=Oa(e,t=pu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Ec(e,t,n){if(3===e.tag)Ic(e,e,n);else for(;null!==t;){if(3===t.tag){Ic(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Qs||!Qs.has(r))){t=Oa(t,e=vu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>Xe()-zs?dc(e,0):Vs|=n),ic(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Ca(e,t))&&(mt(e,t,n),ic(e,n))}function Ac(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Sc(e,n)}function Nc(e,t){return Qe(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Pc(e,t,n,r)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Dc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case I:u=8,i|=8;break;case E:return(e=Rc(12,n,t,2|i)).elementType=E,e.lanes=o,e;case C:return(e=Rc(13,n,t,i)).elementType=C,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case D:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case S:u=9;break e;case A:u=11;break e;case P:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Bc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Pa(a),e}function zc(e){if(!e)return Si;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Da(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Qc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Is=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ci.current)wu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Eu(e,t,n)}return Ku(e,t,n)}(e,t,n);wu=0!==(131072&e.flags)}else wu=!1,ia&&0!==(1048576&t.flags)&&$i(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gu(e,t),e=t.pendingProps;var i=Pi(t,Ai.current);Ia(t,n),i=Io(null,t,r,e,i,n);var o=Eo();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Pa(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Cu(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),bu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===P)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Su(null,t,r,e,n);break e;case 1:t=Au(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Su(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Au(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Pu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Pu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}bu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),bu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):bu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return bu(e,t,t.pendingProps,n),t.child;case 8:case 12:return bu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Ci.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Da(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}bu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ia(t,n),r=r(i=Ea(i)),t.flags|=1,bu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Iu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Gu(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ia(t,n),qa(t,r,i),Ka(t,r,i,n),Cu(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Eu(e,t,n)}throw Error(a(156,t.tag))};var Wc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function $c(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",$c);return e._reactRootContainer=o,e[pi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",$c);return e._reactRootContainer=s,e[pi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Gc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Yc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Yc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Gc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=It();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Cs)&&(qs=Xe()+500,zi()))}break;case 13:fc((function(){var t=Ca(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Qc(e,1)}},_t=function(e){if(13===e.tag){var t=Ca(e,134217728);if(null!==t)rc(t,e,134217728,tc());Qc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Ca(e,t);if(null!==n)rc(n,e,t,tc());Qc(e,t)}},It=function(){return kt},Et=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(a(90));Q(r),Z(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=lc,Ce=fc;var tl={usingClientEntryPoint:!1,Events:[ki,wi,bi,Te,Se,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Wc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Wc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[pi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Zc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var w=k.prototype=new g;w.constructor=k,v(w,m.prototype),w.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},I={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!I.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function C(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+A(s,0):a,b(o)?(i="",null!=e&&(i=e.replace(S,"$&/")+"/"),C(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(S,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",b(e))for(var c=0;c<e.length;c++){var l=a+A(u=e[c],c);s+=C(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=C(u=u.value,t,i,l=a+A(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return C(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!I.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,p=!1,v=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function b(e){if(y=!1,w(e),!v)if(null!==r(c))v=!0,D(_);else{var t=r(l);null!==t&&O(b,t.startTime-e)}}function _(e,n){v=!1,y&&(y=!1,g(T),T=-1),p=!0;var a=d;try{for(w(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!C());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),w(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(b,f.startTime-n),s=!1}return s}finally{h=null,d=a,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,I=!1,E=null,T=-1,S=5,A=-1;function C(){return!(t.unstable_now()-A<S)}function N(){if(null!==E){var e=t.unstable_now();A=e;var n=!0;try{n=E(!0,e)}finally{n?x():(I=!1,E=null)}}else I=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=N,x=function(){R.postMessage(null)}}else x=function(){m(N,0)};function D(e){E=e,I||(I=!0,x())}function O(e,n){T=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){v||p||(v=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(T),T=-1):y=!0,O(b,a-o))):(e.sortIndex=u,n(c,e),v||p||(v=!0,D(_))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.m=e,n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=function(e){return Promise.all(Object.keys(n.f).reduce((function(t,r){return n.f[r](e,t),t}),[]))},n.u=function(e){return"static/js/"+e+".ba076913.chunk.js"},n.miniCssF=function(e){},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e={},t="firstdb:";n.l=function(r,i,a,o){if(e[r])e[r].push(i);else{var u,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==r||f.getAttribute("data-webpack")==t+a){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,n.nc&&u.setAttribute("nonce",n.nc),u.setAttribute("data-webpack",t+a),u.src=r),e[r]=[i];var h=function(t,n){u.onerror=u.onload=null,clearTimeout(d);var i=e[r];if(delete e[r],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}}}(),n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/chatGroup/",function(){var e={179:0};n.f.j=function(t,r){var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var a=new Promise((function(n,r){i=e[t]=[n,r]}));r.push(i[2]=a);var o=n.p+n.u(t),u=new Error;n.l(o,(function(r){if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;u.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",u.name="ChunkLoadError",u.type=a,u.request=o,i[1](u)}}),"chunk-"+t,t)}};var t=function(t,r){var i,a,o=r[0],u=r[1],s=r[2],c=0;if(o.some((function(t){return 0!==e[t]}))){for(i in u)n.o(u,i)&&(n.m[i]=u[i]);if(s)s(n)}for(t&&t(r);c<o.length;c++)a=o[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},r=self.webpackChunkfirstdb=self.webpackChunkfirstdb||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}(),function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return Y},SDK_VERSION:function(){return ot},_DEFAULT_ENTRY_NAME:function(){return Qe},_addComponent:function(){return Xe},_addOrOverwriteComponent:function(){return Ze},_apps:function(){return Je},_clearComponents:function(){return nt},_components:function(){return Ye},_getProvider:function(){return et},_registerComponent:function(){return $e},_removeServiceInstance:function(){return tt},deleteApp:function(){return lt},getApp:function(){return st},getApps:function(){return ct},initializeApp:function(){return ut},onLog:function(){return dt},registerVersion:function(){return ht},setLogLevel:function(){return pt}});var t=n(791),r=n(250);function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function a(){a=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,o=Object.defineProperty||function(e,t,n){e[t]=n.value},u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",c=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function f(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,n){return e[t]=n}}function h(e,t,n,r){var i=t&&t.prototype instanceof k?t:k,a=Object.create(i.prototype),u=new R(r||[]);return o(a,"_invoke",{value:A(e,n,u)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}t.wrap=h;var p="suspendedStart",v="suspendedYield",y="executing",m="completed",g={};function k(){}function w(){}function b(){}var _={};f(_,s,(function(){return this}));var x=Object.getPrototypeOf,I=x&&x(x(D([])));I&&I!==n&&r.call(I,s)&&(_=I);var E=b.prototype=k.prototype=Object.create(_);function T(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function n(a,o,u,s){var c=d(e[a],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==i(f)&&r.call(f,"__await")?t.resolve(f.__await).then((function(e){n("next",e,u,s)}),(function(e){n("throw",e,u,s)})):t.resolve(f).then((function(e){l.value=e,u(l)}),(function(e){return n("throw",e,u,s)}))}s(c.arg)}var a;o(this,"_invoke",{value:function(e,r){function i(){return new t((function(t,i){n(e,r,t,i)}))}return a=a?a.then(i,i):i()}})}function A(t,n,r){var i=p;return function(a,o){if(i===y)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw o;return{value:e,done:!0}}for(r.method=a,r.arg=o;;){var u=r.delegate;if(u){var s=C(u,r);if(s){if(s===g)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(i===p)throw i=m,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);i=y;var c=d(t,n,r);if("normal"===c.type){if(i=r.done?m:v,c.arg===g)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(i=m,r.method="throw",r.arg=c.arg)}}}function C(t,n){var r=n.method,i=t.iterator[r];if(i===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),g;var a=d(i,t.iterator,n.arg);if("throw"===a.type)return n.method="throw",n.arg=a.arg,n.delegate=null,g;var o=a.arg;return o?o.done?(n[t.resultName]=o.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,g):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,g)}function N(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function R(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(N,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[s];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var a=-1,o=function n(){for(;++a<t.length;)if(r.call(t,a))return n.value=t[a],n.done=!1,n;return n.value=e,n.done=!0,n};return o.next=o}}throw new TypeError(i(t)+" is not iterable")}return w.prototype=b,o(E,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:w,configurable:!0}),w.displayName=f(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,f(e,l,"GeneratorFunction")),e.prototype=Object.create(E),e},t.awrap=function(e){return{__await:e}},T(S.prototype),f(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,n,r,i,a){void 0===a&&(a=Promise);var o=new S(h(e,n,r,i),a);return t.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},T(E),f(E,l,"Generator"),f(E,s,(function(){return this})),f(E,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=D,R.prototype={constructor:R,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(P),!t)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function i(r,i){return u.type="throw",u.arg=t,n.next=r,i&&(n.method="next",n.arg=e),!!i}for(var a=this.tryEntries.length-1;a>=0;--a){var o=this.tryEntries[a],u=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=r.call(o,"catchLoc"),c=r.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;P(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:D(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),g}},t}function o(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function u(e){o(a,r,i,u,s,"next",e)}function s(e){o(a,r,i,u,s,"throw",e)}u(void 0)}))}}function s(e){if(Array.isArray(e))return e}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e,t){if(e){if("string"===typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){return s(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,i=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||l(e,t)||f()}var d=n.p+"static/media/smile.4e4f4061b1cf557b6cb7.png",p=n.p+"static/media/send.cce7f972efaf9447fcdf.png";function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function y(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function m(e,t,n){return m=y()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&v(i,n.prototype),i},m.apply(null,arguments)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}function k(){return k="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},k.apply(this,arguments)}function w(e){var t="function"===typeof Map?new Map:void 0;return w=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return m(e,arguments,g(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),v(r,e)},w(e)}function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=l(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){u=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(u)throw a}}}}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){var t=y();return function(){var n,r=g(e);if(t){var a=g(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===i(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return x(e)}(this,n)}}function E(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function T(e){return function(e){if(Array.isArray(e))return c(e)}(e)||E(e)||l(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e){var t=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===i(t)?t:String(t)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A(r.key),r)}}function N(e,t,n){return t&&C(e.prototype,t),n&&C(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e,t,n){return(t=A(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},D={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(R(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new O;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},O=function(e){_(n,e);var t=I(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return N(n)}(w(Error)),L=function(e){return function(e){var t=R(e);return D.encodeByteArray(t,!0)}(e).replace(/\./g,"")},M=function(e){try{return D.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function F(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=F(e[n],t[n]));return e}var U=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},V=function(){try{return U()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/chatGroup",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&M(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},B=function(e){var t=function(e){var t,n;return null===(n=null===(t=V())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]}(e);if(t){var n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));var r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]}},j=function(){var e;return null===(e=V())||void 0===e?void 0:e.config},z=function(){function e(){var t=this;S(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return N(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function q(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[L(JSON.stringify({alg:"none",type:"JWT"})),L(JSON.stringify(a)),""].join(".")}function G(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function K(){var e,t=null===(e=V())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function H(){var e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function Q(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function W(){var e=G();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function J(){try{return"object"===typeof indexedDB}catch(e){return!1}}var Y=function(e){_(n,e);var t=I(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(x(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(x(a),X.prototype.create),a}return N(n)}(w(Error)),X=function(){function e(t,n,r){S(this,e),this.service=t,this.serviceName=n,this.errors=r}return N(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(Z,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new Y(n,a,t)}}]),e}();var Z=/\{\$([^}]+)}/g;function $(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function ee(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function te(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(ne(u)&&ne(s)){if(!te(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function ne(e){return null!==e&&"object"===typeof e}function re(e){for(var t=[],n=function(){var e=h(i[r],2),n=e[0],a=e[1];Array.isArray(a)?a.forEach((function(e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(a))},r=0,i=Object.entries(e);r<i.length;r++)n();return t.length?"&"+t.join("&"):""}function ie(e){var t={};return e.replace(/^\?/,"").split("&").forEach((function(e){if(e){var n=h(e.split("="),2),r=n[0],i=n[1];t[decodeURIComponent(r)]=decodeURIComponent(i)}})),t}function ae(e){var t=e.indexOf("?");if(!t)return"";var n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function oe(e,t){var n=new ue(e,t);return n.subscribe.bind(n)}var ue=function(){function e(t,n){var r=this;S(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return N(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=se),void 0===r.error&&(r.error=se),void 0===r.complete&&(r.complete=se);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function se(){}function ce(e){return e&&e._delegate?e._delegate:e}var le=function(){function e(t,n,r){S(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return N(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),fe="[DEFAULT]",he=function(){function e(t,n){S(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return N(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new z;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:fe})}catch(s){}var t,n=b(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=h(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(s){}}}catch(c){n.e(c)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(T(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),T(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=b(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=h(i.value,2),s=u[0],c=u[1];r===this.normalizeInstanceIdentifier(s)&&c.resolve(a)}}catch(l){o.e(l)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(o){}}}catch(u){i.e(u)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===fe?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(o){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe;return this.component?this.component.multipleInstances?e:fe:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var de,pe,ve=function(){function e(t){S(this,e),this.name=t,this.providers=new Map}return N(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new he(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ye=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(pe||(pe={}));var me={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},ge=pe.INFO,ke=(P(de={},pe.DEBUG,"log"),P(de,pe.VERBOSE,"log"),P(de,pe.INFO,"info"),P(de,pe.WARN,"warn"),P(de,pe.ERROR,"error"),de),we=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ke[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},be=function(){function e(t){S(this,e),this.name=t,this._logLevel=ge,this._logHandler=we,this._userLogHandler=null,ye.push(this)}return N(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in pe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?me[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.DEBUG].concat(t)),this._logHandler.apply(this,[this,pe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,pe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.INFO].concat(t)),this._logHandler.apply(this,[this,pe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.WARN].concat(t)),this._logHandler.apply(this,[this,pe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,pe.ERROR].concat(t)),this._logHandler.apply(this,[this,pe.ERROR].concat(t))}}]),e}();function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie,Ee,Te=function(e,t){return t.some((function(t){return e instanceof t}))};var Se=new WeakMap,Ae=new WeakMap,Ce=new WeakMap,Ne=new WeakMap,Pe=new WeakMap;var Re={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ae.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Ce.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Le(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function De(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Me(this),n),Le(Se.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Le(e.apply(Me(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Me(this),t].concat(r));return Ce.set(a,t.sort?t.sort():[t]),Le(a)}}function Oe(e){return"function"===typeof e?De(e):(e instanceof IDBTransaction&&function(e){if(!Ae.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ae.set(e,t)}}(e),Te(e,Ie||(Ie=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Re):e)}function Le(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Le(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&Se.set(t,e)})).catch((function(){})),Pe.set(t,e),t}(e);if(Ne.has(e))return Ne.get(e);var t=Oe(e);return t!==e&&(Ne.set(e,t),Pe.set(t,e)),t}var Me=function(e){return Pe.get(e)};var Fe,Ue,Ve=["get","getKey","getAll","getAllKeys","count"],Be=["put","add","delete","clear"],je=new Map;function ze(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(je.get(t))return je.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Be.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ve.includes(n))){var o=function(){var e=u(a().mark((function e(t){var o,u,s,c,l,f,h=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(u=this.transaction(t,i?"readwrite":"readonly"),s=u.store,c=h.length,l=new Array(c>1?c-1:0),f=1;f<c;f++)l[f-1]=h[f];return r&&(s=s.index(l.shift())),e.next=6,Promise.all([(o=s)[n].apply(o,l),i&&u.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return je.set(t,o),o}}}Re=function(e){return xe(xe({},e),{},{get:function(t,n,r){return ze(t,n)||e.get(t,n,r)},has:function(t,n){return!!ze(t,n)||e.has(t,n)}})}(Re);var qe=function(){function e(t){S(this,e),this.container=t}return N(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Ge="@firebase/app",Ke="0.9.19",He=new be("@firebase/app"),Qe="[DEFAULT]",We=(P(Fe={},Ge,"fire-core"),P(Fe,"@firebase/app-compat","fire-core-compat"),P(Fe,"@firebase/analytics","fire-analytics"),P(Fe,"@firebase/analytics-compat","fire-analytics-compat"),P(Fe,"@firebase/app-check","fire-app-check"),P(Fe,"@firebase/app-check-compat","fire-app-check-compat"),P(Fe,"@firebase/auth","fire-auth"),P(Fe,"@firebase/auth-compat","fire-auth-compat"),P(Fe,"@firebase/database","fire-rtdb"),P(Fe,"@firebase/database-compat","fire-rtdb-compat"),P(Fe,"@firebase/functions","fire-fn"),P(Fe,"@firebase/functions-compat","fire-fn-compat"),P(Fe,"@firebase/installations","fire-iid"),P(Fe,"@firebase/installations-compat","fire-iid-compat"),P(Fe,"@firebase/messaging","fire-fcm"),P(Fe,"@firebase/messaging-compat","fire-fcm-compat"),P(Fe,"@firebase/performance","fire-perf"),P(Fe,"@firebase/performance-compat","fire-perf-compat"),P(Fe,"@firebase/remote-config","fire-rc"),P(Fe,"@firebase/remote-config-compat","fire-rc-compat"),P(Fe,"@firebase/storage","fire-gcs"),P(Fe,"@firebase/storage-compat","fire-gcs-compat"),P(Fe,"@firebase/firestore","fire-fst"),P(Fe,"@firebase/firestore-compat","fire-fst-compat"),P(Fe,"fire-js","fire-js"),P(Fe,"firebase","fire-js-all"),Fe),Je=new Map,Ye=new Map;function Xe(e,t){try{e.container.addComponent(t)}catch(n){He.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ze(e,t){e.container.addOrOverwriteComponent(t)}function $e(e){var t=e.name;if(Ye.has(t))return He.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ye.set(t,e);var n,r=b(Je.values());try{for(r.s();!(n=r.n()).done;){Xe(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function et(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function tt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Qe;et(e,t).clearInstance(n)}function nt(){Ye.clear()}var rt=(P(Ue={},"no-app","No Firebase App '{$appName}' has been created - call initializeApp() first"),P(Ue,"bad-app-name","Illegal App name: '{$appName}"),P(Ue,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),P(Ue,"app-deleted","Firebase App named '{$appName}' already deleted"),P(Ue,"no-options","Need to provide options, when not being deployed to hosting via source."),P(Ue,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),P(Ue,"invalid-log-argument","First argument to `onLog` must be null or a function."),P(Ue,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),P(Ue,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),P(Ue,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),P(Ue,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ue),it=new X("app","Firebase",rt),at=function(){function e(t,n,r){var i=this;S(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new le("app",(function(){return i}),"PUBLIC"))}return N(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw it.create("app-deleted",{appName:this._name})}}]),e}(),ot="10.4.0";function ut(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Qe,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw it.create("bad-app-name",{appName:String(i)});if(n||(n=j()),!n)throw it.create("no-options");var a=Je.get(i);if(a){if(te(n,a.options)&&te(r,a.config))return a;throw it.create("duplicate-app",{appName:i})}var o,u=new ve(i),s=b(Ye.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new at(n,r,u);return Je.set(i,l),l}function st(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=Je.get(e);if(!t&&e===Qe&&j())return ut();if(!t)throw it.create("no-app",{appName:e});return t}function ct(){return Array.from(Je.values())}function lt(e){return ft.apply(this,arguments)}function ft(){return(ft=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Je.has(n)){e.next=6;break}return Je.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ht(e,t,n){var r,i=null!==(r=We[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void He.warn(u.join(" "))}$e(new le("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function dt(e,t){if(null!==e&&"function"!==typeof e)throw it.create("invalid-log-argument");!function(e,t){var n,r=b(ye);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=me[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:pe[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function pt(e){var t;t=e,ye.forEach((function(e){e.setLogLevel(t)}))}var vt="firebase-heartbeat-database",yt=1,mt="firebase-heartbeat-store",gt=null;function kt(){return gt||(gt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Le(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Le(u.result),e.oldVersion,e.newVersion,Le(u.transaction),e)})),r&&u.addEventListener("blocked",(function(e){return r(e.oldVersion,e.newVersion,e)})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(e){return a(e.oldVersion,e.newVersion,e)}))})).catch((function(){})),s}(vt,yt,{upgrade:function(e,t){if(0===t)e.createObjectStore(mt)}}).catch((function(e){throw it.create("idb-open",{originalErrorMessage:e.message})}))),gt}function wt(e){return bt.apply(this,arguments)}function bt(){return bt=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kt();case 3:return n=e.sent,e.next=6,n.transaction(mt).objectStore(mt).get(It(t));case 6:return r=e.sent,e.abrupt("return",r);case 10:e.prev=10,e.t0=e.catch(0),e.t0 instanceof Y?He.warn(e.t0.message):(i=it.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),He.warn(i.message));case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),bt.apply(this,arguments)}function _t(e,t){return xt.apply(this,arguments)}function xt(){return xt=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,kt();case 3:return r=e.sent,i=r.transaction(mt,"readwrite"),o=i.objectStore(mt),e.next=8,o.put(n,It(t));case 8:return e.next=10,i.done;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),e.t0 instanceof Y?He.warn(e.t0.message):(u=it.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),He.warn(u.message));case 15:case"end":return e.stop()}}),e,null,[[0,12]])}))),xt.apply(this,arguments)}function It(e){return"".concat(e.name,"!").concat(e.options.appId)}var Et=function(){function e(t){var n=this;S(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new Ct(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return N(e,[{key:"triggerHeartbeat",value:function(){var e=u(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=Tt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=Tt(),n=St(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,o=L(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Tt(){return(new Date).toISOString().substring(0,10)}function St(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=b(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),Nt(r)>n)return a.dates.pop(),0}else if(r.push({agent:e.agent,dates:[e.date]}),Nt(r)>n)return r.pop(),0;i=i.slice(1)};for(a.s();!(t=a.n()).done&&0!==o(););}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var At,Ct=function(){function e(t){S(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return N(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(J()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,wt(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",_t(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",_t(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(T(r.heartbeats),T(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function Nt(e){return L(JSON.stringify({version:2,heartbeats:e})).length}At="",$e(new le("platform-logger",(function(e){return new qe(e)}),"PRIVATE")),$e(new le("heartbeat",(function(e){return new Et(e)}),"PRIVATE")),ht(Ge,Ke,At),ht(Ge,Ke,"esm2017"),ht("fire-js","");var Pt,Rt="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Dt={},Ot=Ot||{},Lt=Rt||self;function Mt(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ft(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Ut="closure_uid_"+(1e9*Math.random()>>>0),Vt=0;function Bt(e,t,n){return e.call.apply(e.bind,arguments)}function jt(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function zt(e,t,n){return(zt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Bt:jt).apply(null,arguments)}function qt(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Gt(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Kt(){this.s=this.s,this.o=this.o}Kt.prototype.s=!1,Kt.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Ut)&&e[Ut]||(e[Ut]=++Vt))},Kt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Ht=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Qt(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Wt(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Mt(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Jt(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Jt.prototype.h=function(){this.defaultPrevented=!0};var Yt=function(){if(!Lt.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Lt.addEventListener("test",(function(){}),t),Lt.removeEventListener("test",(function(){}),t)}catch(n){}return e}();function Xt(e){return/^[\s\xa0]*$/.test(e)}function Zt(){var e=Lt.navigator;return e&&(e=e.userAgent)?e:""}function $t(e){return-1!=Zt().indexOf(e)}function en(e){return en[" "](e),e}en[" "]=function(){};var tn,nn,rn=$t("Opera"),an=$t("Trident")||$t("MSIE"),on=$t("Edge"),un=on||an,sn=$t("Gecko")&&!(-1!=Zt().toLowerCase().indexOf("webkit")&&!$t("Edge"))&&!($t("Trident")||$t("MSIE"))&&!$t("Edge"),cn=-1!=Zt().toLowerCase().indexOf("webkit")&&!$t("Edge");function ln(){var e=Lt.document;return e?e.documentMode:void 0}e:{var fn="",hn=function(){var e=Zt();return sn?/rv:([^\);]+)(\)|;)/.exec(e):on?/Edge\/([\d\.]+)/.exec(e):an?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):cn?/WebKit\/(\S+)/.exec(e):rn?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(hn&&(fn=hn?hn[1]:""),an){var dn=ln();if(null!=dn&&dn>parseFloat(fn)){tn=String(dn);break e}}tn=fn}if(Lt.document&&an){var pn=ln();nn=pn||(parseInt(tn,10)||void 0)}else nn=void 0;var vn=nn;function yn(e,t){if(Jt.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(sn){e:{try{en(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:mn[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&yn.$.h.call(this)}}Gt(yn,Jt);var mn={2:"touch",3:"pen",4:"mouse"};yn.prototype.h=function(){yn.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var gn="closure_listenable_"+(1e6*Math.random()|0),kn=0;function wn(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++kn,this.fa=this.ia=!1}function bn(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function _n(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function xn(e){var t={};for(var n in e)t[n]=e[n];return t}var In="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function En(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<In.length;a++)n=In[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Tn(e){this.src=e,this.g={},this.h=0}function Sn(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Ht(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(bn(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function An(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.fa&&a.listener==t&&a.capture==!!n&&a.la==r)return i}return-1}Tn.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=An(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new wn(t,this.src,a,!!r,i)).ia=n,e.push(t)),t};var Cn="closure_lm_"+(1e6*Math.random()|0),Nn={};function Pn(e,t,n,r,i){if(r&&r.once)return Dn(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Pn(e,t[a],n,r,i);return null}return n=Bn(n),e&&e[gn]?e.O(t,n,Ft(r)?!!r.capture:!!r,i):Rn(e,t,n,!1,r,i)}function Rn(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Ft(i)?!!i.capture:!!i,u=Un(e);if(u||(e[Cn]=u=new Tn(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Fn;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Yt||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Mn(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Dn(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Dn(e,t[a],n,r,i);return null}return n=Bn(n),e&&e[gn]?e.P(t,n,Ft(r)?!!r.capture:!!r,i):Rn(e,t,n,!0,r,i)}function On(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)On(e,t[a],n,r,i);else r=Ft(r)?!!r.capture:!!r,n=Bn(n),e&&e[gn]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=An(a=e.g[t],n,r,i))&&(bn(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Un(e))&&(t=e.g[t.toString()],e=-1,t&&(e=An(t,n,r,i)),(n=-1<e?t[e]:null)&&Ln(n))}function Ln(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[gn])Sn(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Mn(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Un(t))?(Sn(n,e),0==n.h&&(n.src=null,t[Cn]=null)):bn(e)}}}function Mn(e){return e in Nn?Nn[e]:Nn[e]="on"+e}function Fn(e,t){if(e.fa)e=!0;else{t=new yn(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Ln(e),e=n.call(r,t)}return e}function Un(e){return(e=e[Cn])instanceof Tn?e:null}var Vn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Bn(e){return"function"===typeof e?e:(e[Vn]||(e[Vn]=function(t){return e.handleEvent(t)}),e[Vn])}function jn(){Kt.call(this),this.i=new Tn(this),this.S=this,this.J=null}function zn(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Jt(t,e);else if(t instanceof Jt)t.target=t.target||e;else{var i=t;En(t=new Jt(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=qn(o,r,!0,t)&&i}if(i=qn(o=t.g=e,r,!0,t)&&i,i=qn(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=qn(o=t.g=n[a],r,!1,t)&&i}function qn(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.fa&&o.capture==n){var u=o.listener,s=o.la||o.src;o.ia&&Sn(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Gt(jn,Kt),jn.prototype[gn]=!0,jn.prototype.removeEventListener=function(e,t,n,r){On(this,e,t,n,r)},jn.prototype.N=function(){if(jn.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)bn(n[r]);delete t.g[e],t.h--}}this.J=null},jn.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},jn.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Gn=Lt.JSON.stringify,Kn=function(){function e(t,n){S(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return N(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}();function Hn(){var e=er,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Qn=function(){function e(){S(this,e),this.h=this.g=null}return N(e,[{key:"add",value:function(e,t){var n=Wn.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Wn=new Kn((function(){return new Jn}),(function(e){return e.reset()})),Jn=function(){function e(){S(this,e),this.next=this.g=this.h=null}return N(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Yn(e){var t=1;e=e.split(":");for(var n=[];0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Xn(e){Lt.setTimeout((function(){throw e}),0)}var Zn,$n=!1,er=new Qn,tr=function(){var e=Lt.Promise.resolve(void 0);Zn=function(){e.then(nr)}},nr=function(){for(var e;e=Hn();){try{e.h.call(e.g)}catch(n){Xn(n)}var t=Wn;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}$n=!1};function rr(e,t){jn.call(this),this.h=e||1,this.g=t||Lt,this.j=zt(this.qb,this),this.l=Date.now()}function ir(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function ar(e,t,n){if("function"===typeof e)n&&(e=zt(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=zt(e.handleEvent,e)}return 2147483647<Number(t)?-1:Lt.setTimeout(e,t||0)}function or(e){e.g=ar((function(){e.g=null,e.i&&(e.i=!1,or(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Gt(rr,jn),(Pt=rr.prototype).ga=!1,Pt.T=null,Pt.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),zn(this,"tick"),this.ga&&(ir(this),this.start()))}},Pt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Pt.N=function(){rr.$.N.call(this),ir(this),delete this.g};var ur=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return N(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:or(this)}},{key:"N",value:function(){k(g(n.prototype),"N",this).call(this),this.g&&(Lt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Kt);function sr(e){Kt.call(this),this.h=e,this.g={}}Gt(sr,Kt);var cr=[];function lr(e,t,n,r){Array.isArray(n)||(n&&(cr[0]=n.toString()),n=cr);for(var i=0;i<n.length;i++){var a=Pn(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function fr(e){_n(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ln(e)}),e),e.g={}}function hr(){this.g=!0}function dr(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Gn(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}sr.prototype.N=function(){sr.$.N.call(this),fr(this)},sr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},hr.prototype.Ea=function(){this.g=!1},hr.prototype.info=function(){};var pr={},vr=null;function yr(){return vr=vr||new jn}function mr(e){Jt.call(this,pr.Ta,e)}function gr(e){var t=yr();zn(t,new mr(t))}function kr(e,t){Jt.call(this,pr.STAT_EVENT,e),this.stat=t}function wr(e){var t=yr();zn(t,new kr(t,e))}function br(e,t){Jt.call(this,pr.Ua,e),this.size=t}function _r(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Lt.setTimeout((function(){e()}),t)}pr.Ta="serverreachability",Gt(mr,Jt),pr.STAT_EVENT="statevent",Gt(kr,Jt),pr.Ua="timingevent",Gt(br,Jt);var xr={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ir={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Er(){}function Tr(e){return e.h||(e.h=e.i())}function Sr(){}Er.prototype.h=null;var Ar,Cr={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Nr(){Jt.call(this,"d")}function Pr(){Jt.call(this,"c")}function Rr(){}function Dr(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new sr(this),this.P=Lr,e=un?125:void 0,this.V=new rr(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Or}function Or(){this.i=null,this.g="",this.h=!1}Gt(Nr,Jt),Gt(Pr,Jt),Gt(Rr,Er),Rr.prototype.g=function(){return new XMLHttpRequest},Rr.prototype.i=function(){return{}},Ar=new Rr;var Lr=45e3,Mr={},Fr={};function Ur(e,t,n){e.L=1,e.v=ri(Zr(t)),e.s=n,e.S=!0,Vr(e,null)}function Vr(e,t){e.G=Date.now(),qr(e),e.A=Zr(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),yi(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Or,e.g=ma(e.l,n?t:null,!e.s),0<e.O&&(e.M=new ur(zt(e.Pa,e,e.g),e.O)),lr(e.U,e.g,"readystatechange",e.nb),t=e.I?xn(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),gr(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function Br(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function jr(e,t,n){for(var r,i=!0;!e.J&&e.C<n.length;){if((r=zr(e,n))==Fr){4==t&&(e.o=4,wr(14),i=!1),dr(e.j,e.m,null,"[Incomplete Response]");break}if(r==Mr){e.o=4,wr(15),dr(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}dr(e.j,e.m,r,null),Wr(e,r)}Br(e)&&r!=Fr&&r!=Mr&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,wr(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ca(t),t.M=!0,wr(11))):(dr(e.j,e.m,n,"[Invalid Chunked Response]"),Qr(e),Hr(e))}function zr(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fr:(n=Number(t.substring(n,r)),isNaN(n)?Mr:(r+=1)+n>t.length?Fr:(t=t.slice(r,r+n),e.C=r+n,t))}function qr(e){e.Y=Date.now()+e.P,Gr(e,e.P)}function Gr(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=_r(zt(e.lb,e),t)}function Kr(e){e.B&&(Lt.clearTimeout(e.B),e.B=null)}function Hr(e){0==e.l.H||e.J||ha(e.l,e)}function Qr(e){Kr(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ir(e.V),fr(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Wr(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||xi(n.i,e)))if(!e.K&&xi(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;fa(n),ta(n)}sa(n),wr(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=_r(zt(n.ib,n),6e3));if(1>=_i(n.i)&&n.oa){try{n.oa()}catch(a){}n.oa=void 0}}else pa(n,11)}else if((e.K||n.g==e)&&fa(n),!Xt(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.V=a[0],a=a[1],2==n.H)if("c"==a[0]){n.K=a[1],n.pa=a[2];var o=a[3];null!=o&&(n.ra=o,n.l.info("VER="+n.ra));var u=a[4];null!=u&&(n.Ga=u,n.l.info("SVER="+n.Ga));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.i;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Ii(f,f.h),f.h=null))}if(r.F){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.Da=h,ni(r.I,r.F,h))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var d=e;if((r=n).wa=ya(r,r.J?r.pa:null,r.Y),d.K){Ei(r.i,d);var p=d,v=r.L;v&&p.setTimeout(v),p.B&&(Kr(p),qr(p)),r.g=d}else ua(r);0<n.j.length&&ra(n)}else"stop"!=a[0]&&"close"!=a[0]||pa(n,7);else 3==n.H&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?pa(n,7):ea(n):"noop"!=a[0]&&n.h&&n.h.Aa(a),n.A=0)}gr()}catch(a){}}function Jr(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Mt(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Mt(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Mt(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Pt=Dr.prototype).setTimeout=function(e){this.P=e},Pt.nb=function(e){e=e.target;var t=this.M;t&&3==Wi(e)?t.l():this.Pa(e)},Pt.Pa=function(e){try{if(e==this.g)e:{var t=Wi(this.g),n=this.g.Ia();this.g.da();if(!(3>t)&&(3!=t||un||this.g&&(this.h.h||this.g.ja()||Ji(this.g)))){this.J||4!=t||7==n||gr(),Kr(this);var r=this.g.da();this.ca=r;t:if(Br(this)){var i=Ji(this.g);e="";var a=i.length,o=4==Wi(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Qr(this),Hr(this);var u="";break t}this.h.i=new Lt.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.ja();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.W,t,r),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Xt(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,wr(12),Qr(this),Hr(this);break e}dr(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wr(this,r)}this.S?(jr(this,t,u),un&&this.i&&3==t&&(lr(this.U,this.V,"tick",this.mb),this.V.start())):(dr(this.j,this.m,u,null),Wr(this,u)),4==t&&Qr(this),this.i&&!this.J&&(4==t?ha(this.l,this):(this.i=!1,qr(this)))}else(function(e){var t={};e=(e.g&&2<=Wi(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(var n=0;n<e.length;n++)if(!Xt(e[n])){var r=Yn(e[n]),i=r[0];if("string"===typeof(r=r[1])){r=r.trim();var a=t[i]||[];t[i]=a,a.push(r)}}!function(e,t){for(var n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==r&&0<u.indexOf("Unknown SID")?(this.o=3,wr(12)):(this.o=0,wr(13)),Qr(this),Hr(this)}}}catch(t){}},Pt.mb=function(){if(this.g){var e=Wi(this.g),t=this.g.ja();this.C<t.length&&(Kr(this),jr(this,e,t),this.i&&4!=e&&qr(this))}},Pt.cancel=function(){this.J=!0,Qr(this)},Pt.lb=function(){this.B=null;var e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(gr(),wr(17)),Qr(this),this.o=2,Hr(this)):Gr(this,this.Y-e)};var Yr=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xr(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Xr){this.h=e.h,$r(this,e.j),this.s=e.s,this.g=e.g,ei(this,e.m),this.l=e.l;var t=e.i,n=new hi;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ti(this,n),this.o=e.o}else e&&(t=String(e).match(Yr))?(this.h=!1,$r(this,t[1]||"",!0),this.s=ii(t[2]||""),this.g=ii(t[3]||"",!0),ei(this,t[4]),this.l=ii(t[5]||"",!0),ti(this,t[6]||"",!0),this.o=ii(t[7]||"")):(this.h=!1,this.i=new hi(null,this.h))}function Zr(e){return new Xr(e)}function $r(e,t,n){e.j=n?ii(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function ei(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function ti(e,t,n){t instanceof hi?(e.i=t,function(e,t){t&&!e.j&&(di(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(pi(this,t),yi(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=ai(t,li)),e.i=new hi(t,e.h))}function ni(e,t,n){e.i.set(t,n)}function ri(e){return ni(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ii(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ai(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,oi),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function oi(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Xr.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ai(t,ui,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(ai(t,ui,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ai(n,"/"==n.charAt(0)?ci:si,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",ai(n,fi)),e.join("")};var ui=/[#\/\?@]/g,si=/[#\?:]/g,ci=/[#\?]/g,li=/[#\?@]/g,fi=/#/g;function hi(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function di(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function pi(e,t){di(e),t=mi(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function vi(e,t){return di(e),t=mi(e,t),e.g.has(t)}function yi(e,t,n){pi(e,t),0<n.length&&(e.i=null,e.g.set(mi(e,t),Qt(n)),e.h+=n.length)}function mi(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Pt=hi.prototype).add=function(e,t){di(this),this.i=null,e=mi(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Pt.forEach=function(e,t){di(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Pt.ta=function(){di(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Pt.Z=function(e){di(this);var t=[];if("string"===typeof e)vi(this,e)&&(t=t.concat(this.g.get(mi(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Pt.set=function(e,t){return di(this),this.i=null,vi(this,e=mi(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Pt.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Pt.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var gi=N((function e(t,n){S(this,e),this.g=t,this.map=n}));function ki(e){this.l=e||wi,Lt.PerformanceNavigationTiming?e=0<(e=Lt.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Lt.g&&Lt.g.Ka&&Lt.g.Ka()&&Lt.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var wi=10;function bi(e){return!!e.h||!!e.g&&e.g.size>=e.j}function _i(e){return e.h?1:e.g?e.g.size:0}function xi(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ii(e,t){e.g?e.g.add(t):e.h=t}function Ei(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Ti(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=b(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.F)}}catch(a){r.e(a)}finally{r.f()}return n}return Qt(e.i)}ki.prototype.cancel=function(){if(this.i=Ti(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=b(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}};var Si,Ai=function(){function e(){S(this,e)}return N(e,[{key:"stringify",value:function(e){return Lt.JSON.stringify(e,void 0)}},{key:"parse",value:function(e){return Lt.JSON.parse(e,void 0)}}]),e}();function Ci(){this.g=new Ai}function Ni(e,t,n){var r=n||"";try{Jr(e,(function(e,n){var i=e;Ft(e)&&(i=Gn(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Pi(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Ri(e){this.l=e.ec||null,this.j=e.ob||!1}function Di(e,t){jn.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Oi,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Gt(Ri,Er),Ri.prototype.g=function(){return new Di(this.l,this.j)},Ri.prototype.i=(Si={},function(){return Si}),Gt(Di,jn);var Oi=0;function Li(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Mi(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Fi(e)}function Fi(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Pt=Di.prototype).open=function(e,t){if(this.readyState!=Oi)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Fi(this)},Pt.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Lt).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Pt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Mi(this)),this.readyState=Oi},Pt.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Fi(this)),this.g&&(this.readyState=3,Fi(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Lt.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Li(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Pt.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Mi(this):Fi(this),3==this.readyState&&Li(this)}},Pt.Za=function(e){this.g&&(this.response=this.responseText=e,Mi(this))},Pt.Ya=function(e){this.g&&(this.response=e,Mi(this))},Pt.ka=function(){this.g&&Mi(this)},Pt.setRequestHeader=function(e,t){this.v.append(e,t)},Pt.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Pt.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ui=Lt.JSON.parse;function Vi(e){jn.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Bi,this.L=this.M=!1}Gt(Vi,jn);var Bi="",ji=/^https?$/i,zi=["POST","PUT"];function qi(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Gi(e),Hi(e)}function Gi(e){e.F||(e.F=!0,zn(e,"complete"),zn(e,"error"))}function Ki(e){if(e.h&&"undefined"!=typeof Ot&&(!e.C[1]||4!=Wi(e)||2!=e.da()))if(e.v&&4==Wi(e))ar(e.La,0,e);else if(zn(e,"readystatechange"),4==Wi(e)){e.h=!1;try{var t,n=e.da();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.I).match(Yr)[1]||null;!a&&Lt.self&&Lt.self.location&&(a=Lt.self.location.protocol.slice(0,-1)),i=!ji.test(a?a.toLowerCase():"")}t=i}if(t)zn(e,"complete"),zn(e,"success");else{e.m=6;try{var o=2<Wi(e)?e.g.statusText:""}catch(u){o=""}e.j=o+" ["+e.da()+"]",Gi(e)}}finally{Hi(e)}}}function Hi(e,t){if(e.g){Qi(e);var n=e.g,r=e.C[0]?function(){}:null;e.g=null,e.C=null,t||zn(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Qi(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Lt.clearTimeout(e.A),e.A=null)}function Wi(e){return e.g?e.g.readyState:0}function Ji(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Bi:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(no){return null}}function Yi(e){var t="";return _n(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Xi(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Yi(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ni(e,t,n))}function Zi(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function $i(e){this.Ga=0,this.j=[],this.l=new hr,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Zi("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Zi("baseRetryDelayMs",5e3,e),this.hb=Zi("retryDelaySeedMs",1e4,e),this.eb=Zi("forwardChannelMaxRetries",2,e),this.xa=Zi("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ki(e&&e.concurrentRequestLimit),this.Ja=new Ci,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function ea(e){if(na(e),3==e.H){var t=e.W++,n=Zr(e.I);if(ni(n,"SID",e.K),ni(n,"RID",t),ni(n,"TYPE","terminate"),aa(e,n),(t=new Dr(e,e.l,t)).L=2,t.v=ri(Zr(n)),n=!1,Lt.navigator&&Lt.navigator.sendBeacon)try{n=Lt.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Lt.Image&&((new Image).src=t.v,n=!0),n||(t.g=ma(t.l,null),t.g.ha(t.v)),t.G=Date.now(),qr(t)}va(e)}function ta(e){e.g&&(ca(e),e.g.cancel(),e.g=null)}function na(e){ta(e),e.u&&(Lt.clearTimeout(e.u),e.u=null),fa(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Lt.clearTimeout(e.m),e.m=null)}function ra(e){if(!bi(e.i)&&!e.m){e.m=!0;var t=e.Na;Zn||tr(),$n||(Zn(),$n=!0),er.add(t,e),e.C=0}}function ia(e,t){var n;n=t?t.m:e.W++;var r=Zr(e.I);ni(r,"SID",e.K),ni(r,"RID",n),ni(r,"AID",e.V),aa(e,r),e.o&&e.s&&Xi(r,e.o,e.s),n=new Dr(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=oa(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Ii(e.i,n),Ur(n,r,t)}function aa(e,t){e.na&&_n(e.na,(function(e,n){ni(t,n,e)})),e.h&&Jr({},(function(e,n){ni(t,n,e)}))}function oa(e,t,n){n=Math.min(e.j.length,n);var r=e.h?zt(e.h.Va,e.h,e):null;e:for(var i=e.j,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].g,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].g,l=i[s].map;if(0>(c-=a))a=Math.max(0,i[s].g-100),u=!1;else try{Ni(l,o,"req"+c+"_")}catch(bu){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.j.splice(0,n),t.F=e,r}function ua(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Zn||tr(),$n||(Zn(),$n=!0),er.add(t,e),e.A=0}}function sa(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=_r(zt(e.Ma,e),da(e,e.A)),e.A++,!0)}function ca(e){null!=e.B&&(Lt.clearTimeout(e.B),e.B=null)}function la(e){e.g=new Dr(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Zr(e.wa);ni(t,"RID","rpc"),ni(t,"SID",e.K),ni(t,"AID",e.V),ni(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&ni(t,"TO",e.qa),ni(t,"TYPE","xmlhttp"),aa(e,t),e.o&&e.s&&Xi(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=ri(Zr(t)),n.s=null,n.S=!0,Vr(n,e)}function fa(e){null!=e.v&&(Lt.clearTimeout(e.v),e.v=null)}function ha(e,t){var n=null;if(e.g==t){fa(e),ca(e),e.g=null;var r=2}else{if(!xi(e.i,t))return;n=t.F,Ei(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;zn(r=yr(),new br(r,n)),ra(e)}else ua(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(_i(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=_r(zt(e.Na,e,t),da(e,e.C)),e.C++,!0))}(e,t)||2==r&&sa(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:pa(e,5);break;case 4:pa(e,10);break;case 3:pa(e,6);break;default:pa(e,2)}}function da(e,t){var n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function pa(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=zt(e.pb,e);n||(n=new Xr("//www.google.com/images/cleardot.gif"),Lt.location&&"http"==Lt.location.protocol||$r(n,"https"),ri(n)),function(e,t){var n=new hr;if(Lt.Image){var r=new Image;r.onload=qt(Pi,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qt(Pi,n,r,"TestLoadImage: error",!1,t),r.onabort=qt(Pi,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qt(Pi,n,r,"TestLoadImage: timeout",!1,t),Lt.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else wr(2);e.H=0,e.h&&e.h.za(t),va(e),na(e)}function va(e){if(e.H=0,e.ma=[],e.h){var t=Ti(e.i);0==t.length&&0==e.j.length||(Wt(e.ma,t),Wt(e.ma,e.j),e.i.i.length=0,Qt(e.j),e.j.length=0),e.h.ya()}}function ya(e,t,n){var r=n instanceof Xr?Zr(n):new Xr(n);if(""!=r.g)t&&(r.g=t+"."+r.g),ei(r,r.m);else{var i=Lt.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Xr(null);r&&$r(a,r),t&&(a.g=t),i&&ei(a,i),n&&(a.l=n),r=a}return n=e.F,t=e.Da,n&&t&&ni(r,n,t),ni(r,"VER",e.ra),aa(e,r),r}function ma(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Vi(new Ri({ob:!0})):new Vi(e.va)).Oa(e.J),t}function ga(){}function ka(){if(an&&!(10<=Number(vn)))throw Error("Environmental error: no available transport.")}function wa(e,t){jn.call(this),this.g=new $i(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Xt(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Xt(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new xa(this)}function ba(e){Nr.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function _a(){Pr.call(this),this.status=1}function xa(e){this.g=e}function Ia(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ea(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var a=e.g[3],o=t+(a^n&(i^a))+r[0]+3614090360&4294967295;o=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=(n=(i=(a=(t=n+(o<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(a^n&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=a+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^a&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(a^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^a&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^a&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=a+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(a^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(a^t&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=a+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(a^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^a^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~a))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~a))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(a|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(a^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((a=(t=n+((o=t+(i^(n|~a))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=a+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=a+((o=i+(t^(a|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+a&4294967295}function Ta(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var a=0|e[i];r&&a==t||(n[i]=a,r=!1)}this.g=n}(Pt=Vi.prototype).Oa=function(e){this.M=e},Pt.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ar.g(),this.C=this.u?Tr(this.u):Tr(Ar),this.g.onreadystatechange=zt(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(u){return void qi(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=b(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(p){o.e(p)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Lt.FormData&&e instanceof Lt.FormData,!(0<=Ht(zi,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var s,c=b(n);try{for(c.s();!(s=c.n()).done;){var l=h(s.value,2),f=l[0],d=l[1];this.g.setRequestHeader(f,d)}}catch(p){c.e(p)}finally{c.f()}this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Qi(this),0<this.B&&((this.L=function(e){return an&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=zt(this.ua,this)):this.A=ar(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){qi(this,u)}},Pt.ua=function(){"undefined"!=typeof Ot&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,zn(this,"timeout"),this.abort(8))},Pt.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,zn(this,"complete"),zn(this,"abort"),Hi(this))},Pt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hi(this,!0)),Vi.$.N.call(this)},Pt.La=function(){this.s||(this.G||this.v||this.l?Ki(this):this.kb())},Pt.kb=function(){Ki(this)},Pt.isActive=function(){return!!this.g},Pt.da=function(){try{return 2<Wi(this)?this.g.status:-1}catch(Si){return-1}},Pt.ja=function(){try{return this.g?this.g.responseText:""}catch(Si){return""}},Pt.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ui(t)}},Pt.Ia=function(){return this.m},Pt.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Pt=$i.prototype).ra=8,Pt.H=1,Pt.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;var t=new Dr(this,this.l,e),n=this.s;if(this.U&&(n?En(n=xn(n),this.U):n=this.U),null!==this.o||this.O||(t.I=n,n=null),this.P)e:{for(var r=0,i=0;i<this.j.length;i++){var a=this.j[i];if(void 0===(a="__data__"in a.map&&"string"===typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.j.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=oa(this,t,r),ni(i=Zr(this.I),"RID",e),ni(i,"CVER",22),this.F&&ni(i,"X-HTTP-Session-Id",this.F),aa(this,i),n&&(this.O?r="headers="+encodeURIComponent(String(Yi(n)))+"&"+r:this.o&&Xi(i,this.o,n)),Ii(this.i,t),this.bb&&ni(i,"TYPE","init"),this.P?(ni(i,"$req",r),ni(i,"SID","null"),t.aa=!0,Ur(t,i,null)):Ur(t,i,r),this.H=2}}else 3==this.H&&(e?ia(this,e):0==this.j.length||bi(this.i)||ia(this))},Pt.Ma=function(){if(this.u=null,la(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=_r(zt(this.jb,this),e)}},Pt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,wr(10),ta(this),la(this))},Pt.ib=function(){null!=this.v&&(this.v=null,ta(this),sa(this),wr(19))},Pt.pb=function(e){e?(this.l.info("Successfully pinged google.com"),wr(2)):(this.l.info("Failed to ping google.com"),wr(1))},Pt.isActive=function(){return!!this.h&&this.h.isActive(this)},(Pt=ga.prototype).Ba=function(){},Pt.Aa=function(){},Pt.za=function(){},Pt.ya=function(){},Pt.isActive=function(){return!0},Pt.Va=function(){},ka.prototype.g=function(e,t){return new wa(e,t)},Gt(wa,jn),wa.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;wr(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=ya(e,null,e.Y),ra(e)},wa.prototype.close=function(){ea(this.g)},wa.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Gn(e),e=n);t.j.push(new gi(t.fb++,e)),3==t.H&&ra(t)},wa.prototype.N=function(){this.g.h=null,delete this.j,ea(this.g),delete this.g,wa.$.N.call(this)},Gt(ba,Nr),Gt(_a,Pr),Gt(xa,ga),xa.prototype.Ba=function(){zn(this.g,"a")},xa.prototype.Aa=function(e){zn(this.g,new ba(e))},xa.prototype.za=function(e){zn(this.g,new _a)},xa.prototype.ya=function(){zn(this.g,"b")},Gt(Ia,(function(){this.blockSize=-1})),Ia.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ia.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,a=0;a<t;){if(0==i)for(;a<=n;)Ea(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[i++]=e.charCodeAt(a++),i==this.blockSize){Ea(this,r),i=0;break}}else for(;a<t;)if(r[i++]=e[a++],i==this.blockSize){Ea(this,r),i=0;break}}this.h=i,this.i+=t},Ia.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var Sa={};function Aa(e){return-128<=e&&128>e?function(e,t){var n=Sa;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Ta([0|e],0>e?-1:0)})):new Ta([0|e],0>e?-1:0)}function Ca(e){if(isNaN(e)||!isFinite(e))return Pa;if(0>e)return Ma(Ca(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Na;return new Ta(t,0)}var Na=4294967296,Pa=Aa(0),Ra=Aa(1),Da=Aa(16777216);function Oa(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function La(e){return-1==e.h}function Ma(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Ta(n,~e.h).add(Ra)}function Fa(e,t){return e.add(Ma(t))}function Ua(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Va(e,t){this.g=e,this.h=t}function Ba(e,t){if(Oa(t))throw Error("division by zero");if(Oa(e))return new Va(Pa,Pa);if(La(e))return t=Ba(Ma(e),t),new Va(Ma(t.g),Ma(t.h));if(La(t))return t=Ba(e,Ma(t)),new Va(Ma(t.g),t.h);if(30<e.g.length){if(La(e)||La(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Ra,r=t;0>=r.X(e);)n=ja(n),r=ja(r);var i=za(n,1),a=za(r,1);for(r=za(r,2),n=za(n,2);!Oa(r);){var o=a.add(r);0>=o.X(e)&&(i=i.add(n),a=o),r=za(r,1),n=za(n,1)}return t=Fa(e,i.R(t)),new Va(i,t)}for(i=Pa;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(a=Ca(n)).R(t);La(o)||0<o.X(e);)o=(a=Ca(n-=r)).R(t);Oa(a)&&(a=Ra),i=i.add(a),e=Fa(e,o)}return new Va(i,e)}function ja(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Ta(n,e.h)}function za(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.D(a+n)>>>t|e.D(a+n+1)<<32-t:e.D(a+n);return new Ta(i,e.h)}(Pt=Ta.prototype).ea=function(){if(La(this))return-Ma(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Na+r)*t,t*=Na}return e},Pt.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Oa(this))return"0";if(La(this))return"-"+Ma(this).toString(e);for(var t=Ca(Math.pow(e,6)),n=this,r="";;){var i=Ba(n,t).g,a=((0<(n=Fa(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Oa(n=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Pt.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Pt.X=function(e){return La(e=Fa(this,e))?-1:Oa(e)?0:1},Pt.abs=function(){return La(this)?Ma(this):this},Pt.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.D(i))+(65535&e.D(i)),o=(a>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new Ta(n,-2147483648&n[n.length-1]?-1:0)},Pt.R=function(e){if(Oa(this)||Oa(e))return Pa;if(La(this))return La(e)?Ma(this).R(Ma(e)):Ma(Ma(this).R(e));if(La(e))return Ma(this.R(Ma(e)));if(0>this.X(Da)&&0>e.X(Da))return Ca(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.D(r)>>>16,o=65535&this.D(r),u=e.D(i)>>>16,s=65535&e.D(i);n[2*r+2*i]+=o*s,Ua(n,2*r+2*i),n[2*r+2*i+1]+=a*s,Ua(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,Ua(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,Ua(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Ta(n,0)},Pt.gb=function(e){return Ba(this,e).h},Pt.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Ta(n,this.h&e.h)},Pt.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Ta(n,this.h|e.h)},Pt.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Ta(n,this.h^e.h)},ka.prototype.createWebChannel=ka.prototype.g,wa.prototype.send=wa.prototype.u,wa.prototype.open=wa.prototype.m,wa.prototype.close=wa.prototype.close,xr.NO_ERROR=0,xr.TIMEOUT=8,xr.HTTP_ERROR=6,Ir.COMPLETE="complete",Sr.EventType=Cr,Cr.OPEN="a",Cr.CLOSE="b",Cr.ERROR="c",Cr.MESSAGE="d",jn.prototype.listen=jn.prototype.O,Vi.prototype.listenOnce=Vi.prototype.P,Vi.prototype.getLastError=Vi.prototype.Sa,Vi.prototype.getLastErrorCode=Vi.prototype.Ia,Vi.prototype.getStatus=Vi.prototype.da,Vi.prototype.getResponseJson=Vi.prototype.Wa,Vi.prototype.getResponseText=Vi.prototype.ja,Vi.prototype.send=Vi.prototype.ha,Vi.prototype.setWithCredentials=Vi.prototype.Oa,Ia.prototype.digest=Ia.prototype.l,Ia.prototype.reset=Ia.prototype.reset,Ia.prototype.update=Ia.prototype.j,Ta.prototype.add=Ta.prototype.add,Ta.prototype.multiply=Ta.prototype.R,Ta.prototype.modulo=Ta.prototype.gb,Ta.prototype.compare=Ta.prototype.X,Ta.prototype.toNumber=Ta.prototype.ea,Ta.prototype.toString=Ta.prototype.toString,Ta.prototype.getBits=Ta.prototype.D,Ta.fromNumber=Ca,Ta.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Ma(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Ca(Math.pow(n,8)),i=Pa,a=0;a<t.length;a+=8){var o=Math.min(8,t.length-a),u=parseInt(t.substring(a,a+o),n);8>o?(o=Ca(Math.pow(n,o)),i=i.R(o).add(Ca(u))):i=(i=i.R(r)).add(Ca(u))}return i};var qa=Dt.createWebChannelTransport=function(){return new ka},Ga=Dt.getStatEventTarget=function(){return yr()},Ka=Dt.ErrorCode=xr,Ha=Dt.EventType=Ir,Qa=Dt.Event=pr,Wa=Dt.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ja=(Dt.FetchXmlHttpFactory=Ri,Dt.WebChannel=Sr),Ya=Dt.XhrIo=Vi,Xa=Dt.Md5=Ia,Za=Dt.Integer=Ta,$a="@firebase/firestore",eo=function(){function e(t){S(this,e),this.uid=t}return N(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();eo.UNAUTHENTICATED=new eo(null),eo.GOOGLE_CREDENTIALS=new eo("google-credentials-uid"),eo.FIRST_PARTY=new eo("first-party-uid"),eo.MOCK_USER=new eo("mock-user");var to="10.4.0",no=new be("@firebase/firestore");function ro(){return no.logLevel}function io(e){if(no.logLevel<=pe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(uo);no.debug.apply(no,["Firestore (".concat(to,"): ").concat(e)].concat(T(i)))}}function ao(e){if(no.logLevel<=pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(uo);no.error.apply(no,["Firestore (".concat(to,"): ").concat(e)].concat(T(i)))}}function oo(e){if(no.logLevel<=pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(uo);no.warn.apply(no,["Firestore (".concat(to,"): ").concat(e)].concat(T(i)))}}function uo(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function so(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(to,") INTERNAL ASSERTION FAILED: ")+e;throw ao(t),new Error(t)}function co(e,t){e||so()}function lo(e,t){return e}var fo={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ho=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return N(n)}(Y),po=N((function e(){var t=this;S(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),vo=N((function e(t,n){S(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),yo=function(){function e(){S(this,e)}return N(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(eo.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),mo=function(){function e(t){S(this,e),this.token=t,this.changeListener=null}return N(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),go=function(){function e(t){S(this,e),this.t=t,this.currentUser=eo.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return N(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},o=new po;this.o=function(){n.i++,n.currentUser=n.u(),o.resolve(),o=new po,e.enqueueRetryable((function(){return i(n.currentUser)}))};var s=function(){var t=o;e.enqueueRetryable(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},c=function(e){io("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),s()};this.t.onInit((function(e){return c(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?c(e):(io("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new po)}}),0),s()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(io("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(co("string"==typeof n.accessToken),new vo(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return co(null===e||"string"==typeof e),new eo(e)}}]),e}(),ko=function(){function e(t,n,r){S(this,e),this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=eo.FIRST_PARTY,this.I=new Map}return N(e,[{key:"T",value:function(){return this.P?this.P():null}},{key:"headers",get:function(){this.I.set("X-Goog-AuthUser",this.l);var e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}]),e}(),wo=function(){function e(t,n,r){S(this,e),this.l=t,this.h=n,this.P=r}return N(e,[{key:"getToken",value:function(){return Promise.resolve(new ko(this.l,this.h,this.P))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(eo.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),bo=N((function e(t){S(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),_o=function(){function e(t){S(this,e),this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}return N(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&io("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.R;return n.R=e.token,io("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){io("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.A.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.A.getImmediate({optional:!0});e?i(e):io("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(co("string"==typeof t.token),e.R=t.token,new bo(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function xo(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var Io=function(){function e(){S(this,e)}return N(e,null,[{key:"V",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=xo(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Eo(e,t){return e<t?-1:e>t?1:0}function To(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function So(e){return e+"\0"}var Ao=function(){function e(t,n){if(S(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new ho(fo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ho(fo.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new ho(fo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ho(fo.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return N(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Eo(this.nanoseconds,e.nanoseconds):Eo(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),Co=function(){function e(t){S(this,e),this.timestamp=t}return N(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new Ao(0,0))}},{key:"max",value:function(){return new e(new Ao(253402300799,999999999))}}]),e}(),No=function(){function e(t,n,r){S(this,e),void 0===n?n=0:n>t.length&&so(),void 0===r?r=t.length-n:r>t.length-n&&so(),this.segments=t,this.offset=n,this.len=r}return N(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),Po=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new ho(fo.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,T(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(No),Ro=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Do=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return Ro.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new ho(fo.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new ho(fo.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new ho(fo.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new ho(fo.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(No),Oo=function(){function e(t){S(this,e),this.path=t}return N(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===Po.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(Po.fromString(t))}},{key:"fromName",value:function(t){return new e(Po.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(Po.emptyPath())}},{key:"comparator",value:function(e,t){return Po.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new Po(t.slice()))}}]),e}(),Lo=N((function e(t,n,r,i){S(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function Mo(e){return e.fields.find((function(e){return 2===e.kind}))}function Fo(e){return e.fields.filter((function(e){return 2!==e.kind}))}Lo.UNKNOWN_ID=-1;var Uo=N((function e(t,n){S(this,e),this.fieldPath=t,this.kind=n}));var Vo=function(){function e(t,n){S(this,e),this.sequenceNumber=t,this.offset=n}return N(e,null,[{key:"empty",value:function(){return new e(0,zo.min())}}]),e}();function Bo(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=Co.fromTimestamp(1e9===r?new Ao(n+1,0):new Ao(n,r));return new zo(i,Oo.empty(),t)}function jo(e){return new zo(e.readTime,e.key,-1)}var zo=function(){function e(t,n,r){S(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return N(e,null,[{key:"min",value:function(){return new e(Co.min(),Oo.empty(),-1)}},{key:"max",value:function(){return new e(Co.max(),Oo.empty(),-1)}}]),e}();function qo(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=Oo.comparator(e.documentKey,t.documentKey))?n:Eo(e.largestBatchId,t.largestBatchId)}var Go="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ko=function(){function e(){S(this,e),this.onCommittedListeners=[]}return N(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function Ho(e){return Qo.apply(this,arguments)}function Qo(){return(Qo=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===fo.FAILED_PRECONDITION&&t.message===Go){e.next=2;break}throw t;case 2:io("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Wo=function(){function e(t){var n=this;S(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return N(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&so(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=b(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Jo=function(){function e(t,n){var r=this;S(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.m=new po,this.transaction.oncomplete=function(){r.m.resolve()},this.transaction.onabort=function(){n.error?r.m.reject(new Zo(t,n.error)):r.m.resolve()},this.transaction.onerror=function(e){var n=ru(e.target.error);r.m.reject(new Zo(t,n))}}return N(e,[{key:"g",get:function(){return this.m.promise}},{key:"abort",value:function(e){e&&this.m.reject(e),this.aborted||(io("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"p",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new eu(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Zo(n,t)}}}]),e}(),Yo=function(){function e(t,n,r){S(this,e),this.name=t,this.version=n,this.S=r,12.2===e.D(G())&&ao("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return N(e,[{key:"N",value:function(){var e=u(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return io("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Zo(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new ho(fo.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new ho(fo.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Zo(t,n))},i.onupgradeneeded=function(e){io("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.S.B(t,i.transaction,e.oldVersion,n.version).next((function(){io("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.L&&(this.db.onversionchange=function(e){return n.L(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"k",value:function(e){this.L=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=u(a().mark((function e(t,n,r,i){var o,u,s,c,l=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o="readonly"===n,u=0,s=a().mark((function e(){var n,s,c,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++u,e.prev=1,e.next=4,l.N(t);case 4:return l.db=e.sent,n=Jo.open(l.db,t,o?"readonly":"readwrite",r),s=i(n).next((function(e){return n.p(),e})).catch((function(e){return n.abort(e),Wo.reject(e)})).toPromise(),s.catch((function(){})),e.next=9,n.g;case 9:return e.t0=s,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),c=e.t1,f="FirebaseError"!==c.name&&u<3,io("SimpleDb","Transaction failed with error:",c.message,"Retrying:",f),l.close(),f){e.next=18;break}return e.abrupt("return",{v:Promise.reject(c)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(s(),"t0",4);case 4:if(!(c=e.t0)){e.next=7;break}return e.abrupt("return",c.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return io("SimpleDb","Removing database:",e),tu(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"C",value:function(){if(!J())return!1;if(e.v())return!0;var t=G(),n=e.D(t),r=0<n&&n<10,i=e.F(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"v",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/chatGroup",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.M)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"D",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"F",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Xo=function(){function e(t){S(this,e),this.q=t,this.K=!1,this.$=null}return N(e,[{key:"isDone",get:function(){return this.K}},{key:"U",get:function(){return this.$}},{key:"cursor",set:function(e){this.q=e}},{key:"done",value:function(){this.K=!0}},{key:"W",value:function(e){this.$=e}},{key:"delete",value:function(){return tu(this.q.delete())}}]),e}(),Zo=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this,fo.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return N(n)}(ho);function $o(e){return"IndexedDbTransactionError"===e.name}var eu=function(){function e(t){S(this,e),this.store=t}return N(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(io("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(io("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),tu(n)}},{key:"add",value:function(e){return io("SimpleDb","ADD",this.store.name,e,e),tu(this.store.add(e))}},{key:"get",value:function(e){var t=this;return tu(this.store.get(e)).next((function(n){return void 0===n&&(n=null),io("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return io("SimpleDb","DELETE",this.store.name,e),tu(this.store.delete(e))}},{key:"count",value:function(){return io("SimpleDb","COUNT",this.store.name),tu(this.store.count())}},{key:"G",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.j(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Wo((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Wo((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){io("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.j(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.j(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Wo((function(n,r){t.onerror=function(e){var t=ru(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"j",value:function(e,t){var n=[];return new Wo((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Xo(i),o=t(i.primaryKey,i.value,a);if(o instanceof Wo){var u=o.catch((function(e){return a.done(),Wo.reject(e)}));n.push(u)}a.isDone?r():null===a.U?i.continue():i.continue(a.U)}else r()}})).next((function(){return Wo.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function tu(e){return new Wo((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=ru(e.target.error);n(t)}}))}var nu=!1;function ru(e){var t=Yo.D(G());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new ho("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return nu||(nu=!0,setTimeout((function(){throw r}),0)),r}}return e}var iu=function(){function e(t,n){S(this,e),this.asyncQueue=t,this.ee=n,this.task=null}return N(e,[{key:"start",value:function(){this.te(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"te",value:function(e){var t=this;io("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=io,e.t1="Documents written: ",e.next=6,t.ee.ne();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!$o(e.t4)){e.next=17;break}io("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,Ho(e.t4);case 19:return e.next=21,t.te(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),au=function(){function e(t,n){S(this,e),this.localStore=t,this.persistence=n}return N(e,[{key:"ne",value:function(){var e=u(a().mark((function e(){var t,n=this,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.re(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"re",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Wo.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return io("IndexBackiller","Processing collection: ".concat(t)),n.ie(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"ie",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.se(i,n)})).next((function(n){return io("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"se",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=jo(t);qo(r,n)>0&&(n=r)})),new zo(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),ou=function(){function e(t,n){var r=this;S(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.oe(e)},this._e=function(e){return n.writeSequenceNumber(e)})}return N(e,[{key:"oe",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this._e&&this._e(e),e}}]),e}();function uu(e){return null==e}function su(e){return 0===e&&1/e==-1/0}function cu(e){return"number"==typeof e&&Number.isInteger(e)&&!su(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function lu(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=hu(t)),t=fu(e.get(n),t);return hu(t)}function fu(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function hu(e){return e+"\x01\x01"}function du(e){var t=e.length;if(co(t>=2),2===t)return co("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Po.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&so(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:so()}a=o+2}return new Po(r)}ou.ae=-1;var pu=["userId","batchId"];function vu(e,t){return[e,lu(t)]}function yu(e,t,n){return[e,lu(t),n]}var mu={},gu=["prefixPath","collectionGroup","readTime","documentId"],ku=["prefixPath","collectionGroup","documentId"],wu=["collectionGroup","readTime","prefixPath","documentId"],bu=["canonicalId","targetId"],_u=["targetId","path"],xu=["path","targetId"],Iu=["collectionId","parent"],Eu=["indexId","uid"],Tu=["uid","sequenceNumber"],Su=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Au=["indexId","uid","orderedDocumentKey"],Cu=["userId","collectionPath","documentId"],Nu=["userId","collectionPath","largestBatchId"],Pu=["userId","collectionGroup","largestBatchId"],Ru=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),Du=[].concat(T(Ru),["documentOverlays"]),Ou=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Lu=Ou,Mu=[].concat(Lu,["indexConfiguration","indexState","indexEntries"]),Fu=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).ue=e,i.currentSequenceNumber=r,i}return N(n)}(Ko);function Uu(e,t){var n=lo(e);return Yo.O(n.ue,t)}function Vu(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Bu(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ju(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var zu=function(){function e(t,n){S(this,e),this.comparator=t,this.root=n||Gu.EMPTY}return N(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Gu.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gu.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new qu(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new qu(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new qu(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new qu(this.root,e,this.comparator,!0)}}]),e}(),qu=function(){function e(t,n,r,i){S(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return N(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),Gu=function(){function e(t,n,r,i,a){S(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return N(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw so();if(this.right.isRed())throw so();var e=this.left.check();if(e!==this.right.check())throw so();return e+(this.isRed()?0:1)}}]),e}();Gu.EMPTY=null,Gu.RED=!0,Gu.BLACK=!1,Gu.EMPTY=new(function(){function e(){S(this,e),this.size=0}return N(e,[{key:"key",get:function(){throw so()}},{key:"value",get:function(){throw so()}},{key:"color",get:function(){throw so()}},{key:"left",get:function(){throw so()}},{key:"right",get:function(){throw so()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new Gu(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var Ku=function(){function e(t){S(this,e),this.comparator=t,this.data=new zu(this.comparator)}return N(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new Hu(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new Hu(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),Hu=function(){function e(t){S(this,e),this.iter=t}return N(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function Qu(e){return e.hasNext()?e.getNext():void 0}var Wu=function(){function e(t){S(this,e),this.fields=t,t.sort(Do.comparator)}return N(e,[{key:"unionWith",value:function(t){var n,r=new Ku(Do.comparator),i=b(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=b(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=b(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return To(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Ju=function(e){_(n,e);var t=I(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return N(n)}(w(Error));var Yu=function(e){function t(e){S(this,t),this.binaryString=e}return N(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Eo(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Ju("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Yu.EMPTY_BYTE_STRING=new Yu("");var Xu=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zu(e){if(co(!!e),"string"==typeof e){var t=0,n=Xu.exec(e);if(co(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:$u(e.seconds),nanos:$u(e.nanos)}}function $u(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function es(e){return"string"==typeof e?Yu.fromBase64String(e):Yu.fromUint8Array(e)}function ts(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ns(e){var t=e.mapValue.fields.__previous_value__;return ts(t)?ns(t):t}function rs(e){var t=Zu(e.mapValue.fields.__local_write_time__.timestampValue);return new Ao(t.seconds,t.nanos)}var is=N((function e(t,n,r,i,a,o,u,s,c){S(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=s,this.useFetchStreams=c})),as=function(){function e(t,n){S(this,e),this.projectId=t,this.database=n||"(default)"}return N(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),os={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},us={nullValue:"NULL_VALUE"};function ss(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?ts(e)?4:_s(e)?9007199254740991:10:so()}function cs(e,t){if(e===t)return!0;var n=ss(e);if(n!==ss(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return rs(e).isEqual(rs(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Zu(e.timestampValue),r=Zu(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return es(e.bytesValue).isEqual(es(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return $u(e.geoPointValue.latitude)===$u(t.geoPointValue.latitude)&&$u(e.geoPointValue.longitude)===$u(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return $u(e.integerValue)===$u(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=$u(e.doubleValue),r=$u(t.doubleValue);return n===r?su(n)===su(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return To(e.arrayValue.values||[],t.arrayValue.values||[],cs);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Vu(n)!==Vu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!cs(n[i],r[i])))return!1;return!0}(e,t);default:return so()}}function ls(e,t){return void 0!==(e.values||[]).find((function(e){return cs(e,t)}))}function fs(e,t){if(e===t)return 0;var n=ss(e),r=ss(t);if(n!==r)return Eo(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Eo(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=$u(e.integerValue||e.doubleValue),r=$u(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return hs(e.timestampValue,t.timestampValue);case 4:return hs(rs(e),rs(t));case 5:return Eo(e.stringValue,t.stringValue);case 6:return function(e,t){var n=es(e),r=es(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Eo(n[i],r[i]);if(0!==a)return a}return Eo(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Eo($u(e.latitude),$u(t.latitude));return 0!==n?n:Eo($u(e.longitude),$u(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=fs(n[i],r[i]);if(a)return a}return Eo(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===os.mapValue&&t===os.mapValue)return 0;if(e===os.mapValue)return 1;if(t===os.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Eo(r[o],a[o]);if(0!==u)return u;var s=fs(n[r[o]],i[a[o]]);if(0!==s)return s}return Eo(r.length,a.length)}(e.mapValue,t.mapValue);default:throw so()}}function hs(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Eo(e,t);var n=Zu(e),r=Zu(t),i=Eo(n.seconds,r.seconds);return 0!==i?i:Eo(n.nanos,r.nanos)}function ds(e){return ps(e)}function ps(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Zu(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return es(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Oo.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){var t,n="[",r=!0,i=b(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=ps(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=b(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(ps(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):so()}function vs(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function ys(e){return!!e&&"integerValue"in e}function ms(e){return!!e&&"arrayValue"in e}function gs(e){return!!e&&"nullValue"in e}function ks(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ws(e){return!!e&&"mapValue"in e}function bs(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return Bu(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=bs(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=bs(e.arrayValue.values[r]);return n}return Object.assign({},e)}function _s(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function xs(e){return"nullValue"in e?us:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?vs(as.empty(),Oo.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:so()}function Is(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?vs(as.empty(),Oo.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?os:so()}function Es(e,t){var n=fs(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Ts(e,t){var n=fs(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Ss=function(){function e(t){S(this,e),this.value=t}return N(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!ws(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=bs(t)}},{key:"setAll",value:function(e){var t=this,n=Do.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=bs(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());ws(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return cs(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];ws(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){Bu(t,(function(t,n){return e[t]=n}));var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(bs(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function As(e){var t=[];return Bu(e.fields,(function(e,n){var r=new Do([e]);if(ws(n)){var i=As(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=b(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Wu(t)}var Cs=function(){function e(t,n,r,i,a,o,u){S(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return N(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(Co.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Ss.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Ss.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=Co.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,Co.min(),Co.min(),Co.min(),Ss.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,Co.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,Co.min(),Co.min(),Ss.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,Co.min(),Co.min(),Ss.empty(),2)}}]),e}(),Ns=N((function e(t,n){S(this,e),this.position=t,this.inclusive=n}));function Ps(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?Oo.comparator(Oo.fromName(o.referenceValue),n.key):fs(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Rs(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!cs(e.position[n],t.position[n]))return!1;return!0}var Ds=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";S(this,e),this.field=t,this.dir=n}));function Os(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var Ls=N((function e(){S(this,e)})),Ms=function(e){_(n,e);var t=I(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(fs(t,this.value)):null!==t&&ss(this.value)===ss(t)&&this.matchesComparison(fs(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return so()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Hs(e,t,r):"array-contains"===t?new Ys(e,r):"in"===t?new Xs(e,r):"not-in"===t?new Zs(e,r):"array-contains-any"===t?new $s(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new Qs(e,n):new Ws(e,n)}}]),n}(Ls),Fs=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).filters=e,i.op=r,i.ce=null,i}return N(n,[{key:"matches",value:function(e){return Us(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ce||(this.ce=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ce}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.le((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"le",value:function(e){var t,n=b(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(Ls);function Us(e){return"and"===e.op}function Vs(e){return"or"===e.op}function Bs(e){return js(e)&&Us(e)}function js(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof Fs)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function zs(e){if(e instanceof Ms)return e.field.canonicalString()+e.op.toString()+ds(e.value);if(Bs(e))return e.filters.map((function(e){return zs(e)})).join(",");var t=e.filters.map((function(e){return zs(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function qs(e,t){return e instanceof Ms?function(e,t){return t instanceof Ms&&e.op===t.op&&e.field.isEqual(t.field)&&cs(e.value,t.value)}(e,t):e instanceof Fs?function(e,t){return t instanceof Fs&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&qs(n,t.filters[r])}),!0)}(e,t):void so()}function Gs(e,t){var n=e.filters.concat(t);return Fs.create(n,e.op)}function Ks(e){return e instanceof Ms?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(ds(e.value))}(e):e instanceof Fs?function(e){return e.op.toString()+" {"+e.getFilters().map(Ks).join(" ,")+"}"}(e):"Filter"}var Hs=function(e){_(n,e);var t=I(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,e,r,i)).key=Oo.fromName(i.referenceValue),a}return N(n,[{key:"matches",value:function(e){var t=Oo.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(Ms),Qs=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,"in",r)).keys=Js("in",r),i}return N(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ms),Ws=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,"not-in",r)).keys=Js("not-in",r),i}return N(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(Ms);function Js(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return Oo.fromName(e.referenceValue)}))}var Ys=function(e){_(n,e);var t=I(n);function n(e,r){return S(this,n),t.call(this,e,"array-contains",r)}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return ms(t)&&ls(t.arrayValue,this.value)}}]),n}(Ms),Xs=function(e){_(n,e);var t=I(n);function n(e,r){return S(this,n),t.call(this,e,"in",r)}return N(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&ls(this.value.arrayValue,t)}}]),n}(Ms),Zs=function(e){_(n,e);var t=I(n);function n(e,r){return S(this,n),t.call(this,e,"not-in",r)}return N(n,[{key:"matches",value:function(e){if(ls(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!ls(this.value.arrayValue,t)}}]),n}(Ms),$s=function(e){_(n,e);var t=I(n);function n(e,r){return S(this,n),t.call(this,e,"array-contains-any",r)}return N(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!ms(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return ls(t.value.arrayValue,e)}))}}]),n}(Ms),ec=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;S(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.he=null}));function tc(e){return new ec(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function nc(e){var t=lo(e);if(null===t.he){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return zs(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),uu(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return ds(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return ds(e)})).join(",")),t.he=n}return t.he}function rc(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!Os(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!qs(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Rs(e.startAt,t.startAt)&&Rs(e.endAt,t.endAt)}function ic(e){return Oo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function ac(e,t){return e.filters.filter((function(e){return e instanceof Ms&&e.field.isEqual(t)}))}function oc(e,t,n){var r,i=us,a=!0,o=b(ac(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=us,c=!0;switch(u.op){case"<":case"<=":s=xs(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=us}Es({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Es({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function uc(e,t,n){var r,i=os,a=!0,o=b(ac(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=os,c=!0;switch(u.op){case">=":case">":s=Is(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=os}Ts({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Ts({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var sc=N((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;S(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.Pe=null,this.Ie=null,this.de=null,this.startAt,this.endAt}));function cc(e,t,n,r,i,a,o,u){return new sc(e,t,n,r,i,a,o,u)}function lc(e){return new sc(e)}function fc(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function hc(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function dc(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function pc(e){return null!==e.collectionGroup}function vc(e){var t=lo(e);if(null===t.Pe){t.Pe=[];var n=dc(t),r=hc(t);if(null!==n&&null===r)n.isKeyField()||t.Pe.push(new Ds(n)),t.Pe.push(new Ds(Do.keyField(),"asc"));else{var i,a=!1,o=b(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.Pe.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.Pe.push(new Ds(Do.keyField(),s))}}}return t.Pe}function yc(e){var t=lo(e);return t.Ie||(t.Ie=mc(t,vc(e))),t.Ie}function mc(e,t){if("F"===e.limitType)return tc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);t=t.map((function(e){var t="desc"===e.dir?"asc":"desc";return new Ds(e.field,t)}));var n=e.endAt?new Ns(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Ns(e.startAt.position,e.startAt.inclusive):null;return tc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}function gc(e,t){t.getFirstInequalityField(),dc(e);var n=e.filters.concat([t]);return new sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function kc(e,t,n){return new sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wc(e,t){return rc(yc(e),yc(t))&&e.limitType===t.limitType}function bc(e){return"".concat(nc(yc(e)),"|lt:").concat(e.limitType)}function _c(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return Ks(e)})).join(", "),"]")),uu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return ds(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return ds(e)})).join(",")),"Target(".concat(t,")")}(yc(e)),"; limitType=").concat(e.limitType,")")}function xc(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Oo.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=b(vc(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=b(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=Ps(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vc(e),t))&&!(e.endAt&&!function(e,t,n){var r=Ps(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vc(e),t))}(e,t)}function Ic(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Ec(e){return function(t,n){var r,i=!1,a=b(vc(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Tc(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Tc(e,t,n){var r=e.field.isKeyField()?Oo.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?fs(r,i):so()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return so()}}var Sc=function(){function e(t,n){S(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return N(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=h(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(s){i.e(s)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){Bu(this.inner,(function(t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=h(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(s){i.e(s)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return ju(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Ac=new zu(Oo.comparator);function Cc(){return Ac}var Nc=new zu(Oo.comparator);function Pc(){for(var e=Nc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function Rc(e){var t=Nc;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function Dc(){return Lc()}function Oc(){return Lc()}function Lc(){return new Sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var Mc=new zu(Oo.comparator),Fc=new Ku(Oo.comparator);function Uc(){for(var e=Fc,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var Vc=new Ku(Eo);function Bc(){return Vc}function jc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:su(t)?"-0":t}}function zc(e){return{integerValue:""+e}}function qc(e,t){return cu(t)?zc(t):jc(e,t)}var Gc=N((function e(){S(this,e),this._=void 0}));function Kc(e,t,n){return e instanceof Wc?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&ts(t)&&(t=ns(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Jc?Yc(e,t):e instanceof Xc?Zc(e,t):function(e,t){var n=Qc(e,t),r=el(n)+el(e.Te);return ys(n)&&ys(e.Te)?zc(r):jc(e.serializer,r)}(e,t)}function Hc(e,t,n){return e instanceof Jc?Yc(e,t):e instanceof Xc?Zc(e,t):n}function Qc(e,t){return e instanceof $c?function(e){return ys(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}var Wc=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n)}(Gc),Jc=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this)).elements=e,r}return N(n)}(Gc);function Yc(e,t){var n,r=tl(t),i=b(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return cs(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Xc=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this)).elements=e,r}return N(n)}(Gc);function Zc(e,t){var n,r=tl(t),i=b(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!cs(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var $c=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).serializer=e,i.Te=r,i}return N(n)}(Gc);function el(e){return $u(e.integerValue||e.doubleValue)}function tl(e){return ms(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var nl=N((function e(t,n){S(this,e),this.field=t,this.transform=n}));var rl=N((function e(t,n){S(this,e),this.version=t,this.transformResults=n})),il=function(){function e(t,n){S(this,e),this.updateTime=t,this.exists=n}return N(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function al(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var ol=N((function e(){S(this,e)}));function ul(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new kl(e.key,il.none()):new hl(e.key,e.data,il.none());var n,r=e.data,i=Ss.empty(),a=new Ku(Do.comparator),o=b(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new dl(e.key,i,new Wu(a.toArray()),il.none())}function sl(e,t,n){e instanceof hl?function(e,t,n){var r=e.value.clone(),i=vl(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof dl?function(e,t,n){if(al(e.precondition,t)){var r=vl(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(pl(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function cl(e,t,n,r){return e instanceof hl?function(e,t,n,r){if(!al(e.precondition,t))return n;var i=e.value.clone(),a=yl(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof dl?function(e,t,n,r){if(!al(e.precondition,t))return n;var i=yl(e.fieldTransforms,r,t),a=t.data;return a.setAll(pl(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return al(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function ll(e,t){var n,r=null,i=b(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=Qc(a.transform,o||null);null!=u&&(null===r&&(r=Ss.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function fl(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&To(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Jc&&t instanceof Jc||e instanceof Xc&&t instanceof Xc?To(e.elements,t.elements,cs):e instanceof $c&&t instanceof $c?cs(e.Te,t.Te):e instanceof Wc&&t instanceof Wc}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var hl=function(e){_(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return S(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return N(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ol),dl=function(e){_(n,e);var t=I(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return S(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return N(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(ol);function pl(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function vl(e,t,n){var r=new Map;co(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,Hc(o,u,n[i]))}return r}function yl(e,t,n){var r,i=new Map,a=b(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,Kc(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var ml,gl,kl=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return N(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ol),wl=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return N(n,[{key:"getFieldMask",value:function(){return null}}]),n}(ol),bl=function(){function e(t,n,r,i){S(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return N(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&sl(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=b(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=cl(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=b(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=cl(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=Oc();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=ul(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(Co.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),Uc())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&To(this.mutations,e.mutations,(function(e,t){return fl(e,t)}))&&To(this.baseMutations,e.baseMutations,(function(e,t){return fl(e,t)}))}}]),e}(),_l=function(){function e(t,n,r,i){S(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return N(e,null,[{key:"from",value:function(t,n,r){co(t.mutations.length===r.length);for(var i=Mc,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),xl=function(){function e(t,n){S(this,e),this.largestBatchId=t,this.mutation=n}return N(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),Il=N((function e(t,n){S(this,e),this.count=t,this.unchangedNames=n}));function El(e){switch(e){default:return so();case fo.CANCELLED:case fo.UNKNOWN:case fo.DEADLINE_EXCEEDED:case fo.RESOURCE_EXHAUSTED:case fo.INTERNAL:case fo.UNAVAILABLE:case fo.UNAUTHENTICATED:return!1;case fo.INVALID_ARGUMENT:case fo.NOT_FOUND:case fo.ALREADY_EXISTS:case fo.PERMISSION_DENIED:case fo.FAILED_PRECONDITION:case fo.ABORTED:case fo.OUT_OF_RANGE:case fo.UNIMPLEMENTED:case fo.DATA_LOSS:return!0}}function Tl(e){if(void 0===e)return ao("GRPC error has no .code"),fo.UNKNOWN;switch(e){case ml.OK:return fo.OK;case ml.CANCELLED:return fo.CANCELLED;case ml.UNKNOWN:return fo.UNKNOWN;case ml.DEADLINE_EXCEEDED:return fo.DEADLINE_EXCEEDED;case ml.RESOURCE_EXHAUSTED:return fo.RESOURCE_EXHAUSTED;case ml.INTERNAL:return fo.INTERNAL;case ml.UNAVAILABLE:return fo.UNAVAILABLE;case ml.UNAUTHENTICATED:return fo.UNAUTHENTICATED;case ml.INVALID_ARGUMENT:return fo.INVALID_ARGUMENT;case ml.NOT_FOUND:return fo.NOT_FOUND;case ml.ALREADY_EXISTS:return fo.ALREADY_EXISTS;case ml.PERMISSION_DENIED:return fo.PERMISSION_DENIED;case ml.FAILED_PRECONDITION:return fo.FAILED_PRECONDITION;case ml.ABORTED:return fo.ABORTED;case ml.OUT_OF_RANGE:return fo.OUT_OF_RANGE;case ml.UNIMPLEMENTED:return fo.UNIMPLEMENTED;case ml.DATA_LOSS:return fo.DATA_LOSS;default:return so()}}(gl=ml||(ml={}))[gl.OK=0]="OK",gl[gl.CANCELLED=1]="CANCELLED",gl[gl.UNKNOWN=2]="UNKNOWN",gl[gl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gl[gl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gl[gl.NOT_FOUND=5]="NOT_FOUND",gl[gl.ALREADY_EXISTS=6]="ALREADY_EXISTS",gl[gl.PERMISSION_DENIED=7]="PERMISSION_DENIED",gl[gl.UNAUTHENTICATED=16]="UNAUTHENTICATED",gl[gl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gl[gl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gl[gl.ABORTED=10]="ABORTED",gl[gl.OUT_OF_RANGE=11]="OUT_OF_RANGE",gl[gl.UNIMPLEMENTED=12]="UNIMPLEMENTED",gl[gl.INTERNAL=13]="INTERNAL",gl[gl.UNAVAILABLE=14]="UNAVAILABLE",gl[gl.DATA_LOSS=15]="DATA_LOSS";var Sl=null;function Al(){return new TextEncoder}var Cl=new Za([4294967295,4294967295],0);function Nl(e){var t=Al().encode(e),n=new Xa;return n.update(t),new Uint8Array(n.digest())}function Pl(e){var t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new Za([n,r],0),new Za([i,a],0)]}var Rl=function(){function e(t,n,r){if(S(this,e),this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Dl("Invalid padding: ".concat(n));if(r<0)throw new Dl("Invalid hash count: ".concat(r));if(t.length>0&&0===this.hashCount)throw new Dl("Invalid hash count: ".concat(r));if(0===t.length&&0!==n)throw new Dl("Invalid padding when bitmap length is 0: ".concat(n));this.Ae=8*t.length-n,this.Re=Za.fromNumber(this.Ae)}return N(e,[{key:"Ve",value:function(e,t,n){var r=e.add(t.multiply(Za.fromNumber(n)));return 1===r.compare(Cl)&&(r=new Za([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Re).toNumber()}},{key:"me",value:function(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}},{key:"mightContain",value:function(e){if(0===this.Ae)return!1;for(var t=h(Pl(Nl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);if(!this.me(a))return!1}return!0}},{key:"insert",value:function(e){if(0!==this.Ae)for(var t=h(Pl(Nl(e)),2),n=t[0],r=t[1],i=0;i<this.hashCount;i++){var a=this.Ve(n,r,i);this.fe(a)}}},{key:"fe",value:function(e){var t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}],[{key:"create",value:function(t,n,r){var i=t%8==0?0:8-t%8,a=new e(new Uint8Array(Math.ceil(t/8)),i,n);return r.forEach((function(e){return a.insert(e)})),a}}]),e}(),Dl=function(e){_(n,e);var t=I(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).name="BloomFilterError",e}return N(n)}(w(Error)),Ol=function(){function e(t,n,r,i,a){S(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return N(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,Ll.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(Co.min(),i,new zu(Eo),Cc(),Uc())}}]),e}(),Ll=function(){function e(t,n,r,i,a){S(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return N(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,Uc(),Uc(),Uc())}}]),e}(),Ml=N((function e(t,n,r,i){S(this,e),this.ge=t,this.removedTargetIds=n,this.key=r,this.pe=i})),Fl=N((function e(t,n){S(this,e),this.targetId=t,this.ye=n})),Ul=N((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Yu.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;S(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),Vl=function(){function e(){S(this,e),this.we=0,this.Se=zl(),this.be=Yu.EMPTY_BYTE_STRING,this.De=!1,this.Ce=!0}return N(e,[{key:"current",get:function(){return this.De}},{key:"resumeToken",get:function(){return this.be}},{key:"ve",get:function(){return 0!==this.we}},{key:"Fe",get:function(){return this.Ce}},{key:"Me",value:function(e){e.approximateByteSize()>0&&(this.Ce=!0,this.be=e)}},{key:"xe",value:function(){var e=Uc(),t=Uc(),n=Uc();return this.Se.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:so()}})),new Ll(this.be,this.De,e,t,n)}},{key:"Oe",value:function(){this.Ce=!1,this.Se=zl()}},{key:"Ne",value:function(e,t){this.Ce=!0,this.Se=this.Se.insert(e,t)}},{key:"Be",value:function(e){this.Ce=!0,this.Se=this.Se.remove(e)}},{key:"Le",value:function(){this.we+=1}},{key:"ke",value:function(){this.we-=1}},{key:"qe",value:function(){this.Ce=!0,this.De=!0}}]),e}(),Bl=function(){function e(t){S(this,e),this.Qe=t,this.Ke=new Map,this.$e=Cc(),this.Ue=jl(),this.We=new zu(Eo)}return N(e,[{key:"Ge",value:function(e){var t,n=b(e.ge);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.pe&&e.pe.isFoundDocument()?this.ze(r,e.pe):this.je(r,e.key,e.pe)}}catch(u){n.e(u)}finally{n.f()}var i,a=b(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.je(o,e.key,e.pe)}}catch(u){a.e(u)}finally{a.f()}}},{key:"He",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.Je(n);switch(e.state){case 0:t.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.ve||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.ve||t.removeTarget(n);break;case 3:t.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:t.Ye(n)&&(t.Ze(n),r.Me(e.resumeToken));break;default:so()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Ke.forEach((function(e,r){n.Ye(r)&&t(r)}))}},{key:"Xe",value:function(e){var t=e.targetId,n=e.ye.count,r=this.et(t);if(r){var i=r.target;if(ic(i))if(0===n){var a=new Oo(i.path);this.je(t,a,Cs.newNoDocument(a,Co.min()))}else co(1===n);else{var o=this.tt(t);if(o!==n){var u=this.nt(e),s=u?this.rt(u,e,o):1;if(0!==s){this.Ze(t);var c=2===s?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(t,c)}null==Sl||Sl.it(function(e,t,n,r,i){var a,o,u,s,c,l,f={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(f.bloomFilter={applied:0===i,hashCount:null!==(a=null==h?void 0:h.hashCount)&&void 0!==a?a:0,bitmapLength:null!==(s=null===(u=null===(o=null==h?void 0:h.bits)||void 0===o?void 0:o.bitmap)||void 0===u?void 0:u.length)&&void 0!==s?s:0,padding:null!==(l=null===(c=null==h?void 0:h.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:function(e){var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),f}(o,e.ye,this.Qe.st(),u,s))}}}}},{key:"nt",value:function(e){var t=e.ye.unchangedNames;if(!t||!t.bits)return null;var n,r,i=t.bits,a=i.bitmap,o=void 0===a?"":a,u=i.padding,s=void 0===u?0:u,c=t.hashCount,l=void 0===c?0:c;try{n=es(o).toUint8Array()}catch(e){if(e instanceof Ju)return oo("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new Rl(n,s,l)}catch(e){return oo(e instanceof Dl?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.Ae?null:r}},{key:"rt",value:function(e,t,n){return t.ye.count===n-this.ot(e,t.targetId)?0:2}},{key:"ot",value:function(e,t){var n=this,r=this.Qe.getRemoteKeysForTarget(t),i=0;return r.forEach((function(r){var a=n.Qe.st(),o="projects/".concat(a.projectId,"/databases/").concat(a.database,"/documents/").concat(r.path.canonicalString());e.mightContain(o)||(n.je(t,r,null),i++)})),i}},{key:"_t",value:function(e){var t=this,n=new Map;this.Ke.forEach((function(r,i){var a=t.et(i);if(a){if(r.current&&ic(a.target)){var o=new Oo(a.target.path);null!==t.$e.get(o)||t.ut(i,o)||t.je(i,o,Cs.newNoDocument(o,e))}r.Fe&&(n.set(i,r.xe()),r.Oe())}}));var r=Uc();this.Ue.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.et(e);return!n||"TargetPurposeLimboResolution"===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.$e.forEach((function(t,n){return n.setReadTime(e)}));var i=new Ol(e,n,this.We,this.$e,r);return this.$e=Cc(),this.Ue=jl(),this.We=new zu(Eo),i}},{key:"ze",value:function(e,t){if(this.Ye(e)){var n=this.ut(e,t.key)?2:0;this.Je(e).Ne(t.key,n),this.$e=this.$e.insert(t.key,t),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}}},{key:"je",value:function(e,t,n){if(this.Ye(e)){var r=this.Je(e);this.ut(e,t)?r.Ne(t,1):r.Be(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),n&&(this.$e=this.$e.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Ke.delete(e)}},{key:"tt",value:function(e){var t=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Le",value:function(e){this.Je(e).Le()}},{key:"Je",value:function(e){var t=this.Ke.get(e);return t||(t=new Vl,this.Ke.set(e,t)),t}},{key:"ct",value:function(e){var t=this.Ue.get(e);return t||(t=new Ku(Eo),this.Ue=this.Ue.insert(e,t)),t}},{key:"Ye",value:function(e){var t=null!==this.et(e);return t||io("WatchChangeAggregator","Detected inactive target",e),t}},{key:"et",value:function(e){var t=this.Ke.get(e);return t&&t.ve?null:this.Qe.lt(e)}},{key:"Ze",value:function(e){var t=this;this.Ke.set(e,new Vl),this.Qe.getRemoteKeysForTarget(e).forEach((function(n){t.je(e,n,null)}))}},{key:"ut",value:function(e,t){return this.Qe.getRemoteKeysForTarget(e).has(t)}}]),e}();function jl(){return new zu(Oo.comparator)}function zl(){return new zu(Oo.comparator)}var ql={asc:"ASCENDING",desc:"DESCENDING"},Gl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kl={and:"AND",or:"OR"},Hl=N((function e(t,n){S(this,e),this.databaseId=t,this.useProto3Json=n}));function Ql(e,t){return e.useProto3Json||uu(t)?t:{value:t}}function Wl(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Jl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Yl(e,t){return Wl(e,t.toTimestamp())}function Xl(e){return co(!!e),Co.fromTimestamp(function(e){var t=Zu(e);return new Ao(t.seconds,t.nanos)}(e))}function Zl(e,t){return function(e){return new Po(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function $l(e){var t=Po.fromString(e);return co(xf(t)),t}function ef(e,t){return Zl(e.databaseId,t.path)}function tf(e,t){var n=$l(t);if(n.get(1)!==e.databaseId.projectId)throw new ho(fo.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new ho(fo.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Oo(of(n))}function nf(e,t){return Zl(e.databaseId,t)}function rf(e){var t=$l(e);return 4===t.length?Po.emptyPath():of(t)}function af(e){return new Po(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function of(e){return co(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function uf(e,t,n){return{name:ef(e,t),fields:n.value.mapValue.fields}}function sf(e,t,n){var r=tf(e,t.name),i=Xl(t.updateTime),a=t.createTime?Xl(t.createTime):Co.min(),o=new Ss({mapValue:{fields:t.fields}}),u=Cs.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function cf(e,t){return"found"in t?function(e,t){co(!!t.found),t.found.name,t.found.updateTime;var n=tf(e,t.found.name),r=Xl(t.found.updateTime),i=t.found.createTime?Xl(t.found.createTime):Co.min(),a=new Ss({mapValue:{fields:t.found.fields}});return Cs.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){co(!!t.missing),co(!!t.readTime);var n=tf(e,t.missing),r=Xl(t.readTime);return Cs.newNoDocument(n,r)}(e,t):so()}function lf(e,t){var n;if(t instanceof hl)n={update:uf(e,t.key,t.value)};else if(t instanceof kl)n={delete:ef(e,t.key)};else if(t instanceof dl)n={update:uf(e,t.key,t.data),updateMask:_f(t.fieldMask)};else{if(!(t instanceof wl))return so();n={verify:ef(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Wc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Jc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Xc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof $c)return{fieldPath:t.field.canonicalString(),increment:n.Te};throw so()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Yl(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:so()}(e,t.precondition)),n}function ff(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?il.updateTime(Xl(e.updateTime)):void 0!==e.exists?il.exists(e.exists):il.none()}(t.currentDocument):il.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)co("REQUEST_TIME"===t.setToServerValue),n=new Wc;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Jc(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new Xc(i)}else"increment"in t?n=new $c(e,t.increment):so();var a=Do.fromServerFormat(t.fieldPath);return new nl(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=tf(e,t.update.name),a=new Ss({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Wu(t.map((function(e){return Do.fromServerFormat(e)})))}(t.updateMask);return new dl(i,a,o,n,r)}return new hl(i,a,n,r)}if(t.delete){var u=tf(e,t.delete);return new kl(u,n)}if(t.verify){var s=tf(e,t.verify);return new wl(s,n)}return so()}function hf(e,t){return{documents:[nf(e,t.path)]}}function df(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=nf(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=nf(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return bf(Fs.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:kf(e.field),direction:yf(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o=Ql(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function pf(e){var t=rf(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){co(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=vf(e);return t instanceof Fs&&Bs(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=function(e){return e.map((function(e){return function(e){return new Ds(wf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)}))}(n.orderBy));var s=null;n.limit&&(s=function(e){var t;return uu(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new Ns(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new Ns(n,t)}(n.endAt)),cc(t,i,u,o,s,"F",c,l)}function vf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=wf(e.unaryFilter.field);return Ms.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=wf(e.unaryFilter.field);return Ms.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=wf(e.unaryFilter.field);return Ms.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=wf(e.unaryFilter.field);return Ms.create(i,"!=",{nullValue:"NULL_VALUE"});default:return so()}}(e):void 0!==e.fieldFilter?function(e){return Ms.create(wf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return so()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Fs.create(e.compositeFilter.filters.map((function(e){return vf(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return so()}}(e.compositeFilter.op))}(e):so()}function yf(e){return ql[e]}function mf(e){return Gl[e]}function gf(e){return Kl[e]}function kf(e){return{fieldPath:e.canonicalString()}}function wf(e){return Do.fromServerFormat(e.fieldPath)}function bf(e){return e instanceof Ms?function(e){if("=="===e.op){if(ks(e.value))return{unaryFilter:{field:kf(e.field),op:"IS_NAN"}};if(gs(e.value))return{unaryFilter:{field:kf(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ks(e.value))return{unaryFilter:{field:kf(e.field),op:"IS_NOT_NAN"}};if(gs(e.value))return{unaryFilter:{field:kf(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:kf(e.field),op:mf(e.op),value:e.value}}}(e):e instanceof Fs?function(e){var t=e.getFilters().map((function(e){return bf(e)}));return 1===t.length?t[0]:{compositeFilter:{op:gf(e.op),filters:t}}}(e):so()}function _f(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function xf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var If=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Co.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Co.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Yu.EMPTY_BYTE_STRING,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;S(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=s}return N(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}},{key:"withExpectedCount",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}]),e}(),Ef=N((function e(t){S(this,e),this.ht=t}));function Tf(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Sf(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:ef(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Wl(e,t.version.toTimestamp()),createTime:Wl(e,t.createTime.toTimestamp())}}(e.ht,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Af(t.version)};else{if(!t.isUnknownDocument())return so();r.unknownDocument={path:n.path.toArray(),version:Af(t.version)}}return r}function Sf(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Af(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Cf(e){var t=new Ao(e.seconds,e.nanoseconds);return Co.fromTimestamp(t)}function Nf(e,t){for(var n=(t.baseMutations||[]).map((function(t){return ff(e.ht,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return ff(e.ht,t)})),u=Ao.fromMillis(t.localWriteTimeMs);return new bl(t.batchId,u,n,o)}function Pf(e){var t,n=Cf(e.readTime),r=void 0!==e.lastLimboFreeSnapshotVersion?Cf(e.lastLimboFreeSnapshotVersion):Co.min();return t=function(e){return void 0!==e.documents}(e.query)?function(e){return co(1===e.documents.length),yc(lc(rf(e.documents[0])))}(e.query):function(e){return yc(pf(e))}(e.query),new If(t,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,r,Yu.fromBase64String(e.resumeToken))}function Rf(e,t){var n,r=Af(t.snapshotVersion),i=Af(t.lastLimboFreeSnapshotVersion);n=ic(t.target)?hf(e.ht,t.target):df(e.ht,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:nc(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Df(e){var t=pf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?kc(t,t.limit,"L"):t}function Of(e,t){return new xl(t.largestBatchId,ff(e.ht,t.overlayMutation))}function Lf(e,t){var n=t.path.lastSegment();return[e,lu(t.path.popLast()),n]}function Mf(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Af(r.readTime),documentKey:lu(r.documentKey.path),largestBatchId:r.largestBatchId}}var Ff=function(){function e(){S(this,e)}return N(e,[{key:"getBundleMetadata",value:function(e,t){return Uf(e).get(t).next((function(e){if(e)return function(e){return{id:e.bundleId,createTime:Cf(e.createTime),version:e.version}}(e)}))}},{key:"saveBundleMetadata",value:function(e,t){return Uf(e).put(function(e){return{bundleId:e.id,createTime:Af(Xl(e.createTime)),version:e.version}}(t))}},{key:"getNamedQuery",value:function(e,t){return Vf(e).get(t).next((function(e){if(e)return function(e){return{name:e.name,query:Df(e.bundledQuery),readTime:Cf(e.readTime)}}(e)}))}},{key:"saveNamedQuery",value:function(e,t){return Vf(e).put(function(e){return{name:e.name,readTime:Af(Xl(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function Uf(e){return Uu(e,"bundles")}function Vf(e){return Uu(e,"namedQueries")}var Bf=function(){function e(t,n){S(this,e),this.serializer=t,this.userId=n}return N(e,[{key:"getOverlay",value:function(e,t){var n=this;return jf(e).get(Lf(this.userId,t)).next((function(e){return e?Of(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=Dc();return Wo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new xl(t,a);i.push(r.It(e,o))})),Wo.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(lu(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(jf(e).J("collectionPathOverlayIndex",i))})),Wo.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=Dc(),a=lu(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return jf(e).G("collectionPathOverlayIndex",o).next((function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Of(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=Dc(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return jf(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Of(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"It",value:function(e,t){return jf(e).put(function(e,t,n){var r=h(Lf(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:lf(e.ht,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"Pt",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function jf(e){return Uu(e,"documentOverlays")}var zf=function(){function e(){S(this,e)}return N(e,[{key:"dt",value:function(e,t){this.Tt(e,t),t.Et()}},{key:"Tt",value:function(e,t){if("nullValue"in e)this.At(t,5);else if("booleanValue"in e)this.At(t,10),t.Rt(e.booleanValue?1:0);else if("integerValue"in e)this.At(t,15),t.Rt($u(e.integerValue));else if("doubleValue"in e){var n=$u(e.doubleValue);isNaN(n)?this.At(t,13):(this.At(t,15),su(n)?t.Rt(0):t.Rt(n))}else if("timestampValue"in e){var r=e.timestampValue;this.At(t,20),"string"==typeof r?t.Vt(r):(t.Vt("".concat(r.seconds||"")),t.Rt(r.nanos||0))}else if("stringValue"in e)this.ft(e.stringValue,t),this.gt(t);else if("bytesValue"in e)this.At(t,30),t.yt(es(e.bytesValue)),this.gt(t);else if("referenceValue"in e)this.wt(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.At(t,45),t.Rt(i.latitude||0),t.Rt(i.longitude||0)}else"mapValue"in e?_s(e)?this.At(t,Number.MAX_SAFE_INTEGER):(this.St(e.mapValue,t),this.gt(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.gt(t)):so()}},{key:"ft",value:function(e,t){this.At(t,25),this.Dt(e,t)}},{key:"Dt",value:function(e,t){t.Vt(e)}},{key:"St",value:function(e,t){var n=e.fields||{};this.At(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.ft(a,t),this.Tt(n[a],t)}}},{key:"bt",value:function(e,t){var n=e.values||[];this.At(t,50);var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.Tt(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"wt",value:function(e,t){var n=this;this.At(t,37),Oo.fromName(e).path.forEach((function(e){n.At(t,60),n.Dt(e,t)}))}},{key:"At",value:function(e,t){e.Rt(t)}},{key:"gt",value:function(e){e.Rt(2)}}]),e}();function qf(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Gf(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=qf(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}zf.Ct=new zf;var Kf=function(){function e(){S(this,e),this.buffer=new Uint8Array(1024),this.position=0}return N(e,[{key:"vt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ft(n.value),n=t.next();this.Mt()}},{key:"xt",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Ot(n.value),n=t.next();this.Nt()}},{key:"Bt",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ft(i);else if(i<2048)this.Ft(960|i>>>6),this.Ft(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ft(480|i>>>12),this.Ft(128|63&i>>>6),this.Ft(128|63&i);else{var a=r.codePointAt(0);this.Ft(240|a>>>18),this.Ft(128|63&a>>>12),this.Ft(128|63&a>>>6),this.Ft(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Mt()}},{key:"Lt",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Ot(i);else if(i<2048)this.Ot(960|i>>>6),this.Ot(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Ot(480|i>>>12),this.Ot(128|63&i>>>6),this.Ot(128|63&i);else{var a=r.codePointAt(0);this.Ot(240|a>>>18),this.Ot(128|63&a>>>12),this.Ot(128|63&a>>>6),this.Ot(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Nt()}},{key:"kt",value:function(e){var t=this.qt(e),n=Gf(t);this.Qt(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Kt",value:function(e){var t=this.qt(e),n=Gf(t);this.Qt(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"$t",value:function(){this.Ut(255),this.Ut(255)}},{key:"Wt",value:function(){this.Gt(255),this.Gt(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.Qt(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"zt",value:function(){return this.buffer.slice(0,this.position)}},{key:"qt",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Ft",value:function(e){var t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(t)}},{key:"Ot",value:function(e){var t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(e)}},{key:"Mt",value:function(){this.Ut(0),this.Ut(1)}},{key:"Nt",value:function(){this.Gt(0),this.Gt(1)}},{key:"Ut",value:function(e){this.Qt(1),this.buffer[this.position++]=e}},{key:"Gt",value:function(e){this.Qt(1),this.buffer[this.position++]=~e}},{key:"Qt",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),Hf=function(){function e(t){S(this,e),this.jt=t}return N(e,[{key:"yt",value:function(e){this.jt.vt(e)}},{key:"Vt",value:function(e){this.jt.Bt(e)}},{key:"Rt",value:function(e){this.jt.kt(e)}},{key:"Et",value:function(){this.jt.$t()}}]),e}(),Qf=function(){function e(t){S(this,e),this.jt=t}return N(e,[{key:"yt",value:function(e){this.jt.xt(e)}},{key:"Vt",value:function(e){this.jt.Lt(e)}},{key:"Rt",value:function(e){this.jt.Kt(e)}},{key:"Et",value:function(){this.jt.Wt()}}]),e}(),Wf=function(){function e(){S(this,e),this.jt=new Kf,this.Ht=new Hf(this.jt),this.Jt=new Qf(this.jt)}return N(e,[{key:"seed",value:function(e){this.jt.seed(e)}},{key:"Yt",value:function(e){return 0===e?this.Ht:this.Jt}},{key:"zt",value:function(){return this.jt.zt()}},{key:"reset",value:function(){this.jt.reset()}}]),e}(),Jf=function(){function e(t,n,r,i){S(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return N(e,[{key:"Zt",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function Yf(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=Xf(e.arrayValue,t.arrayValue))?n:0!==(n=Xf(e.directionalValue,t.directionalValue))?n:Oo.comparator(e.documentKey,t.documentKey)}function Xf(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var Zf=function(){function e(t){S(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Xt=t.orderBy,this.en=[];var n,r=b(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.tn=i:this.en.push(i)}}catch(a){r.e(a)}finally{r.f()}}return N(e,[{key:"nn",value:function(e){co(e.collectionGroup===this.collectionId);var t=Mo(e);if(void 0!==t&&!this.rn(t))return!1;for(var n=Fo(e),r=new Set,i=0,a=0;i<n.length&&this.rn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.tn){if(!r.has(this.tn.field.canonicalString())){var o=n[i];if(!this.sn(this.tn,o)||!this.on(this.Xt[a++],o))return!1}++i}for(;i<n.length;++i){var u=n[i];if(a>=this.Xt.length||!this.on(this.Xt[a++],u))return!1}return!0}},{key:"_n",value:function(){var e,t=new Ku(Do.comparator),n=[],r=b(this.en);try{for(r.s();!(e=r.n()).done;){var i=e.value;if(!i.field.isKeyField())if("array-contains"===i.op||"array-contains-any"===i.op)n.push(new Uo(i.field,2));else{if(t.has(i.field))continue;t=t.add(i.field),n.push(new Uo(i.field,0))}}}catch(s){r.e(s)}finally{r.f()}var a,o=b(this.Xt);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||t.has(u.field)||(t=t.add(u.field),n.push(new Uo(u.field,"asc"===u.dir?0:1)))}}catch(s){o.e(s)}finally{o.f()}return new Lo(Lo.UNKNOWN_ID,this.collectionId,n,Vo.empty())}},{key:"rn",value:function(e){var t,n=b(this.en);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.sn(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"sn",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"on",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function $f(e){var t,n;if(co(e instanceof Ms||e instanceof Fs),e instanceof Ms){if(e instanceof Xs){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return Ms.create(e.field,"==",t)})))||[];return Fs.create(r,"or")}return e}var i=e.filters.map((function(e){return $f(e)}));return Fs.create(i,e.op)}function eh(e){if(0===e.getFilters().length)return[];var t=ih($f(e));return co(rh(t)),th(t)||nh(t)?[t]:t.getFilters()}function th(e){return e instanceof Ms}function nh(e){return e instanceof Fs&&Bs(e)}function rh(e){return th(e)||nh(e)||function(e){if(e instanceof Fs&&Vs(e)){var t,n=b(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!th(r)&&!nh(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function ih(e){if(co(e instanceof Ms||e instanceof Fs),e instanceof Ms)return e;if(1===e.filters.length)return ih(e.filters[0]);var t=e.filters.map((function(e){return ih(e)})),n=Fs.create(t,e.op);return rh(n=uh(n))?n:(co(n instanceof Fs),co(Us(n)),co(n.filters.length>1),n.filters.reduce((function(e,t){return ah(e,t)})))}function ah(e,t){var n;return co(e instanceof Ms||e instanceof Fs),co(t instanceof Ms||t instanceof Fs),n=e instanceof Ms?t instanceof Ms?function(e,t){return Fs.create([e,t],"and")}(e,t):oh(e,t):t instanceof Ms?oh(t,e):function(e,t){if(co(e.filters.length>0&&t.filters.length>0),Us(e)&&Us(t))return Gs(e,t.getFilters());var n=Vs(e)?e:t,r=Vs(e)?t:e,i=n.filters.map((function(e){return ah(e,r)}));return Fs.create(i,"or")}(e,t),uh(n)}function oh(e,t){if(Us(t))return Gs(t,e.getFilters());var n=t.filters.map((function(t){return ah(e,t)}));return Fs.create(n,"or")}function uh(e){if(co(e instanceof Ms||e instanceof Fs),e instanceof Ms)return e;var t=e.getFilters();if(1===t.length)return uh(t[0]);if(js(e))return e;var n=t.map((function(e){return uh(e)})),r=[];return n.forEach((function(t){t instanceof Ms?r.push(t):t instanceof Fs&&(t.op===e.op?r.push.apply(r,T(t.filters)):r.push(t))})),1===r.length?r[0]:Fs.create(r,e.op)}var sh=function(){function e(){S(this,e),this.an=new ch}return N(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.an.add(t),Wo.resolve()}},{key:"getCollectionParents",value:function(e,t){return Wo.resolve(this.an.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Wo.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Wo.resolve()}},{key:"deleteAllFieldIndexes",value:function(e){return Wo.resolve()}},{key:"createTargetIndexes",value:function(e,t){return Wo.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Wo.resolve(null)}},{key:"getIndexType",value:function(e,t){return Wo.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Wo.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Wo.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Wo.resolve(zo.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Wo.resolve(zo.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Wo.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Wo.resolve()}}]),e}(),ch=function(){function e(){S(this,e),this.index={}}return N(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Ku(Po.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new Ku(Po.comparator)).toArray()}}]),e}(),lh=new Uint8Array(0),fh=function(){function e(t,n){S(this,e),this.user=t,this.databaseId=n,this.un=new ch,this.cn=new Sc((function(e){return nc(e)}),(function(e,t){return rc(e,t)})),this.uid=t.uid||""}return N(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.un.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.un.add(t)}));var a={collectionId:r,parent:lu(i)};return hh(e).put(a)}return Wo.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[So(t),""],!1,!0);return hh(e).G(r).next((function(e){var r,i=b(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(du(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=ph(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=vh(e);return a.next((function(e){o.put(Mf(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=ph(e),r=vh(e),i=dh(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"deleteAllFieldIndexes",value:function(e){var t=ph(e),n=dh(e),r=vh(e);return t.J().next((function(){return n.J()})).next((function(){return r.J()}))}},{key:"createTargetIndexes",value:function(e,t){var n=this;return Wo.forEach(this.ln(t),(function(t){return n.getIndexType(e,t).next((function(r){if(0===r||1===r){var i=new Zf(t);return n.addFieldIndex(e,i._n())}}))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=dh(e),i=!0,a=new Map;return Wo.forEach(this.ln(t),(function(t){return n.hn(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=Uc(),o=[];return Wo.forEach(a,(function(i,a){io("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(","))}(i)," to execute ").concat(nc(t)));var u=function(e,t){var n=Mo(t);if(void 0===n)return null;var r,i=b(ac(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),s=function(e,t){var n,r=new Map,i=b(Fo(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=b(ac(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=[],i=!0,a=b(Fo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?oc(e,o.fieldPath,e.startAt):uc(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ns(r,i)}(a,i),l=function(e,t){var n,r=[],i=!0,a=b(Fo(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?uc(e,o.fieldPath,e.endAt):oc(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new Ns(r,i)}(a,i),f=n.Pn(i,a,c),h=n.Pn(i,a,l),d=n.In(i,a,s),p=n.dn(i.indexId,u,f,c.inclusive,h,l.inclusive,d);return Wo.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=Oo.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Wo.resolve(null)}))}},{key:"ln",value:function(e){var t=this.cn.get(e);return t||(t=0===e.filters.length?[e]:eh(Fs.create(e.filters,"and")).map((function(t){return tc(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.cn.set(e,t),t)}},{key:"dn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.Tn(t[h/c]):lh,f=u.En(e,s,n[h%c],r),d=u.An(e,s,i[h%c],a),p=o.map((function(t){return u.En(e,s,t,!0)}));l.push.apply(l,T(u.createRange(f,d,p)))},h=0;h<s;++h)f();return l}},{key:"En",value:function(e,t,n,r){var i=new Jf(e,Oo.empty(),t,n);return r?i:i.Zt()}},{key:"An",value:function(e,t,n,r){var i=new Jf(e,Oo.empty(),t,n);return r?i.Zt():i}},{key:"hn",value:function(e,t){var n=new Zf(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.nn(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.ln(t);return Wo.forEach(i,(function(t){return n.hn(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new Ku(Do.comparator),r=!1,i=b(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=b(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=b(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"Rn",value:function(e,t){var n,r=new Wf,i=b(Fo(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Yt(a.kind);zf.Ct.dt(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.zt()}},{key:"Tn",value:function(e){var t=new Wf;return zf.Ct.dt(e,t.Yt(0)),t.zt()}},{key:"Vn",value:function(e,t){var n=new Wf;return zf.Ct.dt(vs(this.databaseId,t),n.Yt(function(e){var t=Fo(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.zt()}},{key:"In",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new Wf);var i,a=0,o=b(Fo(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=b(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.mn(t,s.fieldPath)&&ms(c))r=this.fn(r,s,c);else{var h=f.Yt(s.kind);zf.Ct.dt(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.gn(r)}},{key:"Pn",value:function(e,t,n){return this.In(e,t,n.position)}},{key:"gn",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].zt();return t}},{key:"fn",value:function(e,t,n){var r,i=T(e),a=[],o=b(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=b(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new Wf;f.seed(l.zt()),zf.Ct.dt(s,f.Yt(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"mn",value:function(e,t){return!!e.filters.find((function(e){return e instanceof Ms&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=ph(e),i=vh(e);return(t?r.G("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.G()).next((function(e){var t=[];return Wo.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new Vo(t.sequenceNumber,new zo(Cf(t.readTime),new Oo(du(t.documentKey)),t.largestBatchId)):Vo.empty(),r=e.fields.map((function(e){var t=h(e,2),n=t[0],r=t[1];return new Uo(Do.fromServerFormat(n),r)}));return new Lo(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Eo(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=ph(e),a=vh(e);return this.pn(e).next((function(e){return i.G("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Wo.forEach(t,(function(t){return a.put(Mf(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Wo.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Wo.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Wo.forEach(a,(function(r){return n.yn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?Wo.resolve():n.Sn(e,i,r,t,a)}))}))}))}))}},{key:"bn",value:function(e,t,n,r){return dh(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Vn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"Dn",value:function(e,t,n,r){return dh(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Vn(n,t.key),t.key.path.toArray()])}},{key:"yn",value:function(e,t,n){var r=dh(e),i=new Ku(Yf);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Vn(n,t)])},(function(e,r){i=i.add(new Jf(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new Ku(Yf),r=this.Rn(t,e);if(null==r)return n;var i=Mo(t);if(null!=i){var a=e.data.field(i.fieldPath);if(ms(a)){var o,u=b(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new Jf(t.indexId,e.key,this.Tn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new Jf(t.indexId,e.key,lh,r));return n}},{key:"Sn",value:function(e,t,n,r,i){var a=this;io("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=Qu(a),s=Qu(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=Qu(o)):l?(i(u),u=Qu(a)):(u=Qu(a),s=Qu(o))}}(r,i,Yf,(function(r){o.push(a.bn(e,t,n,r))}),(function(r){o.push(a.Dn(e,t,n,r))})),Wo.waitFor(o)}},{key:"pn",value:function(e){var t=1;return vh(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return Yf(e,t)})).filter((function(e,t,n){return!t||0!==Yf(e,n[t-1])}));var r=[];r.push(e);var i,a=b(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=Yf(o,e),s=Yf(o,t);if(0===u)r[0]=e.Zt();else if(u>0&&s<0)r.push(o),r.push(o.Zt());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.Cn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,lh,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,lh,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"Cn",value:function(e,t){return Yf(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(yh)}},{key:"getMinOffset",value:function(e,t){var n=this;return Wo.mapArray(this.ln(t),(function(t){return n.hn(e,t).next((function(e){return e||so()}))})).next(yh)}}]),e}();function hh(e){return Uu(e,"collectionParents")}function dh(e){return Uu(e,"indexEntries")}function ph(e){return Uu(e,"indexConfiguration")}function vh(e){return Uu(e,"indexState")}function yh(e){co(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;qo(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new zo(t.readTime,t.documentKey,n)}var mh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},gh=function(){function e(t,n,r){S(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return N(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function kh(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){co(1===u)})));var c,l=[],f=b(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=yu(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(p){f.e(p)}finally{f.f()}return Wo.waitFor(a).next((function(){return l}))}function wh(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw so();t=e.noDocument}return JSON.stringify(t).length}gh.DEFAULT_COLLECTION_PERCENTILE=10,gh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,gh.DEFAULT=new gh(41943040,gh.DEFAULT_COLLECTION_PERCENTILE,gh.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),gh.DISABLED=new gh(-1,0,0);var bh=function(){function e(t,n,r,i){S(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.vn={}}return N(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return xh(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Ih(e),o=xh(e);return o.add({}).next((function(u){co("number"==typeof u);var s,c=new bl(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return lf(e.ht,t)})),i=n.mutations.map((function(t){return lf(e.ht,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new Ku((function(e,t){return Eo(e.canonicalString(),t.canonicalString())})),d=b(r);try{for(d.s();!(s=d.n()).done;){var p=s.value,v=yu(i.userId,p.key.path,u);h=h.add(p.key.path.popLast()),f.push(o.put(l)),f.push(a.put(v,mu))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.vn[u]=c.keys()})),Wo.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return xh(e).get(t).next((function(e){return e?(co(e.userId===n.userId),Nf(n.serializer,e)):null}))}},{key:"Fn",value:function(e,t){var n=this;return this.vn[t]?Wo.resolve(this.vn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.vn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return xh(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(co(t.batchId>=r),a=Nf(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return xh(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return xh(e).G("userMutationsIndex",n).next((function(e){return e.map((function(e){return Nf(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=vu(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Ih(e).Z({range:i},(function(r,i,o){var u=h(r,3),s=u[0],c=u[1],l=u[2],f=du(c);if(s===n.userId&&t.path.isEqual(f))return xh(e).get(l).next((function(e){if(!e)throw so();co(e.userId===n.userId),a.push(Nf(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ku(Eo),i=[];return t.forEach((function(t){var a=vu(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Ih(e).Z({range:o},(function(e,i,a){var o=h(e,3),u=o[0],s=o[1],c=o[2],l=du(s);u===n.userId&&t.path.isEqual(l)?r=r.add(c):a.done()}));i.push(u)})),Wo.waitFor(i).next((function(){return n.Mn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=vu(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new Ku(Eo);return Ih(e).Z({range:o},(function(e,t,a){var o=h(e,3),s=o[0],c=o[1],l=o[2],f=du(c);s===n.userId&&r.isPrefixOf(f)?f.length===i&&(u=u.add(l)):a.done()})).next((function(){return n.Mn(e,u)}))}},{key:"Mn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(xh(e).get(t).next((function(e){if(null===e)throw so();co(e.userId===n.userId),r.push(Nf(n.serializer,e))})))})),Wo.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return kh(e.ue,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.xn(t.batchId)})),Wo.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"xn",value:function(e){delete this.vn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Wo.resolve();var r=IDBKeyRange.lowerBound(function(e){return[e]}(t.userId)),i=[];return Ih(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=du(e[1]);i.push(a)}else r.done()})).next((function(){co(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return _h(e,this.userId,t)}},{key:"On",value:function(e){var t=this;return Eh(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"Pt",value:function(t,n,r,i){return co(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function _h(e,t,n){var r=vu(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Ih(e).Z({range:a,Y:!0},(function(e,n,r){var a=h(e,3),u=a[0],s=a[1];a[2];u===t&&s===i&&(o=!0),r.done()})).next((function(){return o}))}function xh(e){return Uu(e,"mutations")}function Ih(e){return Uu(e,"documentMutations")}function Eh(e){return Uu(e,"mutationQueues")}var Th=function(){function e(t){S(this,e),this.Nn=t}return N(e,[{key:"next",value:function(){return this.Nn+=2,this.Nn}}],[{key:"Bn",value:function(){return new e(0)}},{key:"Ln",value:function(){return new e(-1)}}]),e}(),Sh=function(){function e(t,n){S(this,e),this.referenceDelegate=t,this.serializer=n}return N(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.kn(e).next((function(n){var r=new Th(n.highestTargetId);return n.highestTargetId=r.next(),t.qn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.kn(e).next((function(e){return Co.fromTimestamp(new Ao(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.kn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.kn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.qn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Qn(e,t).next((function(){return n.kn(e).next((function(r){return r.targetCount+=1,n.Kn(t,r),n.qn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Qn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Ah(e).delete(t.targetId)})).next((function(){return n.kn(e)})).next((function(t){return co(t.targetCount>0),t.targetCount-=1,n.qn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Ah(e).Z((function(o,u){var s=Pf(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Wo.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Ah(e).Z((function(e,n){var r=Pf(n);t(r)}))}},{key:"kn",value:function(e){return Ch(e).get("targetGlobalKey").next((function(e){return co(null!==e),e}))}},{key:"qn",value:function(e,t){return Ch(e).put("targetGlobalKey",t)}},{key:"Qn",value:function(e,t){return Ah(e).put(Rf(this.serializer,t))}},{key:"Kn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.kn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=nc(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Ah(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=Pf(n);rc(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Nh(e);return t.forEach((function(t){var o=lu(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Wo.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Nh(e);return Wo.forEach(t,(function(t){var a=lu(t.path);return Wo.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Nh(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Nh(e),i=Uc();return r.Z({range:n,Y:!0},(function(e,t,n){var r=du(e[1]),a=new Oo(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=lu(t.path),r=IDBKeyRange.bound([n],[So(n)],!1,!0),i=0;return Nh(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=h(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"lt",value:function(e,t){return Ah(e).get(t).next((function(e){return e?Pf(e):null}))}}]),e}();function Ah(e){return Uu(e,"targets")}function Ch(e){return Uu(e,"targetGlobal")}function Nh(e){return Uu(e,"targetDocuments")}function Ph(e,t){var n=h(e,2),r=n[0],i=n[1],a=h(t,2),o=a[0],u=a[1],s=Eo(r,o);return 0===s?Eo(i,u):s}var Rh=function(){function e(t){S(this,e),this.$n=t,this.buffer=new Ku(Ph),this.Un=0}return N(e,[{key:"Wn",value:function(){return++this.Un}},{key:"Gn",value:function(e){var t=[e,this.Wn()];if(this.buffer.size<this.$n)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();Ph(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Dh=function(){function e(t,n,r){S(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.zn=null}return N(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.jn(6e4)}},{key:"stop",value:function(){this.zn&&(this.zn.cancel(),this.zn=null)}},{key:"started",get:function(){return null!==this.zn}},{key:"jn",value:function(e){var t=this;io("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.zn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.zn=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!$o(e.t0)){e.next=12;break}io("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,Ho(e.t0);case 14:return e.next=16,t.jn(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Oh=function(){function e(t,n){S(this,e),this.Hn=t,this.params=n}return N(e,[{key:"calculateTargetCount",value:function(e,t){return this.Hn.Jn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Wo.resolve(ou.ae);var r=new Rh(t);return this.Hn.forEachTarget(e,(function(e){return r.Gn(e.sequenceNumber)})).next((function(){return n.Hn.Yn(e,(function(e){return r.Gn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Hn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Hn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(io("LruGarbageCollector","Garbage collection skipped; disabled"),Wo.resolve(mh)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(io("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),mh):n.Zn(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Hn.getCacheSize(e)}},{key:"Zn",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(io("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),ro()<=pe.DEBUG&&io("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Wo.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}();function Lh(e,t){return new Oh(e,t)}var Mh=function(){function e(t,n){S(this,e),this.db=t,this.garbageCollector=Lh(this,n)}return N(e,[{key:"Jn",value:function(e){var t=this.Xn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"Xn",value:function(e){var t=0;return this.Yn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Yn",value:function(e,t){return this.er(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return Fh(e,n)}},{key:"removeReference",value:function(e,t,n){return Fh(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return Fh(e,t)}},{key:"tr",value:function(e,t){return function(e,t){var n=!1;return Eh(e).X((function(r){return _h(e,r,t).next((function(e){return e&&(n=!0),Wo.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.er(e,(function(o,u){if(u<=t){var s=n.tr(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,Co.min()),Nh(e).delete(function(e){return[0,lu(e.path)]}(o))}))}));i.push(s)}})).next((function(){return Wo.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return Fh(e,t)}},{key:"er",value:function(e,t){var n,r=Nh(e),i=ou.ae;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=h(e,2),o=a[0],u=(a[1],r.path),s=r.sequenceNumber;0===o?(i!==ou.ae&&t(new Oo(du(n)),i),i=s,n=u):i=ou.ae})).next((function(){i!==ou.ae&&t(new Oo(du(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function Fh(e,t){return Nh(e).put(function(e,t){return{targetId:0,path:lu(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var Uh=function(){function e(){S(this,e),this.changes=new Sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return N(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,Cs.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Wo.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),Vh=function(){function e(t){S(this,e),this.serializer=t}return N(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return qh(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return qh(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Sf(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.nr(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=Cs.newInvalidDocument(t);return qh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Gh(t))},(function(e,i){r=n.rr(t,i)})).next((function(){return r}))}},{key:"ir",value:function(e,t){var n=this,r={size:0,document:Cs.newInvalidDocument(t)};return qh(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Gh(t))},(function(e,i){r={document:n.rr(t,i),size:wh(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=Cc();return this.sr(e,t,(function(e,t){var i=n.rr(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"_r",value:function(e,t){var n=this,r=Cc(),i=new zu(Oo.comparator);return this.sr(e,t,(function(e,t){var a=n.rr(e,t);r=r.insert(e,a),i=i.insert(e,wh(t))})).next((function(){return{documents:r,ar:i}}))}},{key:"sr",value:function(e,t,n){if(t.isEmpty())return Wo.resolve();var r=new Ku(Hh);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(Gh(r.first()),Gh(r.last())),a=r.getIterator(),o=a.getNext();return qh(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=Oo.fromSegments([].concat(T(t.prefixPath),[t.collectionGroup,t.documentId]));o&&Hh(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.W(Gh(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r,i){var a=this,o=t.path,u=[o.popLast().toArray(),o.lastSegment(),Sf(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return qh(e).G(IDBKeyRange.bound(u,s,!0)).next((function(e){null==i||i.incrementDocumentReadCount(e.length);var n,o=Cc(),u=b(e);try{for(u.s();!(n=u.n()).done;){var s=n.value,c=a.rr(Oo.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);c.isFoundDocument()&&(xc(t,c)||r.has(c.key))&&(o=o.insert(c.key,c))}}catch(l){u.e(l)}finally{u.f()}return o}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=Cc(),o=Kh(t,n),u=Kh(t,zo.max());return qh(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.rr(Oo.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new jh(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return zh(e).get("remoteDocumentGlobalKey").next((function(e){return co(!!e),e}))}},{key:"nr",value:function(e,t){return zh(e).put("remoteDocumentGlobalKey",t)}},{key:"rr",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=sf(e.ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=Oo.fromSegments(t.noDocument.path),i=Cf(t.noDocument.readTime);n=Cs.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return so();var a=Oo.fromSegments(t.unknownDocument.path),o=Cf(t.unknownDocument.version);n=Cs.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new Ao(e[0],e[1]);return Co.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(Co.min()))return n}return Cs.newInvalidDocument(e)}}]),e}();function Bh(e){return new Vh(e)}var jh=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).ur=e,i.trackRemovals=r,i.cr=new Sc((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return N(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new Ku((function(e,t){return Eo(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.cr.get(a);if(n.push(t.ur.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Tf(t.ur.serializer,o);i=i.add(a.path.popLast());var c=wh(s);r+=c-u.size,n.push(t.ur.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Tf(t.ur.serializer,o.convertToNoDocument(Co.min()));n.push(t.ur.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.ur.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.ur.updateMetadata(e,r)),Wo.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.ur.ir(e,t).next((function(e){return n.cr.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.ur._r(e,t).next((function(e){var t=e.documents;return e.ar.forEach((function(e,r){n.cr.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(Uh);function zh(e){return Uu(e,"remoteDocumentGlobal")}function qh(e){return Uu(e,"remoteDocumentsV14")}function Gh(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Kh(e,t){var n=t.documentKey.path.toArray();return[e,Sf(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Hh(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Eo(n[a],r[a]))return i;return(i=Eo(n.length,r.length))||((i=Eo(n[n.length-2],r[r.length-2]))||Eo(n[n.length-1],r[r.length-1]))}var Qh=N((function e(t,n){S(this,e),this.overlayedDocument=t,this.mutatedFields=n})),Wh=function(){function e(t,n,r,i){S(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return N(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&cl(r.mutation,e,Wu.empty(),Ao.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,Uc()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Uc(),i=Dc();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=Pc();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=Dc();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,Uc())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=Cc(),a=Lc(),o=Lc();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof dl)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),cl(o.mutation,t,o.mutation.getFieldMask(),Ao.now())):a.set(t.key,Wu.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new Qh(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=Lc(),i=new zu((function(e,t){return e-t})),a=Uc();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=b(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Wu.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||Uc()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=Oc();c.forEach((function(e){if(!a.has(e)){var n=ul(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Wo.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){return function(e){return Oo.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pc(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Wo.resolve(Dc()),u=-1,s=a;return o.next((function(t){return Wo.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Wo.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,Uc())})).next((function(e){return{batchId:u,changes:Rc(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new Oo(t)).next((function(e){var t=Pc();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n,r){var i=this,a=t.collectionGroup,o=Pc();return this.indexManager.getCollectionParents(e,a).next((function(u){return Wo.forEach(u,(function(u){var s=function(e,t){return new sc(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,u.child(a));return i.getDocumentsMatchingCollectionQuery(e,s,n,r).next((function(e){e.forEach((function(e,t){o=o.insert(e,t)}))}))})).next((function(){return o}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n,r){var i,a=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(o){return i=o,a.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)})).next((function(e){i.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,Cs.newInvalidDocument(r)))}));var n=Pc();return e.forEach((function(e,r){var a=i.get(e);void 0!==a&&cl(a.mutation,r,Wu.empty(),Ao.now()),xc(t,r)&&(n=n.insert(e,r))})),n}))}}]),e}(),Jh=function(){function e(t){S(this,e),this.serializer=t,this.lr=new Map,this.hr=new Map}return N(e,[{key:"getBundleMetadata",value:function(e,t){return Wo.resolve(this.lr.get(t))}},{key:"saveBundleMetadata",value:function(e,t){return this.lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Xl(e.createTime)}}(t)),Wo.resolve()}},{key:"getNamedQuery",value:function(e,t){return Wo.resolve(this.hr.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.hr.set(t.name,function(e){return{name:e.name,query:Df(e.bundledQuery),readTime:Xl(e.readTime)}}(t)),Wo.resolve()}}]),e}(),Yh=function(){function e(){S(this,e),this.overlays=new zu(Oo.comparator),this.Pr=new Map}return N(e,[{key:"getOverlay",value:function(e,t){return Wo.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=Dc();return Wo.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.It(e,t,i)})),Wo.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.Pr.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.Pr.delete(n)),Wo.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=Dc(),i=t.length+1,a=new Oo(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Wo.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new zu((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=Dc(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=Dc(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Wo.resolve(s)}},{key:"It",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.Pr.get(r.largestBatchId).delete(n.key);this.Pr.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new xl(t,n));var a=this.Pr.get(t);void 0===a&&(a=Uc(),this.Pr.set(t,a)),this.Pr.set(t,a.add(n.key))}}]),e}(),Xh=function(){function e(){S(this,e),this.Ir=new Ku(Zh.dr),this.Tr=new Ku(Zh.Er)}return N(e,[{key:"isEmpty",value:function(){return this.Ir.isEmpty()}},{key:"addReference",value:function(e,t){var n=new Zh(e,t);this.Ir=this.Ir.add(n),this.Tr=this.Tr.add(n)}},{key:"Ar",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.Rr(new Zh(e,t))}},{key:"Vr",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"mr",value:function(e){var t=this,n=new Oo(new Po([])),r=new Zh(n,e),i=new Zh(n,e+1),a=[];return this.Tr.forEachInRange([r,i],(function(e){t.Rr(e),a.push(e.key)})),a}},{key:"gr",value:function(){var e=this;this.Ir.forEach((function(t){return e.Rr(t)}))}},{key:"Rr",value:function(e){this.Ir=this.Ir.delete(e),this.Tr=this.Tr.delete(e)}},{key:"pr",value:function(e){var t=new Oo(new Po([])),n=new Zh(t,e),r=new Zh(t,e+1),i=Uc();return this.Tr.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new Zh(e,0),n=this.Ir.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),Zh=function(){function e(t,n){S(this,e),this.key=t,this.yr=n}return N(e,null,[{key:"dr",value:function(e,t){return Oo.comparator(e.key,t.key)||Eo(e.yr,t.yr)}},{key:"Er",value:function(e,t){return Eo(e.yr,t.yr)||Oo.comparator(e.key,t.key)}}]),e}(),$h=function(){function e(t,n){S(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.wr=1,this.Sr=new Ku(Zh.dr)}return N(e,[{key:"checkEmpty",value:function(e){return Wo.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new bl(i,t,n,r);this.mutationQueue.push(a);var o,u=b(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this.Sr=this.Sr.add(new Zh(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Wo.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Wo.resolve(this.br(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.Dr(n),i=r<0?0:r;return Wo.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Wo.resolve(0===this.mutationQueue.length?-1:this.wr-1)}},{key:"getAllMutationBatches",value:function(e){return Wo.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new Zh(t,0),i=new Zh(t,Number.POSITIVE_INFINITY),a=[];return this.Sr.forEachInRange([r,i],(function(e){var t=n.br(e.yr);a.push(t)})),Wo.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new Ku(Eo);return t.forEach((function(e){var t=new Zh(e,0),i=new Zh(e,Number.POSITIVE_INFINITY);n.Sr.forEachInRange([t,i],(function(e){r=r.add(e.yr)}))})),Wo.resolve(this.Cr(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;Oo.isDocumentKey(i)||(i=i.child(""));var a=new Zh(new Oo(i),0),o=new Ku(Eo);return this.Sr.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.yr)),!0)}),a),Wo.resolve(this.Cr(o))}},{key:"Cr",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.br(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;co(0===this.vr(t.batchId,"removed")),this.mutationQueue.shift();var r=this.Sr;return Wo.forEach(t.mutations,(function(i){var a=new Zh(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n.Sr=r}))}},{key:"xn",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new Zh(t,0),r=this.Sr.firstAfterOrEqual(n);return Wo.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Wo.resolve()}},{key:"vr",value:function(e,t){return this.Dr(e)}},{key:"Dr",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"br",value:function(e){var t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),ed=function(){function e(t){S(this,e),this.Fr=t,this.docs=new zu(Oo.comparator),this.size=0}return N(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Fr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Wo.resolve(n?n.document.mutableCopy():Cs.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=Cc();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():Cs.newInvalidDocument(e))})),Wo.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=Cc(),a=t.path,o=new Oo(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||qo(jo(l),n)<=0||(r.has(l.key)||xc(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Wo.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){so()}},{key:"Mr",value:function(e,t){return Wo.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new td(this)}},{key:"getSize",value:function(e){return Wo.resolve(this.size)}}]),e}(),td=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this)).ur=e,r}return N(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.ur.addEntry(e,i)):t.ur.removeEntry(r)})),Wo.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.ur.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.ur.getEntries(e,t)}}]),n}(Uh),nd=function(){function e(t){S(this,e),this.persistence=t,this.Or=new Sc((function(e){return nc(e)}),rc),this.lastRemoteSnapshotVersion=Co.min(),this.highestTargetId=0,this.Nr=0,this.Br=new Xh,this.targetCount=0,this.Lr=Th.Bn()}return N(e,[{key:"forEachTarget",value:function(e,t){return this.Or.forEach((function(e,n){return t(n)})),Wo.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Wo.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Wo.resolve(this.Nr)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.Lr.next(),Wo.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Nr&&(this.Nr=t),Wo.resolve()}},{key:"Qn",value:function(e){this.Or.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.Lr=new Th(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Qn(t),this.targetCount+=1,Wo.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Qn(t),Wo.resolve()}},{key:"removeTargetData",value:function(e,t){return this.Or.delete(t.target),this.Br.mr(t.targetId),this.targetCount-=1,Wo.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.Or.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.Or.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Wo.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Wo.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.Or.get(t)||null;return Wo.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.Br.Ar(t,n),Wo.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.Br.Vr(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Wo.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.Br.mr(t),Wo.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.Br.pr(t);return Wo.resolve(n)}},{key:"containsKey",value:function(e,t){return Wo.resolve(this.Br.containsKey(t))}}]),e}(),rd=function(){function e(t,n){var r=this;S(this,e),this.kr={},this.overlays={},this.qr=new ou(0),this.Qr=!1,this.Qr=!0,this.referenceDelegate=t(this),this.Kr=new nd(this),this.indexManager=new sh,this.remoteDocumentCache=function(e){return new ed(e)}((function(e){return r.referenceDelegate.$r(e)})),this.serializer=new Ef(n),this.Ur=new Jh(this.serializer)}return N(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Qr=!1,Promise.resolve()}},{key:"started",get:function(){return this.Qr}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new Yh,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.kr[e.toKey()];return n||(n=new $h(t,this.referenceDelegate),this.kr[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;io("MemoryPersistence","Starting transaction:",e);var i=new id(this.qr.next());return this.referenceDelegate.Wr(),n(i).next((function(e){return r.referenceDelegate.Gr(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"zr",value:function(e,t){return Wo.or(Object.values(this.kr).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),id=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return N(n)}(Ko),ad=function(){function e(t){S(this,e),this.persistence=t,this.jr=new Xh,this.Hr=null}return N(e,[{key:"Yr",get:function(){if(this.Hr)return this.Hr;throw so()}},{key:"addReference",value:function(e,t,n){return this.jr.addReference(n,t),this.Yr.delete(n.toString()),Wo.resolve()}},{key:"removeReference",value:function(e,t,n){return this.jr.removeReference(n,t),this.Yr.add(n.toString()),Wo.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Yr.add(t.toString()),Wo.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.jr.mr(t.targetId).forEach((function(e){return n.Yr.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Yr.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Wr",value:function(){this.Hr=new Set}},{key:"Gr",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wo.forEach(this.Yr,(function(r){var i=Oo.fromPath(r);return t.Zr(e,i).next((function(e){e||n.removeEntry(i,Co.min())}))})).next((function(){return t.Hr=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Zr(e,t).next((function(e){e?n.Yr.delete(t.toString()):n.Yr.add(t.toString())}))}},{key:"$r",value:function(e){return 0}},{key:"Zr",value:function(e,t){var n=this;return Wo.or([function(){return Wo.resolve(n.jr.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.zr(e,t)}])}}],[{key:"Jr",value:function(t){return new e(t)}}]),e}(),od=function(){function e(t){S(this,e),this.serializer=t}return N(e,[{key:"B",value:function(e,t,n,r){var i=this,a=new Jo("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pu,{unique:!0}),e.createObjectStore("documentMutations")}(e),ud(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Wo.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),ud(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Co.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").G().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",pu,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Wo.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.ei(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.ti(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.ni(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.ri(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.ii(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:Cu});t.createIndex("collectionPathOverlayIndex",Nu,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",Pu,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:gu});t.createIndex("documentKeyIndex",ku),t.createIndex("collectionGroupIndex",wu)}(e)})).next((function(){return i.si(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.oi(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Eu}).createIndex("sequenceNumberIndex",Tu,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Su}).createIndex("documentKeyIndex",Au,{unique:!1})}(e)}))),o}},{key:"ti",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=wh(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"ei",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.G().next((function(n){return Wo.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.G("userMutationsIndex",i).next((function(r){return Wo.forEach(r,(function(r){co(r.userId===n.userId);var i=Nf(t.serializer,r);return kh(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"ni",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new Po(n),o=function(e){return[0,lu(e)]}(a);r.push(t.get(o).next((function(n){return n?Wo.resolve():function(n){return t.put({targetId:0,path:lu(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Wo.waitFor(r)}))}))}},{key:"ri",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:Iu});var n=t.store("collectionParents"),r=new ch,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:lu(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new Po(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=h(e,3),r=(n[0],n[1]),a=(n[2],du(r));return i(a.popLast())}))}))}},{key:"ii",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=Pf(r),a=Rf(t.serializer,i);return n.put(a)}))}},{key:"si",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i=t.store("remoteDocumentsV14"),a=function(e){return e.document?new Oo(Po.fromString(e.document.name).popFirst(5)):e.noDocument?Oo.fromSegments(e.noDocument.path):e.unknownDocument?Oo.fromSegments(e.unknownDocument.path):so()}(n).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(o))})).next((function(){return Wo.waitFor(r)}))}},{key:"oi",value:function(e,t){var n=this,r=t.store("mutations"),i=Bh(this.serializer),a=new rd(ad.Jr,this.serializer.ht);return r.G().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:Uc();Nf(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Wo.forEach(r,(function(e,r){var o=new eo(r),u=Bf.Pt(n.serializer,o),s=a.getIndexManager(o),c=bh.Pt(o,n.serializer,s,a.referenceDelegate);return new Wh(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new Fu(t,ou.ae),e).next()}))}))}}]),e}();function ud(e){e.createObjectStore("targetDocuments",{keyPath:_u}).createIndex("documentTargetsIndex",xu,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bu,{unique:!0}),e.createObjectStore("targetGlobal")}var sd="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",cd=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(S(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this._i=a,this.window=o,this.document=u,this.ai=c,this.ui=l,this.ci=f,this.qr=null,this.Qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.li=null,this.inForeground=!1,this.hi=null,this.Pi=null,this.Ii=Number.NEGATIVE_INFINITY,this.di=function(e){return Promise.resolve()},!e.C())throw new ho(fo.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Mh(this,i),this.Ti=n+"main",this.serializer=new Ef(s),this.Ei=new Yo(this.Ti,this.ci,new od(this.serializer)),this.Kr=new Sh(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Bh(this.serializer),this.Ur=new Ff,this.window&&this.window.localStorage?this.Ai=this.window.localStorage:(this.Ai=null,!1===l&&ao("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return N(e,[{key:"start",value:function(){var e=this;return this.Ri().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new ho(fo.FAILED_PRECONDITION,sd);return e.Vi(),e.mi(),e.fi(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Kr.getHighestSequenceNumber(t)}))})).then((function(t){e.qr=new ou(t,e.ai)})).then((function(){e.Qr=!0})).catch((function(t){return e.Ei&&e.Ei.close(),Promise.reject(t)}))}},{key:"gi",value:function(e){var t=this;return this.di=function(){var n=u(a().mark((function n(r){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.Ei.k(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this._i.enqueueAndForget(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.Ri();case 4:case"end":return e.stop()}}),e)})))))}},{key:"Ri",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return fd(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.pi(t).next((function(t){t||(e.isPrimary=!1,e._i.enqueueRetryable((function(){return e.di(!1)})))}))})).next((function(){return e.yi(t)})).next((function(n){return e.isPrimary&&!n?e.wi(t).next((function(){return!1})):!!n&&e.Si(t).next((function(){return!0}))}))})).catch((function(t){if($o(t))return io("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return io("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e._i.enqueueRetryable((function(){return e.di(t)})),e.isPrimary=t}))}},{key:"pi",value:function(e){var t=this;return ld(e).get("owner").next((function(e){return Wo.resolve(t.bi(e))}))}},{key:"Di",value:function(e){return fd(e).delete(this.clientId)}},{key:"Ci",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.vi(this.Ii,18e5)){e.next=6;break}return this.Ii=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=Uu(e,"clientMetadata");return t.G().next((function(e){var n=o.Fi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Wo.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.Ai){n=b(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.Ai.removeItem(this.Mi(i.clientId))}catch(a){n.e(a)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fi",value:function(){var e=this;this.Pi=this._i.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.Ri().then((function(){return e.Ci()})).then((function(){return e.fi()}))}))}},{key:"bi",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"yi",value:function(e){var t=this;return this.ui?Wo.resolve(!0):ld(e).get("owner").next((function(n){if(null!==n&&t.vi(n.leaseTimestampMs,5e3)&&!t.xi(n.ownerId)){if(t.bi(n)&&t.networkEnabled)return!0;if(!t.bi(n)){if(!n.allowTabSynchronization)throw new ho(fo.FAILED_PRECONDITION,sd);return!1}}return!(!t.networkEnabled||!t.inForeground)||fd(e).G().next((function(e){return void 0===t.Fi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&io("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=u(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Qr=!1,this.Oi(),this.Pi&&(this.Pi.cancel(),this.Pi=null),this.Ni(),this.Bi(),e.next=7,this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new Fu(e,ou.ae);return t.wi(n).next((function(){return t.Di(n)}))}));case 7:this.Ei.close(),this.Li();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Fi",value:function(e,t){var n=this;return e.filter((function(e){return n.vi(e.updateTimeMs,t)&&!n.xi(e.clientId)}))}},{key:"ki",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return fd(t).G().next((function(t){return e.Fi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Qr}},{key:"getMutationQueue",value:function(e,t){return bh.Pt(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Kr}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new fh(e,this.serializer.ht.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return Bf.Pt(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.Ur}},{key:"runTransaction",value:function(e,t,n){var r=this;io("IndexedDbPersistence","Starting transaction:",e);var i,a="readonly"===t?"readonly":"readwrite",o=function(e){return 15===e?Mu:14===e?Lu:13===e?Ou:12===e?Du:11===e?Ru:void so()}(this.ci);return this.Ei.runTransaction(e,a,o,(function(a){return i=new Fu(a,r.qr?r.qr.next():ou.ae),"readwrite-primary"===t?r.pi(i).next((function(e){return!!e||r.yi(i)})).next((function(t){if(!t)throw ao("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r._i.enqueueRetryable((function(){return r.di(!1)})),new ho(fo.FAILED_PRECONDITION,Go);return n(i)})).next((function(e){return r.Si(i).next((function(){return e}))})):r.qi(i).next((function(){return n(i)}))})).then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"qi",value:function(e){var t=this;return ld(e).get("owner").next((function(e){if(null!==e&&t.vi(e.leaseTimestampMs,5e3)&&!t.xi(e.ownerId)&&!t.bi(e)&&!(t.ui||t.allowTabSynchronization&&e.allowTabSynchronization))throw new ho(fo.FAILED_PRECONDITION,sd)}))}},{key:"Si",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ld(e).put("owner",t)}},{key:"wi",value:function(e){var t=this,n=ld(e);return n.get("owner").next((function(e){return t.bi(e)?(io("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Wo.resolve()}))}},{key:"vi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(ao("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"Vi",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.hi=function(){e._i.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.Ri()}))},this.document.addEventListener("visibilitychange",this.hi),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ni",value:function(){this.hi&&(this.document.removeEventListener("visibilitychange",this.hi),this.hi=null)}},{key:"mi",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.li=function(){t.Oi();var e=/(?:Version|Mobile)\/1[456]/;!K()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t._i.enterRestrictedMode(!0),t._i.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.li))}},{key:"Bi",value:function(){this.li&&(this.window.removeEventListener("pagehide",this.li),this.li=null)}},{key:"xi",value:function(e){var t;try{var n=null!==(null===(t=this.Ai)||void 0===t?void 0:t.getItem(this.Mi(e)));return io("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return ao("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Oi",value:function(){if(this.Ai)try{this.Ai.setItem(this.Mi(this.clientId),String(Date.now()))}catch(e){ao("Failed to set zombie client id.",e)}}},{key:"Li",value:function(){if(this.Ai)try{this.Ai.removeItem(this.Mi(this.clientId))}catch(e){}}},{key:"Mi",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"C",value:function(){return Yo.C()}}]),e}();function ld(e){return Uu(e,"owner")}function fd(e){return Uu(e,"clientMetadata")}function hd(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var dd=function(){function e(t,n,r,i){S(this,e),this.targetId=t,this.fromCache=n,this.Qi=r,this.Ki=i}return N(e,null,[{key:"$i",value:function(t,n){var r,i=Uc(),a=Uc(),o=b(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),pd=function(){function e(){S(this,e),this._documentReadCount=0}return N(e,[{key:"documentReadCount",get:function(){return this._documentReadCount}},{key:"incrementDocumentReadCount",value:function(e){this._documentReadCount+=e}}]),e}(),vd=function(){function e(){S(this,e),this.Ui=!1,this.Wi=!1,this.Gi=100,this.zi=8}return N(e,[{key:"initialize",value:function(e,t){this.ji=e,this.indexManager=t,this.Ui=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a={result:null};return this.Hi(e,t).next((function(e){a.result=e})).next((function(){if(!a.result)return i.Ji(e,t,r,n).next((function(e){a.result=e}))})).next((function(){if(!a.result){var n=new pd;return i.Yi(e,t,n).next((function(r){if(a.result=r,i.Wi)return i.Zi(e,t,n,r.size)}))}})).next((function(){return a.result}))}},{key:"Zi",value:function(e,t,n,r){return n.documentReadCount<this.Gi?(ro()<=pe.DEBUG&&io("QueryEngine","SDK will not create cache indexes for query:",_c(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Gi,"documents"),Wo.resolve()):(ro()<=pe.DEBUG&&io("QueryEngine","Query:",_c(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.zi*r?(ro()<=pe.DEBUG&&io("QueryEngine","The SDK decides to create cache indexes for query:",_c(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yc(t))):Wo.resolve())}},{key:"Hi",value:function(e,t){var n=this;if(fc(t))return Wo.resolve(null);var r=yc(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=kc(t,null,"F"),r=yc(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=Uc.apply(void 0,T(i));return n.ji.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.Xi(t,i);return n.es(t,o,a,r.readTime)?n.Hi(e,kc(t,null,"F")):n.ts(e,o,t,r)}))}))})))}))}},{key:"Ji",value:function(e,t,n,r){var i=this;return fc(t)||r.isEqual(Co.min())?Wo.resolve(null):this.ji.getDocuments(e,n).next((function(a){var o=i.Xi(t,a);return i.es(t,o,n,r)?Wo.resolve(null):(ro()<=pe.DEBUG&&io("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_c(t)),i.ts(e,o,t,Bo(r,-1)).next((function(e){return e})))}))}},{key:"Xi",value:function(e,t){var n=new Ku(Ec(e));return t.forEach((function(t,r){xc(e,r)&&(n=n.add(r))})),n}},{key:"es",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Yi",value:function(e,t,n){return ro()<=pe.DEBUG&&io("QueryEngine","Using full collection scan to execute query:",_c(t)),this.ji.getDocumentsMatchingQuery(e,t,zo.min(),n)}},{key:"ts",value:function(e,t,n,r){return this.ji.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),yd=function(){function e(t,n,r,i){S(this,e),this.persistence=t,this.ns=n,this.serializer=i,this.rs=new zu(Eo),this.ss=new Sc((function(e){return nc(e)}),rc),this.os=new Map,this._s=t.getRemoteDocumentCache(),this.Kr=t.getTargetCache(),this.Ur=t.getBundleCache(),this.us(r)}return N(e,[{key:"us",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Wh(this._s,this.mutationQueue,this.documentOverlayCache,this.indexManager),this._s.setIndexManager(this.indexManager),this.ns.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.rs)}))}}]),e}();function md(e,t,n,r){return new yd(e,t,n,r)}function gd(e,t){return kd.apply(this,arguments)}function kd(){return kd=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lo(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.us(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=Uc(),s=b(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=b(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,p=b(n);try{for(p.s();!(d=p.n()).done;){var v=d.value;o.push(v.batchId);var y,m=b(v.mutations);try{for(m.s();!(y=m.n()).done;){var g=y.value;u=u.add(g.key)}}catch(k){m.e(k)}finally{m.f()}}}catch(k){p.e(k)}finally{p.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{cs:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),kd.apply(this,arguments)}function wd(e,t){var n=lo(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n._s.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Wo.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);co(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=Uc(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function bd(e){var t=lo(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Kr.getLastRemoteSnapshotVersion(e)}))}function _d(e,t){var n=lo(e),r=t.snapshotVersion,i=n.rs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n._s.newChangeBuffer({trackRemovals:!0});i=n.rs;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Kr.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Kr.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(u)?c=c.withResumeToken(Yu.EMPTY_BYTE_STRING,Co.min()).withLastLimboFreeSnapshotVersion(Co.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Kr.updateTargetData(e,c))}}));var u=Cc(),s=Uc();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(xd(e,a,t.documentUpdates).next((function(e){u=e.ls,s=e.hs}))),!r.isEqual(Co.min())){var c=n.Kr.getLastRemoteSnapshotVersion(e).next((function(t){return n.Kr.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Wo.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.rs=i,e}))}function xd(e,t,n){var r=Uc(),i=Uc();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=Cc();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(Co.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):io("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{ls:r,hs:i}}))}function Id(e,t){var n=lo(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Ed(e,t){var n=lo(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Kr.getTargetData(e,t).next((function(i){return i?(r=i,Wo.resolve(r)):n.Kr.allocateTargetId(e).next((function(i){return r=new If(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Kr.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.rs.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.rs=n.rs.insert(e.targetId,e),n.ss.set(t,e.targetId)),e}))}function Td(e,t,n){return Sd.apply(this,arguments)}function Sd(){return Sd=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=lo(t),o=i.rs.get(n),u=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",u,(function(e){return i.persistence.referenceDelegate.removeTarget(e,o)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),$o(e.t1)){e.next=12;break}throw e.t1;case 12:io("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.rs=i.rs.remove(n),i.ss.delete(o.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Sd.apply(this,arguments)}function Ad(e,t,n){var r=lo(e),i=Co.min(),a=Uc();return r.persistence.runTransaction("Execute query","readwrite",(function(e){return function(e,t,n){var r=lo(e),i=r.ss.get(n);return void 0!==i?Wo.resolve(r.rs.get(i)):r.Kr.getTargetData(t,n)}(r,e,yc(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Kr.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.ns.getDocumentsMatchingQuery(e,t,n?i:Co.min(),n?a:Uc())})).next((function(e){return Pd(r,Ic(t),e),{documents:e,Ps:a}}))}))}function Cd(e,t){var n=lo(e),r=lo(n.Kr),i=n.rs.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.lt(e,t).next((function(e){return e?e.target:null}))}))}function Nd(e,t){var n=lo(e),r=n.os.get(t)||Co.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n._s.getAllFromCollectionGroup(e,t,Bo(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Pd(n,t,e),e}))}function Pd(e,t,n){var r=e.os.get(t)||Co.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.os.set(t,r)}function Rd(e,t,n,r){return Dd.apply(this,arguments)}function Dd(){return Dd=u(a().mark((function e(t,n,r,i){var o,u,s,c,l,f,h,d,p,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:o=lo(t),u=Uc(),s=Cc(),c=b(r);try{for(c.s();!(l=c.n()).done;)f=l.value,h=n.Is(f.metadata.name),f.document&&(u=u.add(h)),(d=n.ds(f)).setReadTime(n.Ts(f.metadata.readTime)),s=s.insert(h,d)}catch(a){c.e(a)}finally{c.f()}return p=o._s.newChangeBuffer({trackRemovals:!0}),e.next=7,Ed(o,function(e){return yc(lc(Po.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return v=e.sent,e.abrupt("return",o.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return xd(e,p,s).next((function(t){return p.apply(e),t})).next((function(t){return o.Kr.removeMatchingKeysForTargetId(e,v.targetId).next((function(){return o.Kr.addMatchingKeys(e,u,v.targetId)})).next((function(){return o.localDocuments.getLocalViewOfDocuments(e,t.ls,t.hs)})).next((function(){return t.ls}))}))})));case 9:case"end":return e.stop()}}),e)}))),Dd.apply(this,arguments)}function Od(e,t){return Ld.apply(this,arguments)}function Ld(){return Ld=u(a().mark((function e(t,n){var r,i,o,u=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=u.length>2&&void 0!==u[2]?u[2]:Uc(),e.next=3,Ed(t,yc(Df(n.bundledQuery)));case 3:return i=e.sent,o=lo(t),e.abrupt("return",o.persistence.runTransaction("Save named query","readwrite",(function(e){var t=Xl(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return o.Ur.saveNamedQuery(e,n);var a=i.withResumeToken(Yu.EMPTY_BYTE_STRING,t);return o.rs=o.rs.insert(a.targetId,a),o.Kr.updateTargetData(e,a).next((function(){return o.Kr.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return o.Kr.addMatchingKeys(e,r,i.targetId)})).next((function(){return o.Ur.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Ld.apply(this,arguments)}function Md(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function Fd(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function Ud(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var Vd=function(){function e(t,n,r,i){S(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return N(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new ho(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(ao("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),Bd=function(){function e(t,n,r){S(this,e),this.targetId=t,this.state=n,this.error=r}return N(e,[{key:"As",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Es",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new ho(i.error.code,i.error.message))),a?new e(t,i.state,r):(ao("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),jd=function(){function e(t,n){S(this,e),this.clientId=t,this.activeTargetIds=n}return N(e,null,[{key:"Es",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=Bc(),o=0;i&&o<r.activeTargetIds.length;++o)i=cu(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(ao("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),zd=function(){function e(t,n){S(this,e),this.clientId=t,this.onlineState=n}return N(e,null,[{key:"Es",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(ao("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),qd=function(){function e(){S(this,e),this.activeTargetIds=Bc()}return N(e,[{key:"Rs",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"Vs",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"As",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),Gd=function(){function e(t,n,r,i,a){S(this,e),this.window=t,this._i=n,this.persistenceKey=r,this.fs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.gs=this.ps.bind(this),this.ys=new zu(Eo),this.started=!1,this.ws=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Ss=Md(this.persistenceKey,this.fs),this.bs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.ys=this.ys.insert(this.fs,new qd),this.Ds=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.Cs=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.vs=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.Fs=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ms=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.gs)}return N(e,[{key:"start",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o,u,s,c,l,f,h,d=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.ki();case 2:t=e.sent,n=b(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.fs){e.next=10;break}return e.abrupt("continue",12);case 10:(o=this.getItem(Md(this.persistenceKey,i)))&&(u=jd.Es(i,o))&&(this.ys=this.ys.insert(u.clientId,u));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.xs(),(s=this.storage.getItem(this.Fs))&&(c=this.Os(s))&&this.Ns(c),l=b(this.ws);try{for(l.s();!(f=l.n()).done;)h=f.value,this.ps(h)}catch(a){l.e(a)}finally{l.f()}this.ws=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.bs,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.Bs(this.ys)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.ys.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ls(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ls(e,t,n),this.ks(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(Ud(this.persistenceKey,e));if(n){var r=Bd.Es(e,n);r&&(t=r.state)}}return this.qs.Rs(e),this.xs(),t}},{key:"removeLocalQueryTarget",value:function(e){this.qs.Vs(e),this.xs()}},{key:"isLocalQueryTarget",value:function(e){return this.qs.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(Ud(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Qs(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.ks(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Ks(e)}},{key:"notifyBundleLoaded",value:function(e){this.$s(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.gs),this.removeItem(this.Ss),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return io("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){io("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){io("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ps",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(io("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Ss)return void ao("Received WebStorage notification for local change. Another client might have garbage-collected our state");this._i.enqueueRetryable(u(a().mark((function e(){var r,i,o,u,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.Ds.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.Us(n.key),e.abrupt("return",t.Ws(r,null));case 6:if(!(i=t.Gs(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Ws(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.Cs.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(o=t.zs(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.js(o));case 16:e.next=41;break;case 18:if(!t.vs.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(u=t.Hs(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Js(u));case 23:e.next=41;break;case 25:if(n.key!==t.Fs){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(s=t.Os(n.newValue))){e.next=30;break}return e.abrupt("return",t.Ns(s));case 30:e.next=41;break;case 32:if(n.key!==t.bs){e.next=37;break}c=function(e){var t=ou.ae;if(null!=e)try{var n=JSON.parse(e);co("number"==typeof n),t=n}catch(e){ao("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),c!==ou.ae&&t.sequenceNumberHandler(c),e.next=41;break;case 37:if(n.key!==t.Ms){e.next=41;break}return l=t.Ys(n.newValue),e.next=41,Promise.all(l.map((function(e){return t.syncEngine.Zs(e)})));case 41:e.next=44;break;case 43:t.ws.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"qs",get:function(){return this.ys.get(this.fs)}},{key:"xs",value:function(){this.setItem(this.Ss,this.qs.As())}},{key:"Ls",value:function(e,t,n){var r=new Vd(this.currentUser,e,t,n),i=Fd(this.persistenceKey,this.currentUser,e);this.setItem(i,r.As())}},{key:"ks",value:function(e){var t=Fd(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Ks",value:function(e){var t={clientId:this.fs,onlineState:e};this.storage.setItem(this.Fs,JSON.stringify(t))}},{key:"Qs",value:function(e,t,n){var r=Ud(this.persistenceKey,e),i=new Bd(e,t,n);this.setItem(r,i.As())}},{key:"$s",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this.Ms,t)}},{key:"Us",value:function(e){var t=this.Ds.exec(e);return t?t[1]:null}},{key:"Gs",value:function(e,t){var n=this.Us(e);return jd.Es(n,t)}},{key:"zs",value:function(e,t){var n=this.Cs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Vd.Es(new eo(i),r,t)}},{key:"Hs",value:function(e,t){var n=this.vs.exec(e),r=Number(n[1]);return Bd.Es(r,t)}},{key:"Os",value:function(e){return zd.Es(e)}},{key:"Ys",value:function(e){return JSON.parse(e)}},{key:"js",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.Xs(t.batchId,t.state,t.error));case 2:io("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Js",value:function(e){return this.syncEngine.eo(e.targetId,e.state,e.error)}},{key:"Ws",value:function(e,t){var n=this,r=t?this.ys.insert(e,t):this.ys.remove(e),i=this.Bs(this.ys),a=this.Bs(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.no(o,u).then((function(){n.ys=r}))}},{key:"Ns",value:function(e){this.ys.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"Bs",value:function(e){var t=Bc();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"C",value:function(e){return!(!e||!e.localStorage)}}]),e}(),Kd=function(){function e(){S(this,e),this.ro=new qd,this.io={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return N(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.ro.Rs(e),this.io[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.io[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.ro.Vs(e)}},{key:"isLocalQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.io[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.ro.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.ro.activeTargetIds.has(e)}},{key:"start",value:function(){return this.ro=new qd,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),Hd=function(){function e(){S(this,e)}return N(e,[{key:"so",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),Qd=function(){function e(){var t=this;S(this,e),this.oo=function(){return t._o()},this.ao=function(){return t.uo()},this.co=[],this.lo()}return N(e,[{key:"so",value:function(e){this.co.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.oo),window.removeEventListener("offline",this.ao)}},{key:"lo",value:function(){window.addEventListener("online",this.oo),window.addEventListener("offline",this.ao)}},{key:"_o",value:function(){io("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=b(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"uo",value:function(){io("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=b(this.co);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"C",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),Wd=null;function Jd(){return null===Wd?Wd=268435456+Math.round(2147483648*Math.random()):Wd++,"0x"+Wd.toString(16)}var Yd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},Xd=function(){function e(t){S(this,e),this.ho=t.ho,this.Po=t.Po}return N(e,[{key:"Io",value:function(e){this.To=e}},{key:"Eo",value:function(e){this.Ao=e}},{key:"onMessage",value:function(e){this.Ro=e}},{key:"close",value:function(){this.Po()}},{key:"send",value:function(e){this.ho(e)}},{key:"Vo",value:function(){this.To()}},{key:"mo",value:function(e){this.Ao(e)}},{key:"fo",value:function(e){this.Ro(e)}}]),e}(),Zd="WebChannelConnection",$d=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r.longPollingOptions=e.longPollingOptions,r}return N(n,[{key:"vo",value:function(e,t,n,r){var i=Jd();return new Promise((function(a,o){var u=new Ya;u.setWithCredentials(!0),u.listenOnce(Ha.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case Ka.NO_ERROR:var t=u.getResponseJson();io(Zd,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case Ka.TIMEOUT:io(Zd,"RPC '".concat(e,"' ").concat(i," timed out")),o(new ho(fo.DEADLINE_EXCEEDED,"Request time out"));break;case Ka.HTTP_ERROR:var n=u.getStatus();if(io(Zd,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(fo).indexOf(t)>=0?t:fo.UNKNOWN}(s.status);o(new ho(c,s.message))}else o(new ho(fo.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new ho(fo.UNAVAILABLE,"Connection failed."));break;default:so()}}finally{io(Zd,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);io(Zd,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"Mo",value:function(e,t,n){var r=Jd(),i=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=qa(),o=Ga(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(u.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Co(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var c=i.join("");io(Zd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),u);var l=a.createWebChannel(c,u),f=!1,h=!1,d=new Xd({ho:function(t){h?io(Zd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(f||(io(Zd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),l.open(),f=!0),io(Zd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),l.send(t))},Po:function(){return l.close()}}),p=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return p(l,Ja.EventType.OPEN,(function(){h||io(Zd,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),p(l,Ja.EventType.CLOSE,(function(){h||(h=!0,io(Zd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),d.mo())})),p(l,Ja.EventType.ERROR,(function(t){h||(h=!0,oo(Zd,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),d.mo(new ho(fo.UNAVAILABLE,"The operation could not be completed")))})),p(l,Ja.EventType.MESSAGE,(function(t){var n;if(!h){var i=t.data[0];co(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){io(Zd,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=ml[e];if(void 0!==t)return Tl(t)}(u),c=o.message;void 0===s&&(s=fo.INTERNAL,c="Unknown error status: "+u+" with message "+o.message),h=!0,d.mo(new ho(s,c)),l.close()}else io(Zd,"RPC '".concat(e,"' stream ").concat(r," received:"),i),d.fo(i)}})),p(o,Qa.STAT_EVENT,(function(t){t.stat===Wa.PROXY?io(Zd,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Wa.NOPROXY&&io(Zd,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){d.Vo()}),0),d}}]),n}(function(){function e(t){S(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.po=n+"://"+t.host,this.yo="projects/".concat(r,"/databases/").concat(i),this.wo="(default)"===this.databaseId.database?"project_id=".concat(r):"project_id=".concat(r,"&database_id=").concat(i)}return N(e,[{key:"So",get:function(){return!1}},{key:"bo",value:function(e,t,n,r,i){var a=Jd(),o=this.Do(e,t);io("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Co(u,r,i),this.vo(e,o,u,n).then((function(t){return io("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw oo("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"Fo",value:function(e,t,n,r,i,a){return this.bo(e,t,n,r,i)}},{key:"Co",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+to,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"Do",value:function(e,t){var n=Yd[e];return"".concat(this.po,"/v1/").concat(t,":").concat(n)}}]),e}());function ep(){return"undefined"!=typeof window?window:null}function tp(){return"undefined"!=typeof document?document:null}function np(e){return new Hl(e,!0)}var rp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;S(this,e),this._i=t,this.timerId=n,this.xo=r,this.Oo=i,this.No=a,this.Bo=0,this.Lo=null,this.ko=Date.now(),this.reset()}return N(e,[{key:"reset",value:function(){this.Bo=0}},{key:"qo",value:function(){this.Bo=this.No}},{key:"Qo",value:function(e){var t=this;this.cancel();var n=Math.floor(this.Bo+this.Ko()),r=Math.max(0,Date.now()-this.ko),i=Math.max(0,n-r);i>0&&io("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.Bo," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Lo=this._i.enqueueAfterDelay(this.timerId,i,(function(){return t.ko=Date.now(),e()})),this.Bo*=this.Oo,this.Bo<this.xo&&(this.Bo=this.xo),this.Bo>this.No&&(this.Bo=this.No)}},{key:"$o",value:function(){null!==this.Lo&&(this.Lo.skipDelay(),this.Lo=null)}},{key:"cancel",value:function(){null!==this.Lo&&(this.Lo.cancel(),this.Lo=null)}},{key:"Ko",value:function(){return(Math.random()-.5)*this.Bo}}]),e}(),ip=function(){function e(t,n,r,i,a,o,u,s){S(this,e),this._i=t,this.Uo=r,this.Wo=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Go=0,this.zo=null,this.jo=null,this.stream=null,this.Ho=new rp(t,n)}return N(e,[{key:"Jo",value:function(){return 1===this.state||5===this.state||this.Yo()}},{key:"Yo",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.Zo()}},{key:"stop",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.Jo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Xo",value:function(){this.state=0,this.Ho.reset()}},{key:"e_",value:function(){var e=this;this.Yo()&&null===this.zo&&(this.zo=this._i.enqueueAfterDelay(this.Uo,6e4,(function(){return e.t_()})))}},{key:"n_",value:function(e){this.r_(),this.stream.send(e)}},{key:"t_",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.Yo()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"r_",value:function(){this.zo&&(this.zo.cancel(),this.zo=null)}},{key:"i_",value:function(){this.jo&&(this.jo.cancel(),this.jo=null)}},{key:"close",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.r_(),this.i_(),this.Ho.cancel(),this.Go++,4!==t?this.Ho.reset():n&&n.code===fo.RESOURCE_EXHAUSTED?(ao(n.toString()),ao("Using maximum backoff delay to prevent overloading the backend."),this.Ho.qo()):n&&n.code===fo.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.s_(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Eo(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"s_",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.o_(this.Go),n=this.Go;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=h(t,2),i=r[0],a=r[1];e.Go===n&&e.__(i,a)}),(function(n){t((function(){var t=new ho(fo.UNKNOWN,"Fetching auth token failed: "+n.message);return e.a_(t)}))}))}},{key:"__",value:function(e,t){var n=this,r=this.o_(this.Go);this.stream=this.u_(e,t),this.stream.Io((function(){r((function(){return n.state=2,n.jo=n._i.enqueueAfterDelay(n.Wo,1e4,(function(){return n.Yo()&&(n.state=3),Promise.resolve()})),n.listener.Io()}))})),this.stream.Eo((function(e){r((function(){return n.a_(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"Zo",value:function(){var e=this;this.state=5,this.Ho.Qo(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"a_",value:function(e){return io("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"o_",value:function(e){var t=this;return function(n){t._i.enqueueAndForget((function(){return t.Go===e?n():(io("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),ap=function(e){_(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return S(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return N(n,[{key:"u_",value:function(e,t){return this.connection.Mo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Ho.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:so()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(co(void 0===t||"string"==typeof t),Yu.fromBase64String(t||"")):(co(void 0===t||t instanceof Uint8Array),Yu.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?fo.UNKNOWN:Tl(e.code);return new ho(t,e.message||"")}(o);n=new Ul(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=tf(e,s.document.name),l=Xl(s.document.updateTime),f=s.document.createTime?Xl(s.document.createTime):Co.min(),h=new Ss({mapValue:{fields:s.document.fields}}),d=Cs.newFoundDocument(c,l,f,h),p=s.targetIds||[],v=s.removedTargetIds||[];n=new Ml(p,v,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=tf(e,y.document),g=y.readTime?Xl(y.readTime):Co.min(),k=Cs.newNoDocument(m,g),w=y.removedTargetIds||[];n=new Ml([],w,k.key,k)}else if("documentRemove"in t){t.documentRemove;var b=t.documentRemove;b.document;var _=tf(e,b.document),x=b.removedTargetIds||[];n=new Ml([],x,_,null)}else{if(!("filter"in t))return so();t.filter;var I=t.filter;I.targetId;var E=I.count,T=void 0===E?0:E,S=I.unchangedNames,A=new Il(T,S),C=I.targetId;n=new Fl(C,A)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Co.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?Co.min():t.readTime?Xl(t.readTime):Co.min()}(e);return this.listener.c_(t,n)}},{key:"l_",value:function(e){var t={};t.database=af(this.serializer),t.addTarget=function(e,t){var n,r=t.target;if((n=ic(r)?{documents:hf(e,r)}:{query:df(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Jl(e,t.resumeToken);var i=Ql(e,t.expectedCount);null!==i&&(n.expectedCount=i)}else if(t.snapshotVersion.compareTo(Co.min())>0){n.readTime=Wl(e,t.snapshotVersion.toTimestamp());var a=Ql(e,t.expectedCount);null!==a&&(n.expectedCount=a)}return n}(this.serializer,e);var n=function(e,t){var n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return so()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.n_(t)}},{key:"h_",value:function(e){var t={};t.database=af(this.serializer),t.removeTarget=e,this.n_(t)}}]),n}(ip),op=function(e){_(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return S(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.P_=!1,s}return N(n,[{key:"I_",get:function(){return this.P_}},{key:"start",value:function(){this.P_=!1,this.lastStreamToken=void 0,k(g(n.prototype),"start",this).call(this)}},{key:"s_",value:function(){this.P_&&this.d_([])}},{key:"u_",value:function(e,t){return this.connection.Mo("Write",e,t)}},{key:"onMessage",value:function(e){if(co(!!e.streamToken),this.lastStreamToken=e.streamToken,this.P_){this.Ho.reset();var t=function(e,t){return e&&e.length>0?(co(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?Xl(e.updateTime):Xl(t);return n.isEqual(Co.min())&&(n=Xl(t)),new rl(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=Xl(e.commitTime);return this.listener.T_(n,t)}return co(!e.writeResults||0===e.writeResults.length),this.P_=!0,this.listener.E_()}},{key:"A_",value:function(){var e={};e.database=af(this.serializer),this.n_(e)}},{key:"d_",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return lf(t.serializer,e)}))};this.n_(n)}}]),n}(ip),up=function(e){_(n,e);var t=I(n);function n(e,r,i,a){var o;return S(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.R_=!1,o}return N(n,[{key:"V_",value:function(){if(this.R_)throw new ho(fo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"bo",value:function(e,t,n){var r=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=h(i,2),o=a[0],u=a[1];return r.connection.bo(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===fo.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new ho(fo.UNKNOWN,e.toString())}))}},{key:"Fo",value:function(e,t,n,r){var i=this;return this.V_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=h(a,2),u=o[0],s=o[1];return i.connection.Fo(e,t,n,u,s,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===fo.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new ho(fo.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.R_=!0}}]),n}(N((function e(){S(this,e)})));var sp=function(){function e(t,n){S(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.f_=0,this.g_=null,this.p_=!0}return N(e,[{key:"y_",value:function(){var e=this;0===this.f_&&(this.w_("Unknown"),this.g_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.g_=null,e.S_("Backend didn't respond within 10 seconds."),e.w_("Offline"),Promise.resolve()})))}},{key:"b_",value:function(e){"Online"===this.state?this.w_("Unknown"):(this.f_++,this.f_>=1&&(this.D_(),this.S_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.w_("Offline")))}},{key:"set",value:function(e){this.D_(),this.f_=0,"Online"===e&&(this.p_=!1),this.w_(e)}},{key:"w_",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"S_",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.p_?(ao(t),this.p_=!1):io("OnlineStateTracker",t)}},{key:"D_",value:function(){null!==this.g_&&(this.g_.cancel(),this.g_=null)}}]),e}(),cp=N((function e(t,n,r,i,o){var s=this;S(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.C_=[],this.v_=new Map,this.F_=new Set,this.M_=[],this.x_=o,this.x_.so((function(e){r.enqueueAndForget(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=wp(s),!e.t0){e.next=5;break}return io("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=lo(t)).F_.add(4),e.next=4,hp(n);case 4:return n.O_.set("Unknown"),n.F_.delete(4),e.next=8,lp(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(s);case 5:case"end":return e.stop()}}),e)}))))})),this.O_=new sp(r,i)}));function lp(e){return fp.apply(this,arguments)}function fp(){return(fp=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!wp(t)){e.next=18;break}n=b(t.M_),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])})))).apply(this,arguments)}function hp(e){return dp.apply(this,arguments)}function dp(){return(dp=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b(t.M_),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])})))).apply(this,arguments)}function pp(e,t){var n=lo(e);n.v_.has(t.targetId)||(n.v_.set(t.targetId,t),kp(n)?gp(n):Jp(n).Yo()&&yp(n,t))}function vp(e,t){var n=lo(e),r=Jp(n);n.v_.delete(t),r.Yo()&&mp(n,t),0===n.v_.size&&(r.Yo()?r.e_():wp(n)&&n.O_.set("Unknown"))}function yp(e,t){if(e.N_.Le(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Co.min())>0){var n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Jp(e).l_(t)}function mp(e,t){e.N_.Le(t),Jp(e).h_(t)}function gp(e){e.N_=new Bl({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},lt:function(t){return e.v_.get(t)||null},st:function(){return e.datastore.serializer.databaseId}}),Jp(e).start(),e.O_.y_()}function kp(e){return wp(e)&&!Jp(e).Jo()&&e.v_.size>0}function wp(e){return 0===lo(e).F_.size}function bp(e){e.N_=void 0}function _p(e){return xp.apply(this,arguments)}function xp(){return(xp=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.v_.forEach((function(e,n){yp(t,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ip(e,t){return Ep.apply(this,arguments)}function Ep(){return(Ep=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:bp(t),kp(t)?(t.O_.b_(n),gp(t)):t.O_.set("Unknown");case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Tp(e,t,n){return Sp.apply(this,arguments)}function Sp(){return Sp=u(a().mark((function e(t,n,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.O_.set("Online"),!(n instanceof Ul&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=b(n.targetIds),e.prev=2,i.s();case 4:if((o=i.n()).done){e.next=14;break}if(u=o.value,e.t0=t.v_.has(u),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(u,r);case 10:t.v_.delete(u),t.N_.removeTarget(u);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),io("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Ap(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof Ml?t.N_.Ge(n):n instanceof Fl?t.N_.Xe(n):t.N_.He(n),r.isEqual(Co.min())){e.next=29;break}return e.prev=14,e.next=17,bd(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.N_._t(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.v_.get(r);i&&e.v_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t,n){var r=e.v_.get(t);if(r){e.v_.set(t,r.withResumeToken(Yu.EMPTY_BYTE_STRING,r.snapshotVersion)),mp(e,t);var i=new If(r.target,t,n,r.sequenceNumber);yp(e,i)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),io("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Ap(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Sp.apply(this,arguments)}function Ap(e,t,n){return Cp.apply(this,arguments)}function Cp(){return(Cp=u(a().mark((function e(t,n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($o(n)){e.next=2;break}throw n;case 2:return t.F_.add(1),e.next=5,hp(t);case 5:t.O_.set("Offline"),r||(r=function(){return bd(t.localStore)}),t.asyncQueue.enqueueRetryable(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return io("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.F_.delete(1),e.next=6,lp(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Np(e,t){return t().catch((function(n){return Ap(e,n,t)}))}function Pp(e){return Rp.apply(this,arguments)}function Rp(){return Rp=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=lo(t),r=Yp(n),i=n.C_.length>0?n.C_[n.C_.length-1].batchId:-1;case 2:if(!Dp(n)){e.next=19;break}return e.prev=3,e.next=6,Id(n.localStore,i);case 6:if(null!==(o=e.sent)){e.next=10;break}return 0===n.C_.length&&r.e_(),e.abrupt("break",19);case 10:i=o.batchId,Op(n,o),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Ap(n,e.t0);case 17:e.next=2;break;case 19:Lp(n)&&Mp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Rp.apply(this,arguments)}function Dp(e){return wp(e)&&e.C_.length<10}function Op(e,t){e.C_.push(t);var n=Yp(e);n.Yo()&&n.I_&&n.d_(t.mutations)}function Lp(e){return wp(e)&&!Yp(e).Jo()&&e.C_.length>0}function Mp(e){Yp(e).start()}function Fp(e){return Up.apply(this,arguments)}function Up(){return(Up=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Yp(t).A_();case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vp(e){return Bp.apply(this,arguments)}function Bp(){return(Bp=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Yp(t),r=b(t.C_);try{for(r.s();!(i=r.n()).done;)o=i.value,n.d_(o.mutations)}catch(a){r.e(a)}finally{r.f()}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jp(e,t,n){return zp.apply(this,arguments)}function zp(){return zp=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.C_.shift(),o=_l.from(i,n,r),e.next=3,Np(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}));case 3:return e.next=5,Pp(t);case 5:case"end":return e.stop()}}),e)}))),zp.apply(this,arguments)}function qp(e,t){return Gp.apply(this,arguments)}function Gp(){return Gp=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&Yp(t).I_,!e.t0){e.next=4;break}return e.next=4,function(){var e=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!function(e){return El(e)&&e!==fo.ABORTED}(n.code)){e.next=7;break}return r=t.C_.shift(),Yp(t).Xo(),e.next=5,Np(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Pp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Lp(t)&&Mp(t);case 5:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}function Kp(e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=lo(t)).asyncQueue.verifyOperationInProgress(),io("RemoteStore","RemoteStore received new credentials"),i=wp(r),r.F_.add(3),e.next=6,hp(r);case 6:return i&&r.O_.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.F_.delete(3),e.next=12,lp(r);case 12:case"end":return e.stop()}}),e)}))),Hp.apply(this,arguments)}function Qp(e,t){return Wp.apply(this,arguments)}function Wp(){return(Wp=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lo(t),!n){e.next=7;break}return r.F_.delete(2),e.next=5,lp(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.F_.add(2),e.next=12,hp(r);case 12:r.O_.set("Unknown");case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Jp(e){return e.B_||(e.B_=function(e,t,n){var r=lo(e);return r.V_(),new ap(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:_p.bind(null,e),Eo:Ip.bind(null,e),c_:Tp.bind(null,e)}),e.M_.push(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.B_.Xo(),kp(e)?gp(e):e.O_.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.B_.stop();case 6:bp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.B_}function Yp(e){return e.L_||(e.L_=function(e,t,n){var r=lo(e);return r.V_(),new op(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Io:Fp.bind(null,e),Eo:qp.bind(null,e),E_:Vp.bind(null,e),T_:jp.bind(null,e)}),e.M_.push(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.L_.Xo(),t.next=4,Pp(e);case 4:t.next=9;break;case 6:return t.next=8,e.L_.stop();case 8:e.C_.length>0&&(io("RemoteStore","Stopping write stream with ".concat(e.C_.length," pending writes")),e.C_=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.L_}var Xp=function(){function e(t,n,r,i,a){S(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new po,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return N(e,[{key:"promise",get:function(){return this.deferred.promise}},{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new ho(fo.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function Zp(e,t){if(ao("AsyncQueue","".concat(t,": ").concat(e)),$o(e))return new ho(fo.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var $p=function(){function e(t){S(this,e),this.comparator=t?function(e,n){return t(e,n)||Oo.comparator(e.key,n.key)}:function(e,t){return Oo.comparator(e.key,t.key)},this.keyedMap=Pc(),this.sortedSet=new zu(this.comparator)}return N(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),ev=function(){function e(){S(this,e),this.k_=new zu(Oo.comparator)}return N(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.k_.get(t);n?0!==e.type&&3===n.type?this.k_=this.k_.insert(t,e):3===e.type&&1!==n.type?this.k_=this.k_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.k_=this.k_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.k_=this.k_.remove(t):1===e.type&&2===n.type?this.k_=this.k_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.k_=this.k_.insert(t,{type:2,doc:e.doc}):so():this.k_=this.k_.insert(t,e)}},{key:"q_",value:function(){var e=[];return this.k_.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),tv=function(){function e(t,n,r,i,a,o,u,s,c){S(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return N(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,$p.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),nv=N((function e(){S(this,e),this.Q_=void 0,this.listeners=[]})),rv=N((function e(){S(this,e),this.queries=new Sc((function(e){return bc(e)}),wc),this.onlineState="Unknown",this.K_=new Set}));function iv(e,t){return av.apply(this,arguments)}function av(){return av=u(a().mark((function e(t,n){var r,i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lo(t),i=n.query,o=!1,(u=r.queries.get(i))||(o=!0,u=new nv),!o){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:u.Q_=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),s=Zp(e.t0,"Initialization of query '".concat(_c(n.query),"' failed")),e.abrupt("return",void n.onError(s));case 13:r.queries.set(i,u),u.listeners.push(n),n.U_(r.onlineState),u.Q_&&n.W_(u.Q_)&&lv(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),av.apply(this,arguments)}function ov(e,t){return uv.apply(this,arguments)}function uv(){return uv=u(a().mark((function e(t,n){var r,i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lo(t),i=n.query,o=!1,(u=r.queries.get(i))&&(s=u.listeners.indexOf(n))>=0&&(u.listeners.splice(s,1),o=0===u.listeners.length),!o){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),uv.apply(this,arguments)}function sv(e,t){var n,r=lo(e),i=!1,a=b(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=b(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.W_(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Q_=o}}}catch(f){a.e(f)}finally{a.f()}i&&lv(r)}function cv(e,t,n){var r=lo(e),i=r.queries.get(t);if(i){var a,o=b(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function lv(e){e.K_.forEach((function(e){e.next()}))}var fv=function(){function e(t,n,r){S(this,e),this.query=t,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}return N(e,[{key:"W_",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=b(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new tv(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.z_?this.H_(e)&&(this.G_.next(e),a=!0):this.J_(e,this.onlineState)&&(this.Y_(e),a=!0),this.j_=e,a}},{key:"onError",value:function(e){this.G_.error(e)}},{key:"U_",value:function(e){this.onlineState=e;var t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}},{key:"J_",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"H_",value:function(e){if(e.docChanges.length>0)return!0;var t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Y_",value:function(e){e=tv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}]),e}(),hv=function(){function e(t,n){S(this,e),this.X_=t,this.byteLength=n}return N(e,[{key:"ea",value:function(){return"metadata"in this.X_}}]),e}(),dv=function(){function e(t){S(this,e),this.serializer=t}return N(e,[{key:"Is",value:function(e){return tf(this.serializer,e)}},{key:"ds",value:function(e){return e.metadata.exists?sf(this.serializer,e.document,!1):Cs.newNoDocument(this.Is(e.metadata.name),this.Ts(e.metadata.readTime))}},{key:"Ts",value:function(e){return Xl(e)}}]),e}(),pv=function(){function e(t,n,r){S(this,e),this.ta=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=vv(t)}return N(e,[{key:"na",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;var n=Po.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"ra",value:function(e){var t,n=new Map,r=new dv(this.serializer),i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Is(a.metadata.name),s=b(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||Uc()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Rd(this.localStore,new dv(this.serializer),this.documents,this.ta.id);case 2:t=e.sent,n=this.ra(this.documents),r=b(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return o=i.value,e.next=11,Od(this.localStore,o,n.get(o.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function vv(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var yv=N((function e(t){S(this,e),this.key=t})),mv=N((function e(t){S(this,e),this.key=t})),gv=function(){function e(t,n){S(this,e),this.query=t,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Uc(),this.mutatedKeys=Uc(),this.ua=Ec(t),this.ca=new $p(this.ua)}return N(e,[{key:"la",get:function(){return this.oa}},{key:"ha",value:function(e,t){var n=this,r=t?t.Pa:new ev,i=t?t.ca:this.ca,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=xc(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),p=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),p=!0):n.Ia(l,f)||(r.track({type:2,doc:f}),p=!0,(s&&n.ua(f,s)>0||c&&n.ua(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),p=!0):l&&!f&&(r.track({type:1,doc:l}),p=!0,(s||c)&&(u=!0)),p&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{ca:o,Pa:r,es:u,mutatedKeys:a}}},{key:"Ia",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;var a=e.Pa.q_();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return so()}};return n(e)-n(t)}(e.type,t.type)||r.ua(e.doc,t.doc)})),this.da(n);var o=t?this.Ta():[],u=0===this.aa.size&&this.current?1:0,s=u!==this._a;return this._a=u,0!==a.length||s?{snapshot:new tv(this.query,e.ca,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Ea:o}:{Ea:o}}},{key:"U_",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ev,mutatedKeys:this.mutatedKeys,es:!1},!1)):{Ea:[]}}},{key:"Aa",value:function(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}},{key:"da",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.oa=t.oa.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.oa=t.oa.delete(e)})),this.current=e.current)}},{key:"Ta",value:function(){var e=this;if(!this.current)return[];var t=this.aa;this.aa=Uc(),this.ca.forEach((function(t){e.Aa(t.key)&&(e.aa=e.aa.add(t.key))}));var n=[];return t.forEach((function(t){e.aa.has(t)||n.push(new mv(t))})),this.aa.forEach((function(e){t.has(e)||n.push(new yv(e))})),n}},{key:"Ra",value:function(e){this.oa=e.Ps,this.aa=Uc();var t=this.ha(e.documents);return this.applyChanges(t,!0)}},{key:"Va",value:function(){return tv.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}]),e}(),kv=N((function e(t,n,r){S(this,e),this.query=t,this.targetId=n,this.view=r})),wv=N((function e(t){S(this,e),this.key=t,this.ma=!1})),bv=function(){function e(t,n,r,i,a,o){S(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new Sc((function(e){return bc(e)}),wc),this.pa=new Map,this.ya=new Set,this.wa=new zu(Oo.comparator),this.Sa=new Map,this.ba=new Xh,this.Da={},this.Ca=new Map,this.va=Th.Ln(),this.onlineState="Unknown",this.Fa=void 0}return N(e,[{key:"isPrimaryClient",get:function(){return!0===this.Fa}}]),e}();function _v(e,t){return xv.apply(this,arguments)}function xv(){return xv=u(a().mark((function e(t,n){var r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=vy(t),!(u=r.ga.get(n))){e.next=6;break}i=u.targetId,r.sharedClientState.addLocalQueryTarget(i),o=u.view.Va(),e.next=15;break;case 6:return e.next=8,Ed(r.localStore,yc(n));case 8:return s=e.sent,c=r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.targetId,e.next=13,Iv(r,n,i,"current"===c,s.resumeToken);case 13:o=e.sent,r.isPrimaryClient&&pp(r.remoteStore,s);case 15:return e.abrupt("return",o);case 16:case"end":return e.stop()}}),e)}))),xv.apply(this,arguments)}function Iv(e,t,n,r,i){return Ev.apply(this,arguments)}function Ev(){return Ev=u(a().mark((function e(t,n,r,i,o){var s,c,l,f,h,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.Ma=function(e,n,r){return function(){var e=u(a().mark((function e(t,n,r,i){var o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=n.view.ha(r),e.t0=o.es,!e.t0){e.next=6;break}return e.next=5,Ad(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.ha(t,o)}));case 5:o=e.sent;case 6:return u=i&&i.targetChanges.get(n.targetId),s=n.view.applyChanges(o,t.isPrimaryClient,u),e.abrupt("return",(Kv(t,n.targetId,s.Ea),s.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Ad(t.localStore,n,!0);case 3:return s=e.sent,c=new gv(n,s.Ps),l=c.ha(s.documents),f=Ll.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,o),h=c.applyChanges(l,t.isPrimaryClient,f),Kv(t,r,h.Ea),d=new kv(n,r,c),e.abrupt("return",(t.ga.set(n,d),t.pa.has(r)?t.pa.get(r).push(n):t.pa.set(r,[n]),h.snapshot));case 11:case"end":return e.stop()}}),e)}))),Ev.apply(this,arguments)}function Tv(e,t){return Sv.apply(this,arguments)}function Sv(){return Sv=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=lo(t),i=r.ga.get(n),!((o=r.pa.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.pa.set(i.targetId,o.filter((function(e){return!wc(e,n)}))),void r.ga.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Td(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),vp(r.remoteStore,i.targetId),qv(r,i.targetId)})).catch(Ho);case 9:e.next=14;break;case 11:return qv(r,i.targetId),e.next=14,Td(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Sv.apply(this,arguments)}function Av(e,t,n){return Cv.apply(this,arguments)}function Cv(){return Cv=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=yy(t),e.prev=1,e.next=4,function(e,t){var n,r,i=lo(e),a=Ao.now(),o=t.reduce((function(e,t){return e.add(t.key)}),Uc());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=Cc(),s=Uc();return i._s.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=b(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=ll(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new dl(c.key,l,As(l.value.mapValue),il.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:Rc(n)}}))}(i.localStore,n);case 4:return o=e.sent,i.sharedClientState.addPendingMutation(o.batchId),function(e,t,n){var r=e.Da[e.currentUser.toKey()];r||(r=new zu(Eo)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(i,o.batchId,r),e.next=9,Wv(i,o.changes);case 9:return e.next=11,Pp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),u=Zp(e.t0,"Failed to persist write"),r.reject(u);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Cv.apply(this,arguments)}function Nv(e,t){return Pv.apply(this,arguments)}function Pv(){return Pv=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lo(t),e.prev=1,e.next=4,_d(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.Sa.get(t);n&&(co(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ma=!0:e.modifiedDocuments.size>0?co(n.ma):e.removedDocuments.size>0&&(co(n.ma),n.ma=!1))})),e.next=8,Wv(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,Ho(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Pv.apply(this,arguments)}function Rv(e,t,n){var r=lo(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.ga.forEach((function(e,n){var r=n.view.U_(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=lo(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=b(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.U_(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&lv(n)}(r.eventManager,t),i.length&&r.fa.c_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function Dv(e,t,n){return Ov.apply(this,arguments)}function Ov(){return Ov=u(a().mark((function e(t,n,r){var i,o,u,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=lo(t)).sharedClientState.updateQueryState(n,"rejected",r),o=i.Sa.get(n),!(u=o&&o.key)){e.next=14;break}return s=(s=new zu(Oo.comparator)).insert(u,Cs.newNoDocument(u,Co.min())),c=Uc().add(u),l=new Ol(Co.min(),new Map,new zu(Eo),s,c),e.next=9,Nv(i,l);case 9:i.wa=i.wa.remove(u),i.Sa.delete(n),Qv(i),e.next=16;break;case 14:return e.next=16,Td(i.localStore,n,!1).then((function(){return qv(i,n,r)})).catch(Ho);case 16:case"end":return e.stop()}}),e)}))),Ov.apply(this,arguments)}function Lv(e,t){return Mv.apply(this,arguments)}function Mv(){return Mv=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lo(t),i=n.batch.batchId,e.prev=1,e.next=4,wd(r.localStore,n);case 4:return o=e.sent,zv(r,i,null),jv(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,Wv(r,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ho(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Mv.apply(this,arguments)}function Fv(e,t,n){return Uv.apply(this,arguments)}function Uv(){return Uv=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=lo(t),e.prev=1,e.next=4,function(e,t){var n=lo(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return co(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return o=e.sent,zv(i,n,r),jv(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,Wv(i,o);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,Ho(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Uv.apply(this,arguments)}function Vv(e,t){return Bv.apply(this,arguments)}function Bv(){return Bv=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return wp((r=lo(t)).remoteStore)||io("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=lo(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(o=r.Ca.get(i)||[]).push(n),r.Ca.set(i,o),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),u=Zp(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(u);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),Bv.apply(this,arguments)}function jv(e,t){(e.Ca.get(t)||[]).forEach((function(e){e.resolve()})),e.Ca.delete(t)}function zv(e,t,n){var r=lo(e),i=r.Da[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function qv(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=b(e.pa.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.ga.delete(a),n&&e.fa.xa(a,n)}}catch(o){i.e(o)}finally{i.f()}e.pa.delete(t),e.isPrimaryClient&&e.ba.mr(t).forEach((function(t){e.ba.containsKey(t)||Gv(e,t)}))}function Gv(e,t){e.ya.delete(t.path.canonicalString());var n=e.wa.get(t);null!==n&&(vp(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),Qv(e))}function Kv(e,t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof yv?(e.ba.addReference(a.key,t),Hv(e,a)):a instanceof mv?(io("SyncEngine","Document no longer in limbo: "+a.key),e.ba.removeReference(a.key,t),e.ba.containsKey(a.key)||Gv(e,a.key)):so()}}catch(o){i.e(o)}finally{i.f()}}function Hv(e,t){var n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(io("SyncEngine","New document in limbo: "+n),e.ya.add(r),Qv(e))}function Qv(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){var t=e.ya.values().next().value;e.ya.delete(t);var n=new Oo(Po.fromString(t)),r=e.va.next();e.Sa.set(r,new wv(n)),e.wa=e.wa.insert(n,r),pp(e.remoteStore,new If(yc(lc(n.path)),r,"TargetPurposeLimboResolution",ou.ae))}}function Wv(e,t,n){return Jv.apply(this,arguments)}function Jv(){return Jv=u(a().mark((function e(t,n,r){var i,o,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=lo(t),o=[],s=[],c=[],e.t0=i.ga.isEmpty(),e.t0){e.next=9;break}return i.ga.forEach((function(e,t){c.push(i.Ma(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){o.push(e);var n=dd.$i(t.targetId,e);s.push(n)}})))})),e.next=6,Promise.all(c);case 6:return i.fa.c_(o),e.next=9,function(){var e=u(a().mark((function e(t,n){var r,i,o,u,s,c,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lo(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Wo.forEach(n,(function(t){return Wo.forEach(t.Qi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Wo.forEach(t.Ki,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),$o(e.t0)){e.next=10;break}throw e.t0;case 10:io("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=b(n);try{for(i.s();!(o=i.n()).done;)u=o.value,s=u.targetId,u.fromCache||(c=r.rs.get(s),l=c.snapshotVersion,f=c.withLastLimboFreeSnapshotVersion(l),r.rs=r.rs.insert(s,f))}catch(a){i.e(a)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,s);case 9:case"end":return e.stop()}}),e)}))),Jv.apply(this,arguments)}function Yv(e,t){return Xv.apply(this,arguments)}function Xv(){return(Xv=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=lo(t)).currentUser.isEqual(n)){e.next=11;break}return io("SyncEngine","User change. New user:",n.toKey()),e.next=5,gd(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.Ca.forEach((function(e){e.forEach((function(e){e.reject(new ho(fo.CANCELLED,t))}))})),e.Ca.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,Wv(r,i.cs);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zv(e,t){var n=lo(e),r=n.Sa.get(t);if(r&&r.ma)return Uc().add(r.key);var i=Uc(),a=n.pa.get(t);if(!a)return i;var o,u=b(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.ga.get(s);i=i.unionWith(c.view.la)}}catch(l){u.e(l)}finally{u.f()}return i}function $v(e,t){return ey.apply(this,arguments)}function ey(){return ey=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lo(t),e.next=3,Ad(r.localStore,n.query,!0);case 3:return i=e.sent,o=n.view.Ra(i),e.abrupt("return",(r.isPrimaryClient&&Kv(r,n.targetId,o.Ea),o));case 6:case"end":return e.stop()}}),e)}))),ey.apply(this,arguments)}function ty(e,t){return ny.apply(this,arguments)}function ny(){return(ny=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lo(t),e.abrupt("return",Nd(r.localStore,n).then((function(e){return Wv(r,e)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ry(e,t,n,r){return iy.apply(this,arguments)}function iy(){return iy=u(a().mark((function e(t,n,r,i){var o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=lo(t),e.next=3,function(e,t){var n=lo(e),r=lo(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.Fn(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Wo.resolve(null)}))}))}(o.localStore,n);case 3:if(null===(u=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Pp(o.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(zv(o,n,i||null),jv(o,n),function(e,t){lo(lo(e).mutationQueue).xn(t)}(o.localStore,n)):so();case 11:return e.next=13,Wv(o,u);case 13:e.next=16;break;case 15:io("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),iy.apply(this,arguments)}function ay(e,t){return oy.apply(this,arguments)}function oy(){return(oy=u(a().mark((function e(t,n){var r,i,o,u,s,c,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(vy(r=lo(t)),yy(r),!0!==n||!0===r.Fa){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,uy(r,i.toArray());case 5:return o=e.sent,r.Fa=!0,e.next=9,Qp(r.remoteStore,!0);case 9:u=b(o);try{for(u.s();!(s=u.n()).done;)c=s.value,pp(r.remoteStore,c)}catch(a){u.e(a)}finally{u.f()}e.next=25;break;case 13:if(!1!==n||!1===r.Fa){e.next=25;break}return l=[],f=Promise.resolve(),r.pa.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?l.push(t):f=f.then((function(){return qv(r,t),Td(r.localStore,t,!0)})),vp(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,uy(r,l);case 21:return function(e){var t=lo(e);t.Sa.forEach((function(e,n){vp(t.remoteStore,n)})),t.ba.gr(),t.Sa=new Map,t.wa=new zu(Oo.comparator)}(r),r.Fa=!1,e.next=25,Qp(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function uy(e,t,n){return sy.apply(this,arguments)}function sy(){return sy=u(a().mark((function e(t,n,r){var i,o,u,s,c,l,f,h,d,p,v,y,m,g;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=lo(t),o=[],u=[],s=b(n),e.prev=2,s.s();case 4:if((c=s.n()).done){e.next=45;break}if(l=c.value,f=void 0,!(h=i.pa.get(l))||0===h.length){e.next=34;break}return e.next=11,Ed(i.localStore,yc(h[0]));case 11:f=e.sent,d=b(h),e.prev=13,d.s();case 15:if((p=d.n()).done){e.next=24;break}return v=p.value,y=i.ga.get(v),e.next=20,$v(i,y);case 20:(m=e.sent).snapshot&&u.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Cd(i.localStore,l);case 36:return g=e.sent,e.next=39,Ed(i.localStore,g);case 39:return f=e.sent,e.next=42,Iv(i,cy(g),l,!1,f.resumeToken);case 42:o.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),s.e(e.t1);case 50:return e.prev=50,s.f(),e.finish(50);case 53:return e.abrupt("return",(i.fa.c_(u),o));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),sy.apply(this,arguments)}function cy(e){return cc(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function ly(e){return function(e){return lo(lo(e).persistence).ki()}(lo(e).localStore)}function fy(e,t,n,r){return hy.apply(this,arguments)}function hy(){return hy=u(a().mark((function e(t,n,r,i){var o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=lo(t)).Fa){e.next=3;break}return e.abrupt("return",void io("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((u=o.pa.get(n))&&u.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Nd(o.localStore,Ic(u[0]));case 10:return s=e.sent,c=Ol.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Yu.EMPTY_BYTE_STRING),e.next=14,Wv(o,s,c);case 14:return e.abrupt("break",20);case 15:return e.next=17,Td(o.localStore,n,!0);case 17:return qv(o,n,i),e.abrupt("break",20);case 19:so();case 20:case"end":return e.stop()}}),e)}))),hy.apply(this,arguments)}function dy(e,t,n){return py.apply(this,arguments)}function py(){return py=u(a().mark((function e(t,n,r){var i,o,u,s,c,l,f,h,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=vy(t)).Fa){e.next=45;break}o=b(n),e.prev=3,o.s();case 5:if((u=o.n()).done){e.next=21;break}if(s=u.value,!i.pa.has(s)){e.next=10;break}return io("SyncEngine","Adding an already active target "+s),e.abrupt("continue",19);case 10:return e.next=12,Cd(i.localStore,s);case 12:return c=e.sent,e.next=15,Ed(i.localStore,c);case 15:return l=e.sent,e.next=18,Iv(i,cy(c),l.targetId,!1,l.resumeToken);case 18:pp(i.remoteStore,l);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:f=b(r),e.prev=30,d=a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.pa.has(t),!e.t0){e.next=5;break}return e.next=5,Td(i.localStore,t,!1).then((function(){vp(i.remoteStore,t),qv(i,t)})).catch(Ho);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),py.apply(this,arguments)}function vy(e){var t=lo(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Nv.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Zv.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Dv.bind(null,t),t.fa.c_=sv.bind(null,t.eventManager),t.fa.xa=cv.bind(null,t.eventManager),t}function yy(e){var t=lo(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Lv.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Fv.bind(null,t),t}function my(e,t,n){var r=lo(e);(function(){var e=u(a().mark((function e(t,n,r){var i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=lo(e),r=Xl(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.Ur.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(vv(i)),o=new pv(i,t.localStore,n.serializer),e.next=15,n.Oa();case 15:u=e.sent;case 16:if(!u){e.next=26;break}return e.next=19,o.na(u);case 19:return(s=e.sent)&&r._updateProgress(s),e.next=23,n.Oa();case 23:u=e.sent;case 24:e.next=16;break;case 26:return e.next=28,o.complete();case 28:return c=e.sent,e.next=31,Wv(t,c.sa,void 0);case 31:return e.next=33,function(e,t){var n=lo(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.Ur.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(c.progress),e.abrupt("return",Promise.resolve(c.ia));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(oo("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var gy=function(){function e(){S(this,e),this.synchronizeTabs=!1}return N(e,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=np(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return md(this.persistence,new vd,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new rd(ad.Jr,this.serializer)}},{key:"createSharedClientState",value:function(e){return new Kd}},{key:"terminate",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),ky=function(e){_(n,e);var t=I(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).Na=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return N(n,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(g(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.Na.initialize(this,t);case 4:return e.next=6,yy(this.Na.syncEngine);case 6:return e.next=8,Pp(this.Na.remoteStore);case 8:return e.next=10,this.persistence.gi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return md(this.persistence,new vd,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Dh(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new au(t,this.persistence);return new iu(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=hd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?gh.withCacheSize(this.cacheSizeBytes):gh.DEFAULT;return new cd(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ep(),tp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new Kd}}]),n}(gy),wy=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,r,!1)).Na=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return N(n,[{key:"initialize",value:function(){var e=u(a().mark((function e(t){var r,i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(g(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.Na.syncEngine,e.t0=this.sharedClientState instanceof Gd,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={Xs:ry.bind(null,r),eo:fy.bind(null,r),no:dy.bind(null,r),ki:ly.bind(null,r),Zs:ty.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.gi(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ay(i.Na.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=ep();if(!Gd.C(t))throw new ho(fo.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=hd(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Gd(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(ky),by=function(){function e(){S(this,e)}return N(e,[{key:"initialize",value:function(){var e=u(a().mark((function e(t,n){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Rv(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Yv.bind(null,this.syncEngine),e.next=12,Qp(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new rv}},{key:"createDatastore",value:function(e){var t=np(e.databaseInfo.databaseId),n=function(e){return new $d(e)}(e.databaseInfo);return function(e,t,n,r){return new up(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}},{key:"createRemoteStore",value:function(e){var t=this;return function(e,t,n,r,i){return new cp(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(function(e){return Rv(t.syncEngine,e,0)}),Qd.C()?new Qd:new Hd)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new bv(e,t,n,r,i,a);return o&&(u.Fa=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=lo(t),io("RemoteStore","RemoteStore shutting down."),n.F_.add(5),e.next=5,hp(n);case 5:n.x_.shutdown(),n.O_.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function _y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return u(a().mark((function r(){var i;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var xy=function(){function e(t){S(this,e),this.observer=t,this.muted=!1}return N(e,[{key:"next",value:function(e){this.observer.next&&this.Ba(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.Ba(this.observer.error,e):ao("Uncaught Error in snapshot listener:",e.toString())}},{key:"La",value:function(){this.muted=!0}},{key:"Ba",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Iy=function(){function e(t,n){var r=this;S(this,e),this.ka=t,this.serializer=n,this.metadata=new po,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((function(e){e&&e.ea()?r.metadata.resolve(e.X_.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.X_))))}),(function(e){return r.metadata.reject(e)}))}return N(e,[{key:"close",value:function(){return this.ka.cancel()}},{key:"getMetadata",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oa",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Qa());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Qa",value:function(){var e=u(a().mark((function e(){var t,n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ka();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.qa.decode(t),r=Number(n),isNaN(r)&&this.$a("length string (".concat(n,") is not valid number")),e.next=9,this.Ua(r);case 9:return i=e.sent,e.abrupt("return",new hv(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Wa",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ka",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.Wa()<0)){e.next=7;break}return e.next=3,this.Ga();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.Wa())<0&&this.$a("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ua",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Ga();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.$a("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.qa.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"$a",value:function(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Ga",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.ka.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Ey=function(){function e(t){S(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return N(e,[{key:"lookup",value:function(){var e=u(a().mark((function e(t){var n,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new ho(fo.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=u(a().mark((function e(t,n){var r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lo(t),i=af(r.serializer)+"/documents",o={documents:n.map((function(e){return ef(r.serializer,e)}))},e.next=5,r.Fo("BatchGetDocuments",i,o,n.length);case 5:return u=e.sent,s=new Map,u.forEach((function(e){var t=cf(r.serializer,e);s.set(t.key.toString(),t)})),c=[],e.abrupt("return",(n.forEach((function(e){var t=s.get(e.toString());co(!!t),c.push(t)})),c));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new kl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=u(a().mark((function e(){var t,n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=Oo.fromPath(t);n.mutations.push(new wl(r,n.precondition(r)))})),e.next=7,function(){var e=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=lo(t),i=af(r.serializer)+"/documents",o={writes:n.map((function(e){return lf(r.serializer,e)}))},e.next=3,r.bo("Commit",i,o);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw so();t=Co.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new ho(fo.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Co.min())?il.exists(!1):il.updateTime(t):il.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Co.min()))throw new ho(fo.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return il.updateTime(t)}return il.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Ty=function(){function e(t,n,r,i,a){S(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.za=r.maxAttempts,this.Ho=new rp(this.asyncQueue,"transaction_retry")}return N(e,[{key:"run",value:function(){this.za-=1,this.ja()}},{key:"ja",value:function(){var e=this;this.Ho.Qo(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Ey(e.datastore),(r=e.Ha(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Ja(t)}))}))})).catch((function(t){e.Ja(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Ha",value:function(e){try{var t=this.updateFunction(e);return!uu(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Ja",value:function(e){var t=this;this.za>0&&this.Ya(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((function(){return t.ja(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"Ya",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!El(t)}return!1}}]),e}(),Sy=function(){function e(t,n,r,i){var o=this;S(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=eo.UNAUTHENTICATED,this.clientId=Io.V(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return io("FirestoreClient","Received user=",t.uid),e.next=3,o.authCredentialListener(t);case 3:o.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return io("FirestoreClient","Received new app check token=",e),o.appCheckCredentialListener(e,o.user)}))}return N(e,[{key:"getConfiguration",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new ho(fo.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new po;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=Zp(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Ay(e,t){return Cy.apply(this,arguments)}function Cy(){return Cy=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),io("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,gd(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Cy.apply(this,arguments)}function Ny(e,t){return Py.apply(this,arguments)}function Py(){return Py=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,Dy(t);case 3:return r=e.sent,io("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return Kp(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return Kp(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Py.apply(this,arguments)}function Ry(e){return"FirebaseError"===e.name?e.code===fo.FAILED_PRECONDITION||e.code===fo.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function Dy(e){return Oy.apply(this,arguments)}function Oy(){return(Oy=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return io("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Ay(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Ry(n=e.t0)){e.next=13;break}throw n;case 13:return oo("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Ay(t,new gy);case 16:e.next=21;break;case 18:return io("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Ay(t,new gy);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])})))).apply(this,arguments)}function Ly(e){return My.apply(this,arguments)}function My(){return(My=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return io("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Ny(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return io("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Ny(t,new by);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fy(e){return Dy(e).then((function(e){return e.persistence}))}function Uy(e){return Dy(e).then((function(e){return e.localStore}))}function Vy(e){return Ly(e).then((function(e){return e.remoteStore}))}function By(e){return Ly(e).then((function(e){return e.syncEngine}))}function jy(e){return Ly(e).then((function(e){return e.datastore}))}function zy(e){return qy.apply(this,arguments)}function qy(){return(qy=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ly(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=_v.bind(null,n.syncEngine),r.onUnlisten=Tv.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Gy(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new po;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xy({next:function(a){t.enqueueAndForget((function(){return ov(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new ho(fo.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new ho(fo.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new fv(lc(n.path),a,{includeMetadataChanges:!0,Z_:!0});return iv(e,o)},i.next=3,zy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Ky(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new po;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new xy({next:function(n){t.enqueueAndForget((function(){return ov(e,o)})),n.fromCache&&"server"===r.source?i.reject(new ho(fo.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new fv(n,a,{includeMetadataChanges:!0,Z_:!0});return iv(e,o)},i.next=3,zy(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function Hy(e){var t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}var Qy=new Map;function Wy(e,t,n){if(!n)throw new ho(fo.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Jy(e,t,n,r){if(!0===t&&!0===r)throw new ho(fo.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Yy(e){if(!Oo.isDocumentKey(e))throw new ho(fo.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Xy(e){if(Oo.isDocumentKey(e))throw new ho(fo.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Zy(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":so()}function $y(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new ho(fo.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Zy(e);throw new ho(fo.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function em(e,t){if(t<=0)throw new ho(fo.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var tm=function(){function e(t){var n,r;if(S(this,e),void 0===t.host){if(void 0!==t.ssl)throw new ho(fo.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new ho(fo.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Jy("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Hy(null!==(r=t.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new ho(fo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new ho(fo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new ho(fo.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}return N(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),nm=function(){function e(t,n,r,i){S(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tm({}),this._settingsFrozen=!1}return N(e,[{key:"app",get:function(){if(!this._app)throw new ho(fo.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new ho(fo.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tm(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new yo;switch(e.type){case"firstParty":return new wo(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new ho(fo.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=Qy.get(e);t&&(io("ComponentProvider","Removing Datastore"),Qy.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function rm(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=$y(e,nm))._getSettings(),o="".concat(t,":").concat(n);if("firestore.googleapis.com"!==a.host&&a.host!==o&&oo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},a),{host:o,ssl:!1})),i.mockUserToken){var u,s;if("string"==typeof i.mockUserToken)u=i.mockUserToken,s=eo.MOCK_USER;else{u=q(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new ho(fo.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");s=new eo(c)}e._authCredentials=new mo(new vo(u,s))}}var im=function(){function e(t,n,r){S(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return N(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),am=function(){function e(t,n,r){S(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return N(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new om(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),om=function(e){_(n,e);var t=I(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,e,r,lc(i)))._path=i,a.type="collection",a}return N(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new am(this.firestore,null,new Oo(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(im);function um(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ce(e),Wy("collection","path",t),e instanceof nm){var a=Po.fromString.apply(Po,[t].concat(r));return Xy(a),new om(e,null,a)}if(!(e instanceof am||e instanceof om))throw new ho(fo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Po.fromString.apply(Po,[t].concat(r)));return Xy(o),new om(e.firestore,null,o)}function sm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=ce(e),1===arguments.length&&(t=Io.V()),Wy("doc","path",t),e instanceof nm){var a=Po.fromString.apply(Po,[t].concat(r));return Yy(a),new am(e,null,new Oo(a))}if(!(e instanceof am||e instanceof om))throw new ho(fo.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(Po.fromString.apply(Po,[t].concat(r)));return Yy(o),new am(e.firestore,e instanceof om?e.converter:null,new Oo(o))}function cm(e,t){return e=ce(e),t=ce(t),(e instanceof am||e instanceof om)&&(t instanceof am||t instanceof om)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function lm(e,t){return e=ce(e),t=ce(t),e instanceof im&&t instanceof im&&e.firestore===t.firestore&&wc(e._query,t._query)&&e.converter===t.converter}var fm=function(){function e(){var t=this;S(this,e),this.Za=Promise.resolve(),this.Xa=[],this.eu=!1,this.tu=[],this.nu=null,this.ru=!1,this.iu=!1,this.su=[],this.Ho=new rp(this,"async_queue_retry"),this.ou=function(){var e=tp();e&&io("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Ho.$o()};var n=tp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.ou)}return N(e,[{key:"isShuttingDown",get:function(){return this.eu}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this._u(),this.au(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.eu){this.eu=!0,this.iu=e||!1;var t=tp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ou)}}},{key:"enqueue",value:function(e){var t=this;if(this._u(),this.eu)return new Promise((function(){}));var n=new po;return this.au((function(){return t.eu&&t.iu?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.Xa.push(e),t.uu()}))}},{key:"uu",value:function(){var e=u(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.Xa.length){e.next=14;break}return e.prev=1,e.next=4,this.Xa[0]();case 4:this.Xa.shift(),this.Ho.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),$o(e.t0)){e.next=12;break}throw e.t0;case 12:io("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.Xa.length>0&&this.Ho.Qo((function(){return t.uu()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"au",value:function(e){var t=this,n=this.Za.then((function(){return t.ru=!0,e().catch((function(e){t.nu=e,t.ru=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw ao("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.ru=!1,e}))}));return this.Za=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this._u(),this.su.indexOf(e)>-1&&(t=0);var i=Xp.createAndSchedule(this,e,t,n,(function(e){return r.cu(e)}));return this.tu.push(i),i}},{key:"_u",value:function(){this.nu&&so()}},{key:"verifyOperationInProgress",value:function(){}},{key:"lu",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Za,e.next=3,t;case 3:if(t!==this.Za){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"hu",value:function(e){var t,n=b(this.tu);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Pu",value:function(e){var t=this;return this.lu().then((function(){t.tu.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=b(t.tu);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.lu()}))}},{key:"Iu",value:function(e){this.su.push(e)}},{key:"cu",value:function(e){var t=this.tu.indexOf(e);this.tu.splice(t,1)}}]),e}();function hm(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=b(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var dm=function(){function e(){S(this,e),this._progressObserver={},this._taskCompletionResolver=new po,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return N(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),pm=function(e){_(n,e);var t=I(n);function n(e,r,i,a){var o;return S(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new fm,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return N(n,[{key:"_terminate",value:function(){return this._firestoreClient||ym(this),this._firestoreClient.terminate()}}]),n}(nm);function vm(e){return e._firestoreClient||ym(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function ym(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new is(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Hy(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Sy(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function mm(e,t,n){var r=new po;return e.asyncQueue.enqueue(u(a().mark((function i(){var o;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Ay(e,n);case 3:return i.next=5,Ny(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Ry(o=i.t0)){i.next=13;break}throw o;case 13:oo("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function gm(e){return function(e){var t=new po;return e.asyncQueue.enqueueAndForget(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=Vv,n.next=3,By(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(vm(e=$y(e,pm)))}function km(e){return function(e){return e.asyncQueue.enqueue(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fy(e);case 2:return n=t.sent,t.next=5,Vy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=lo(e);return t.F_.delete(0),lp(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(vm(e=$y(e,pm)))}function wm(e){return function(e){return e.asyncQueue.enqueue(u(a().mark((function t(){var n,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fy(e);case 2:return n=t.sent,t.next=5,Vy(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=lo(t)).F_.add(0),e.next=4,hp(n);case 4:n.O_.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(vm(e=$y(e,pm)))}function bm(e,t){var n=vm(e=$y(e,pm)),r=new dm;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Iy(e,t)}(function(e,t){if(e instanceof Uint8Array)return _y(e,t);if(e instanceof ArrayBuffer)return _y(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?Al().encode(e):e),t)}(n,np(t));e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=my,t.next=3,By(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function _m(e,t){return function(e,t){return e.asyncQueue.enqueue(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=lo(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.Ur.getNamedQuery(e,t)}))},n.next=3,Uy(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(vm(e=$y(e,pm)),t).then((function(t){return t?new im(e,null,t.query):null}))}function xm(e){if(e._initialized||e._terminated)throw new ho(fo.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Im=function(){function e(t){S(this,e),this._byteString=t}return N(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Yu.fromBase64String(t))}catch(t){throw new ho(fo.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Yu.fromUint8Array(t))}}]),e}(),Em=function(){function e(){S(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new ho(fo.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Do(n)}return N(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Tm=N((function e(t){S(this,e),this._methodName=t})),Sm=function(){function e(t,n){if(S(this,e),!isFinite(t)||t<-90||t>90)throw new ho(fo.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new ho(fo.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return N(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Eo(this._lat,e._lat)||Eo(this._long,e._long)}}]),e}(),Am=/^__.*__$/,Cm=function(){function e(t,n,r){S(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return N(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new dl(e,this.data,this.fieldMask,t,this.fieldTransforms):new hl(e,this.data,t,this.fieldTransforms)}}]),e}(),Nm=function(){function e(t,n,r){S(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return N(e,[{key:"toMutation",value:function(e,t){return new dl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Pm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw so()}}var Rm=function(){function e(t,n,r,i,a,o){S(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.du(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return N(e,[{key:"path",get:function(){return this.settings.path}},{key:"Tu",get:function(){return this.settings.Tu}},{key:"Eu",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Au",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.Vu(e),r}},{key:"mu",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Eu({path:n,Ru:!1});return r.du(),r}},{key:"fu",value:function(e){return this.Eu({path:void 0,Ru:!0})}},{key:"gu",value:function(e){return Zm(e,this.settings.methodName,this.settings.pu||!1,this.path,this.settings.yu)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"du",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.Vu(this.path.get(e))}},{key:"Vu",value:function(e){if(0===e.length)throw this.gu("Document fields must not be empty");if(Pm(this.Tu)&&Am.test(e))throw this.gu('Document fields cannot begin and end with "__"')}}]),e}(),Dm=function(){function e(t,n,r){S(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||np(t)}return N(e,[{key:"wu",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Rm({Tu:e,methodName:t,yu:n,path:Do.emptyPath(),Ru:!1,pu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Om(e){var t=e._freezeSettings(),n=np(e._databaseId);return new Dm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Lm(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.wu(a.merge||a.mergeFields?2:0,t,n,i);Wm("Data must be an object, but it was:",o,r);var u,s,c=Hm(r,o);if(a.merge)u=new Wu(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=b(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=Jm(t,l.value,n);if(!o.contains(d))throw new ho(fo.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));$m(f,d)||f.push(d)}}catch(p){h.e(p)}finally{h.f()}u=new Wu(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Cm(new Ss(c),u,s)}var Mm=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Tu)throw 1===e.Tu?e.gu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.gu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Tm);function Fm(e,t,n){return new Rm({Tu:3,yu:t.settings.yu,methodName:e._methodName,Ru:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Um=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"_toFieldTransform",value:function(e){return new nl(e.path,new Wc)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Tm),Vm=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e)).Su=r,i}return N(n,[{key:"_toFieldTransform",value:function(e){var t=Fm(this,e,!0),n=this.Su.map((function(e){return Km(e,t)})),r=new Jc(n);return new nl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Tm),Bm=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e)).Su=r,i}return N(n,[{key:"_toFieldTransform",value:function(e){var t=Fm(this,e,!0),n=this.Su.map((function(e){return Km(e,t)})),r=new Xc(n);return new nl(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Tm),jm=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e)).bu=r,i}return N(n,[{key:"_toFieldTransform",value:function(e){var t=new $c(e.serializer,qc(e.serializer,this.bu));return new nl(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Tm);function zm(e,t,n,r){var i=e.wu(1,t,n);Wm("Data must be an object, but it was:",i,r);var a=[],o=Ss.empty();Bu(r,(function(e,r){var u=Xm(t,e,n);r=ce(r);var s=i.mu(u);if(r instanceof Mm)a.push(u);else{var c=Km(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Wu(a);return new Nm(o,u,i.fieldTransforms)}function qm(e,t,n,r,i,a){var o=e.wu(1,t,n),u=[Jm(t,r,n)],s=[i];if(a.length%2!=0)throw new ho(fo.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(Jm(t,a[c])),s.push(a[c+1]);for(var l=[],f=Ss.empty(),h=u.length-1;h>=0;--h)if(!$m(l,u[h])){var d=u[h],p=s[h];p=ce(p);var v=o.mu(d);if(p instanceof Mm)l.push(d);else{var y=Km(p,v);null!=y&&(l.push(d),f.set(d,y))}}var m=new Wu(l);return new Nm(f,m,o.fieldTransforms)}function Gm(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Km(n,e.wu(r?4:3,t))}function Km(e,t){if(Qm(e=ce(e)))return Wm("Unsupported field value:",t,e),Hm(e,t);if(e instanceof Tm)return function(e,t){if(!Pm(t.Tu))throw t.gu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.gu("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Ru&&4!==t.Tu)throw t.gu("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=b(e);try{for(a.s();!(n=a.n()).done;){var o=Km(n.value,t.fu(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=ce(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return qc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=Ao.fromDate(e);return{timestampValue:Wl(t.serializer,n)}}if(e instanceof Ao){var r=new Ao(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Wl(t.serializer,r)}}if(e instanceof Sm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Im)return{bytesValue:Jl(t.serializer,e._byteString)};if(e instanceof am){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.gu("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:Zl(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.gu("Unsupported field value: ".concat(Zy(e)))}(e,t)}function Hm(e,t){var n={};return ju(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Bu(e,(function(e,r){var i=Km(r,t.Au(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Qm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Ao||e instanceof Sm||e instanceof Im||e instanceof am||e instanceof Tm)}function Wm(e,t,n){if(!Qm(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=Zy(n);throw"an object"===r?t.gu(e+" a custom object"):t.gu(e+" "+r)}}function Jm(e,t,n){if((t=ce(t))instanceof Em)return t._internalPath;if("string"==typeof t)return Xm(e,t);throw Zm("Field path arguments must be of type string or ",e,!1,void 0,n)}var Ym=new RegExp("[~\\*/\\[\\]]");function Xm(e,t,n){if(t.search(Ym)>=0)throw Zm("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return m(Em,T(t.split(".")))._internalPath}catch(Gt){throw Zm("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Zm(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new ho(fo.INVALID_ARGUMENT,u+e+s)}function $m(e,t){return e.some((function(e){return e.isEqual(t)}))}var eg=function(){function e(t,n,r,i,a){S(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return N(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new am(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new tg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),tg=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(){return k(g(n.prototype),"data",this).call(this)}}]),n}(eg);function ng(e,t){return"string"==typeof t?Xm(e,t):t instanceof Em?t._internalPath:t._delegate._internalPath}function rg(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new ho(fo.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var ig=N((function e(){S(this,e)})),ag=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n)}(ig);function og(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof ig&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof sg})).length,n=e.filter((function(e){return e instanceof ug})).length;if(t>1||t>0&&n>0)throw new ho(fo.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=b(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var ug=function(e){_(n,e);var t=I(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return N(n,[{key:"_apply",value:function(e){var t=this._parse(e);return wg(e._query,t),new im(e.firestore,e.converter,gc(e._query,t))}},{key:"_parse",value:function(e){var t=Om(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new ho(fo.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){kg(o,a);var s,c=[],l=b(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(gg(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=gg(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||kg(o,a),u=Gm(n,t,o,"in"===a||"not-in"===a);return Ms.create(i,a,u)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);var sg=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return N(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:Fs.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=b(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;wg(r,a),r=gc(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new im(e.firestore,e.converter,gc(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ig);var cg=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return N(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new ho(fo.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new ho(fo.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ds(t,n);return function(e,t){if(null===hc(e)){var n=dc(e);null!==n&&bg(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new im(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new sc(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(ag);var lg=function(e){_(n,e);var t=I(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return N(n,[{key:"_apply",value:function(e){return new im(e.firestore,e.converter,kc(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);var fg=function(e){_(n,e);var t=I(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return N(n,[{key:"_apply",value:function(e){var t=mg(e,this.type,this._docOrFields,this._inclusive);return new im(e.firestore,e.converter,function(e,t){return new sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);function hg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fg._create("startAt",t,!0)}function dg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return fg._create("startAfter",t,!1)}var pg=function(e){_(n,e);var t=I(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return N(n,[{key:"_apply",value:function(e){var t=mg(e,this.type,this._docOrFields,this._inclusive);return new im(e.firestore,e.converter,function(e,t){return new sc(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(ag);function vg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pg._create("endBefore",t,!1)}function yg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return pg._create("endAt",t,!0)}function mg(e,t,n,r){if(n[0]=ce(n[0]),n[0]instanceof eg)return function(e,t,n,r,i){if(!r)throw new ho(fo.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=b(vc(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(vs(t,r.key));else{var c=r.data.field(s.field);if(ts(c))throw new ho(fo.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new ho(fo.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new Ns(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Om(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new ho(fo.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new ho(fo.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!pc(e)&&-1!==c.indexOf("/"))throw new ho(fo.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(Po.fromString(c));if(!Oo.isDocumentKey(l))throw new ho(fo.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new Oo(l);u.push(vs(t,f))}else{var h=Gm(n,r,c);u.push(h)}}return new Ns(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function gg(e,t,n){if("string"==typeof(n=ce(n))){if(""===n)throw new ho(fo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pc(t)&&-1!==n.indexOf("/"))throw new ho(fo.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(Po.fromString(n));if(!Oo.isDocumentKey(r))throw new ho(fo.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return vs(e,new Oo(r))}if(n instanceof am)return vs(e,n._key);throw new ho(fo.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Zy(n),"."))}function kg(e,t){if(!Array.isArray(e)||0===e.length)throw new ho(fo.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function wg(e,t){if(t.isInequality()){var n=dc(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new ho(fo.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=hc(e);null!==i&&bg(e,r,i)}var a=function(e,t){var n,r=b(e);try{for(r.s();!(n=r.n()).done;){var i,a=b(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new ho(fo.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new ho(fo.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function bg(e,t,n){if(!n.isEqual(t))throw new ho(fo.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var _g=function(){function e(){S(this,e)}return N(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(ss(e)){case 0:return null;case 1:return e.booleanValue;case 2:return $u(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(es(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw so()}}},{key:"convertObject",value:function(e,t){return this.convertObjectMap(e.fields,t)}},{key:"convertObjectMap",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none",r={};return Bu(e,(function(e,i){r[e]=t.convertValue(i,n)})),r}},{key:"convertGeoPoint",value:function(e){return new Sm($u(e.latitude),$u(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=ns(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(rs(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Zu(e);return new Ao(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=Po.fromString(e);co(xf(n));var r=new as(n.get(1),n.get(3)),i=new Oo(n.popFirst(5));return r.isEqual(t)||ao("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function xg(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Ig=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this)).firestore=e,r}return N(n,[{key:"convertBytes",value:function(e){return new Im(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new am(this.firestore,null,t)}}]),n}(_g);var Eg=function(){function e(t,n){S(this,e),this.hasPendingWrites=t,this.fromCache=n}return N(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Tg=function(e){_(n,e);var t=I(n);function n(e,r,i,a,o,u){var s;return S(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return N(n,[{key:"exists",value:function(){return k(g(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Sg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(ng("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(eg),Sg=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return k(g(n.prototype),"data",this).call(this,e)}}]),n}(Tg),Ag=function(){function e(t,n,r,i){S(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Eg(i.hasPendingWrites,i.fromCache),this.query=r}return N(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Sg(n._firestore,n._userDataWriter,r.key,r,new Eg(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ho(fo.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Sg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Eg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Sg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Eg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Cg(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Cg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return so()}}function Ng(e,t){return e instanceof Tg&&t instanceof Tg?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Ag&&t instanceof Ag&&e._firestore===t._firestore&&lm(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Pg=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this)).firestore=e,r}return N(n,[{key:"convertBytes",value:function(e){return new Im(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new am(this.firestore,null,t)}}]),n}(_g);function Rg(e){e=$y(e,am);var t=$y(e.firestore,pm),n=vm(t),r=new Pg(t);return function(e,t){var n=new po;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=lo(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new ho(fo.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),o=Zp(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(o);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Uy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Tg(t,r,e._key,n,new Eg(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Dg(e){e=$y(e,im);var t=$y(e.firestore,pm),n=vm(t),r=new Pg(t);return rg(e._query),Ky(n,e._query).then((function(n){return new Ag(t,r,e,n)}))}function Og(e){e=$y(e,im);var t=$y(e.firestore,pm),n=vm(t),r=new Pg(t);return function(e,t){var n=new po;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=u(a().mark((function e(t,n,r){var i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ad(t,n,!0);case 3:i=e.sent,o=new gv(n,i.Ps),u=o.ha(i.documents),s=o.applyChanges(u,!1),r.resolve(s.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),c=Zp(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(c);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,Uy(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Ag(t,r,e,n)}))}function Lg(e){e=$y(e,im);var t=$y(e.firestore,pm),n=vm(t),r=new Pg(t);return Ky(n,e._query,{source:"server"}).then((function(n){return new Ag(t,r,e,n)}))}function Mg(e,t,n){e=$y(e,am);var r=$y(e.firestore,pm),i=xg(e.converter,t,n);return Bg(r,[Lm(Om(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,il.none())])}function Fg(e,t,n){e=$y(e,am);for(var r=$y(e.firestore,pm),i=Om(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Bg(r,[("string"==typeof(t=ce(t))||t instanceof Em?qm(i,"updateDoc",e._key,t,n,o):zm(i,"updateDoc",e._key,t)).toMutation(e._key,il.exists(!0))])}function Ug(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,o,s;e=ce(e);var c={includeMetadataChanges:!1},l=0;"object"!=typeof n[l]||hm(n[l])||(c=n[l],l++);var f,h,d,p={includeMetadataChanges:c.includeMetadataChanges};if(hm(n[l])){var v=n[l];n[l]=null===(i=v.next)||void 0===i?void 0:i.bind(v),n[l+1]=null===(o=v.error)||void 0===o?void 0:o.bind(v),n[l+2]=null===(s=v.complete)||void 0===s?void 0:s.bind(v)}if(e instanceof am)h=$y(e.firestore,pm),d=lc(e._key.path),f={next:function(t){n[l]&&n[l](jg(h,e,t))},error:n[l+1],complete:n[l+2]};else{var y=$y(e,im);h=$y(y.firestore,pm),d=y._query;var m=new Pg(h);f={next:function(e){n[l]&&n[l](new Ag(h,m,y,e))},error:n[l+1],complete:n[l+2]},rg(e._query)}return function(e,t,n,r){var i=new xy(r),o=new fv(t,i,n);return e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=iv,t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.La(),e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=ov,t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=o,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(vm(h),d,p,f)}function Vg(e,t){return function(e,t){var n=new xy(t);return e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){lo(e).K_.add(t),t.next()},t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.La(),e.asyncQueue.enqueueAndForget(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){lo(e).K_.delete(t)},t.next=3,zy(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(vm(e=$y(e,pm)),hm(t)?t:{next:t})}function Bg(e,t){return function(e,t){var n=new po;return e.asyncQueue.enqueueAndForget(u(a().mark((function r(){return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Av,r.next=3,By(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(vm(e),t)}function jg(e,t,n){var r=n.docs.get(t._key),i=new Pg(e);return new Tg(e,i,t._key,r,new Eg(n.hasPendingWrites,n.fromCache),t.converter)}var zg={maxAttempts:5},qg=function(){function e(t,n){S(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Om(t)}return N(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=Gg(e,this._firestore),i=xg(r.converter,t,n),a=Lm(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,il.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=Gg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ce(t))||t instanceof Em?qm(this._dataReader,"WriteBatch.update",i._key,t,n,o):zm(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,il.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=Gg(e,this._firestore);return this._mutations=this._mutations.concat(new kl(t._key,il.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new ho(fo.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function Gg(e,t){if((e=ce(e)).firestore!==t)throw new ho(fo.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var Kg=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,r))._firestore=e,i}return N(n,[{key:"get",value:function(e){var t=this,r=Gg(e,this._firestore),i=new Pg(this._firestore);return k(g(n.prototype),"get",this).call(this,e).then((function(e){return new Tg(t._firestore,i,r._key,e._document,new Eg(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){S(this,e),this._firestore=t,this._transaction=n,this._dataReader=Om(t)}return N(e,[{key:"get",value:function(e){var t=this,n=Gg(e,this._firestore),r=new Ig(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return so();var i=e[0];if(i.isFoundDocument())return new eg(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new eg(t._firestore,r,n._key,null,n.converter);throw so()}))}},{key:"set",value:function(e,t,n){var r=Gg(e,this._firestore),i=xg(r.converter,t,n),a=Lm(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=Gg(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=ce(t))||t instanceof Em?qm(this._dataReader,"Transaction.update",i._key,t,n,o):zm(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=Gg(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function Hg(e,t,n){e=$y(e,pm);var r=Object.assign(Object.assign({},zg),n);return function(e){if(e.maxAttempts<1)throw new ho(fo.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new po;return e.asyncQueue.enqueueAndForget(u(a().mark((function i(){var o;return a().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,jy(e);case 2:o=i.sent,new Ty(e.asyncQueue,o,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(vm(e),(function(n){return t(new Kg(e,n))}),r)}function Qg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Vm("arrayUnion",t)}function Wg(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Bm("arrayRemove",t)}new WeakMap;!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){to=e}(ot),$e(new le("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new pm(new go(e.getProvider("auth-internal")),new _o(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new ho(fo.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new as(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),ht($a,"4.2.0",e),ht($a,"4.2.0","esm2017")}();var Jg,Yg=function(){return Yg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Yg.apply(this,arguments)},Xg=function(e){return{loading:void 0===e||null===e,value:e}},Zg=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return Yg(Yg({},e),{error:t.error,loading:!1,value:void 0});case"reset":return Xg(t.defaultValue);case"value":return Yg(Yg({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),Xg(n)),i=r[0],a=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})}),[e]),u=(0,t.useCallback)((function(e){a({type:"error",error:e})}),[]),s=(0,t.useCallback)((function(e){a({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},$g=function(e,n,r){var i=(0,t.useRef)(e);return(0,t.useEffect)((function(){n(e,i.current)||(i.current=e,r&&r())})),i},ek=function(e,t){var n=!e&&!t,r=!!e&&!!t&&lm(e,t);return n||r},tk=function(e,t){return $g(e,ek,t)},nk=function(e,n){var r=function(e,n){var r=Zg(),i=r.error,a=r.loading,o=r.reset,u=r.setError,s=r.setValue,c=r.value,l=tk(e,o);return(0,t.useEffect)((function(){if(l.current){var e=(null===n||void 0===n?void 0:n.snapshotListenOptions)?Ug(l.current,n.snapshotListenOptions,s,u):Ug(l.current,s,u);return function(){e()}}s(void 0)}),[l.current]),[c,a,i]}(e,n),i=r[0],a=r[1],o=r[2];return[rk(i,null===n||void 0===n?void 0:n.snapshotOptions,null===n||void 0===n?void 0:n.initialValue),a,o,i]},rk=function(e,n,r){return(0,t.useMemo)((function(){var t;return null!==(t=null===e||void 0===e?void 0:e.docs.map((function(e){return e.data(n)})))&&void 0!==t?t:r}),[e,n])},ik=function(){function e(t,n){var r=this;S(this,e),this._delegate=t,this.firebase=n,Xe(t,new le("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return N(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),lt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qe;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qe;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Xe(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ze(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),ak=(P(Jg={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),P(Jg,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),Jg),ok=new X("app-compat","Firebase",ak);var uk=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=ut(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if($(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:ht,setLogLevel:pt,onLog:dt,apps:null,SDK_VERSION:ot,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if($e(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw ok.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&F(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!$(n,e=e||Qe))throw ok.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(ik);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){F(n,e)},createSubscribe:oe,ErrorFactory:X,deepExtend:F}),n}(),sk=new be("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){sk.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var ck=self.firebase.SDK_VERSION;ck&&ck.indexOf("LITE")>=0&&sk.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var lk=uk;!function(e){ht("@firebase/app-compat","0.2.19",e)}();lk.registerVersion("firebase","10.4.0","app-compat");function fk(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new ho("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function hk(){if("undefined"===typeof Uint8Array)throw new ho("unimplemented","Uint8Arrays are not available in this environment.")}function dk(){if("undefined"==typeof atob)throw new ho("unimplemented","Blobs are unavailable in Firestore in this environment.")}var pk=function(){function e(t){S(this,e),this._delegate=t}return N(e,[{key:"toBase64",value:function(){return dk(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return hk(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return dk(),new e(Im.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return hk(),new e(Im.fromUint8Array(t))}}]),e}();function vk(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=b(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var yk=function(){function e(){S(this,e)}return N(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){xm(e=$y(e,pm));var n=vm(e);if(n._uninitializedComponentsProvider)throw new ho(fo.FAILED_PRECONDITION,"SDK cache is already specified.");oo("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new by;return mm(n,i,new ky(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){xm(e=$y(e,pm));var t=vm(e);if(t._uninitializedComponentsProvider)throw new ho(fo.FAILED_PRECONDITION,"SDK cache is already specified.");oo("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new by;return mm(t,r,new wy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new ho(fo.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new po;return e._queue.enqueueAndForgetEvenWhileRestricted(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Yo.C()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Yo.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(hd(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),mk=function(){function e(t,n,r){var i=this;S(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof as||(this._appCompat=t)}return N(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||oo("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};rm(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return km(this._delegate)}},{key:"disableNetwork",value:function(){return wm(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&Jy("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return gm(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Vg(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new ho("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Pk(this,um(this._delegate,e))}catch(t){throw xk(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new _k(this,sm(this._delegate,e))}catch(t){throw xk(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Ak(this,function(e,t){if(e=$y(e,nm),Wy("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ho(fo.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new im(e,null,function(e){return new sc(Po.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw xk(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return Hg(this._delegate,(function(n){return e(new kk(t,n))}))}},{key:"batch",value:function(){var e=this;return vm(this._delegate),new wk(new qg(this._delegate,(function(t){return Bg(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return bm(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return _m(this._delegate,e).then((function(e){return e?new Ak(t,e):null}))}}]),e}(),gk=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this)).firestore=e,r}return N(n,[{key:"convertBytes",value:function(e){return new pk(new Im(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return _k.forKey(t,this.firestore,null)}}]),n}(_g);var kk=function(){function e(t,n){S(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new gk(t)}return N(e,[{key:"get",value:function(e){var t=this,n=Rk(e);return this._delegate.get(n).then((function(e){return new Tk(t._firestore,new Tg(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Rk(e);return n?(fk("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Rk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Rk(e);return this._delegate.delete(t),this}}]),e}(),wk=function(){function e(t){S(this,e),this._delegate=t}return N(e,[{key:"set",value:function(e,t,n){var r=Rk(e);return n?(fk("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Rk(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Rk(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),bk=function(){function e(t,n,r){S(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return N(e,[{key:"fromFirestore",value:function(e,t){var n=new Sg(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Sk(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new gk(t),n),i.set(n,a)),a}}]),e}();bk.INSTANCES=new WeakMap;var _k=function(){function e(t,n){S(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new gk(t)}return N(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Pk(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Pk(this.firestore,um(this._delegate,e))}catch(t){throw xk(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=ce(e))instanceof am&&cm(this._delegate,e)}},{key:"set",value:function(e,t){t=fk("DocumentReference.set",t);try{return t?Mg(this._delegate,e,t):Mg(this._delegate,e)}catch(n){throw xk(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?Fg(this._delegate,e):Fg.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw xk(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return Bg($y((e=this._delegate).firestore,pm),[new kl(e._key,il.none())]);var e}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ik(n),a=Ek(n,(function(t){return new Tk(e.firestore,new Tg(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Ug(this._delegate,i,a)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Rg(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=$y(e,am);var t=$y(e.firestore,pm);return Gy(vm(t),e._key,{source:"server"}).then((function(n){return jg(t,e,n)}))}(this._delegate):function(e){e=$y(e,am);var t=$y(e.firestore,pm);return Gy(vm(t),e._key).then((function(n){return jg(t,e,n)}))}(this._delegate)).then((function(e){return new Tk(t.firestore,new Tg(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(bk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new ho("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new am(n._delegate,r,new Oo(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new am(n._delegate,r,t))}}]),e}();function xk(e,t,n){return e.message=e.message.replace(t,n),e}function Ik(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!vk(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Ek(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=vk(e[0])?e[0]:vk(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Tk=function(){function e(t,n){S(this,e),this._firestore=t,this._delegate=n}return N(e,[{key:"ref",get:function(){return new _k(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Ng(this._delegate,e._delegate)}}]),e}(),Sk=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return void 0!==t||so(),t}}]),n}(Tk),Ak=function(){function e(t,n){S(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new gk(t)}return N(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,og(this._delegate,function(e,t,n){var r=t,i=ng("where",e);return ug._create(i,r,n)}(t,n,r)))}catch(i){throw xk(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,og(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=ng("orderBy",e);return cg._create(n,t)}(t,n)))}catch(r){throw xk(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,og(this._delegate,(em("limit",n=t),lg._create("limit",n,"F"))))}catch(n){throw xk(n,"limit()","Query.limit()")}var n}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,og(this._delegate,(em("limitToLast",n=t),lg._create("limitToLast",n,"L"))))}catch(n){throw xk(n,"limitToLast()","Query.limitToLast()")}var n}},{key:"startAt",value:function(){try{return new e(this.firestore,og(this._delegate,hg.apply(void 0,arguments)))}catch(t){throw xk(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,og(this._delegate,dg.apply(void 0,arguments)))}catch(t){throw xk(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,og(this._delegate,vg.apply(void 0,arguments)))}catch(t){throw xk(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,og(this._delegate,yg.apply(void 0,arguments)))}catch(t){throw xk(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return lm(this._delegate,e._delegate)}},{key:"get",value:function(e){var t=this;return("cache"===(null===e||void 0===e?void 0:e.source)?Og(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?Lg(this._delegate):Dg(this._delegate)).then((function(e){return new Nk(t.firestore,new Ag(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Ik(n),a=Ek(n,(function(t){return new Nk(e.firestore,new Ag(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Ug(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(bk.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Ck=function(){function e(t,n){S(this,e),this._firestore=t,this._delegate=n}return N(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Sk(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Nk=function(){function e(t,n){S(this,e),this._firestore=t,this._delegate=n}return N(e,[{key:"query",get:function(){return new Ak(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Sk(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Ck(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Sk(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Ng(this._delegate,e._delegate)}}]),e}(),Pk=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return N(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new _k(this.firestore,e):null}},{key:"doc",value:function(e){try{return new _k(this.firestore,void 0===e?sm(this._delegate):sm(this._delegate,e))}catch(t){throw xk(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=$y(e.firestore,pm),r=sm(e),i=xg(e.converter,t);return Bg(n,[Lm(Om(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,il.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new _k(t.firestore,e)}))}},{key:"isEqual",value:function(e){return cm(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(bk.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Ak);function Rk(e){return $y(e,am)}var Dk,Ok=function(){function e(){S(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=m(Em,n)}return N(e,[{key:"isEqual",value:function(e){return(e=ce(e))instanceof Em&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(Do.keyField().canonicalString())}}]),e}(),Lk=function(){function e(t){S(this,e),this._delegate=t}return N(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Um("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Mm("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=Qg.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=Wg.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=new jm("increment",t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Mk={Firestore:mk,GeoPoint:Sm,Timestamp:Ao,Blob:pk,Transaction:kk,WriteBatch:wk,DocumentReference:_k,DocumentSnapshot:Tk,Query:Ak,QueryDocumentSnapshot:Sk,QuerySnapshot:Nk,CollectionReference:Pk,FieldPath:Ok,FieldValue:Lk,setLogLevel:function(e){var t;t=e,no.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new le("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Mk)))})(Dk=lk,(function(e,t){return new mk(e,t,new yk)})),Dk.registerVersion("@firebase/firestore-compat","0.3.18");var Fk,Uk="firebasestorage.googleapis.com",Vk="storageBucket",Bk=function(e){_(n,e);var t=I(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return S(this,n),(i=t.call(this,jk(e),"Firebase Storage: ".concat(r," (").concat(jk(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(x(i),n.prototype),i}return N(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return jk(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(Y);function jk(e){return"storage/"+e}function zk(){return new Bk(Fk.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function qk(){return new Bk(Fk.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Gk(){return new Bk(Fk.CANCELED,"User canceled the upload/download.")}function Kk(){return new Bk(Fk.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Hk(e){return new Bk(Fk.INVALID_ARGUMENT,e)}function Qk(){return new Bk(Fk.APP_DELETED,"The Firebase app was deleted.")}function Wk(e,t){return new Bk(Fk.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Jk(e){throw new Bk(Fk.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Fk||(Fk={}));var Yk,Xk=function(){function e(t,n){S(this,e),this.bucket=t,this.path_=n}return N(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new Bk(Fk.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Uk?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Bk(Fk.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Zk=function(){function e(t){S(this,e),this.promise_=Promise.reject(t)}return N(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function $k(e){return"string"===typeof e||e instanceof String}function ew(e){return tw()&&e instanceof Blob}function tw(){return"undefined"!==typeof Blob&&!K()}function nw(e,t,n,r){if(r<t)throw Hk("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Hk("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function rw(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function iw(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function aw(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Yk||(Yk={}));var ow=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];S(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return N(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=zk();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?Qk():Gk());else i(qk())}};this.canceled_?t(0,new uw(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var p=!1;function v(e){p||(p=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,v(!0)}),n),v}((function(t,n){if(n)t(!1,new uw(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Yk.NO_ERROR,a=r.getStatus();if(!n||aw(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===Yk.ABORT;t(!1,new uw(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new uw(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),uw=N((function e(t,n,r){S(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function sw(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function cw(){for(var e=sw(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(tw())return new Blob(n);throw new Bk(Fk.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function lw(e){if("undefined"===typeof atob)throw t="base-64",new Bk(Fk.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var fw={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},hw=N((function e(t,n){S(this,e),this.data=t,this.contentType=n||null}));function dw(e,t){switch(e){case fw.RAW:return new hw(pw(t));case fw.BASE64:case fw.BASE64URL:return new hw(vw(e,t));case fw.DATA_URL:return new hw(function(e){var t=new yw(e);return t.base64?vw(fw.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Wk(fw.DATA_URL,"Malformed data URL.")}return pw(t)}(t.rest)}(t),new yw(t).contentType)}throw zk()}function pw(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function vw(e,t){switch(e){case fw.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Wk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case fw.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Wk(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=lw(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw Wk(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var yw=N((function e(t){S(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Wk(fw.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var mw=function(){function e(t,n){S(this,e);var r=0,i="";ew(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return N(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(ew(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(tw()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(cw.apply(null,i))}var a=n.map((function(e){return $k(e)?dw(fw.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function gw(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function kw(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function ww(e,t){return t}var bw=N((function e(t,n,r,i){S(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||ww})),_w=null;function xw(){if(_w)return _w;var e=[];e.push(new bw("bucket")),e.push(new bw("generation")),e.push(new bw("metageneration")),e.push(new bw("name","fullPath",!0));var t=new bw("name");t.xform=function(e,t){return function(e){return!$k(e)||e.length<2?e:kw(e)}(t)},e.push(t);var n=new bw("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new bw("timeCreated")),e.push(new bw("updated")),e.push(new bw("md5Hash",null,!0)),e.push(new bw("cacheControl",null,!0)),e.push(new bw("contentDisposition",null,!0)),e.push(new bw("contentEncoding",null,!0)),e.push(new bw("contentLanguage",null,!0)),e.push(new bw("contentType",null,!0)),e.push(new bw("metadata","customMetadata",!0)),_w=e}function Iw(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Xk(n,r);return t._makeStorageReference(i)}})}(r,e),r}function Ew(e,t,n){var r=gw(t);return null===r?null:Iw(e,r,n)}function Tw(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var Sw=N((function e(t,n,r,i){S(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function Aw(e){if(!e)throw zk()}function Cw(e,t){return function(n,r){var i=Ew(e,r,t);return Aw(null!==i),i}}function Nw(e,t){return function(n,r){var i=Ew(e,r,t);return Aw(null!==i),function(e,t,n,r){var i=gw(t);if(null===i)return null;if(!$k(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return rw("/b/"+o(i)+"/o/"+o(a),n,r)+iw({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function Pw(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Bk(Fk.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Bk(Fk.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Bk(Fk.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Bk(Fk.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Rw(e){var t=Pw(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Bk(Fk.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Dw(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Ow(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=Dw(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Tw(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=mw.getBlob(c,r,l);if(null===f)throw Kk();var h={name:s.fullPath},d=rw(a,e.host,e._protocol),p=e.maxUploadRetryTime,v=new Sw(d,"POST",Cw(e,n),p);return v.urlParams=h,v.headers=o,v.body=f.uploadData(),v.errorHandler=Pw(t),v}var Lw=null,Mw=function(){function e(){var t=this;S(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yk.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Yk.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Yk.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return N(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Jk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Jk("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Jk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Jk("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Jk("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Fw=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Mw);function Uw(){return Lw?Lw():new Fw}var Vw=function(){function e(t,n){S(this,e),this._service=t,this._location=n instanceof Xk?n:Xk.makeFromUrl(n,t.host)}return N(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Xk(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return kw(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Xk(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw function(e){return new Bk(Fk.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}]),e}();function Bw(e,t,n){e._throwIfRoot("uploadBytes");var r=Ow(e.storage,e._location,xw(),new mw(t,!0),n);return e.storage.makeRequestWithTokens(r,Uw).then((function(t){return{metadata:t,ref:e}}))}function jw(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=rw(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Sw(r,"GET",Nw(e,n),i);return a.errorHandler=Rw(t),a}(e.storage,e._location,xw());return e.storage.makeRequestWithTokens(t,Uw).then((function(e){if(null===e)throw new Bk(Fk.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function zw(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Xk(e._location.bucket,n);return new Vw(e.storage,r)}function qw(e,t){if(e instanceof Hw){var n=e;if(null==n._bucket)throw new Bk(Fk.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Vk+"' property when initializing the app?");var r=new Vw(n,n._bucket);return null!=t?qw(r,t):r}return void 0!==t?zw(e,t):e}function Gw(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Hw)return new Vw(e,t);throw Hk("To use ref(service, url), the first argument must be a Storage instance.")}return qw(e,t)}function Kw(e,t){var n=null===t||void 0===t?void 0:t[Vk];return null==n?null:Xk.makeFromBucketSpec(n,e)}var Hw=function(){function e(t,n,r,i,a){S(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Uk,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Xk.makeFromBucketSpec(i,this._host):Kw(this._host,this.app.options)}return N(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Xk.makeFromBucketSpec(this._url,e):this._bucket=Kw(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){nw("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){nw("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Vw(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Zk(Qk());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=iw(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new ow(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=h(r,2),o=i[0],u=i[1],e.abrupt("return",this._makeRequest(t,n,o,u).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),Qw="@firebase/storage",Ww="0.11.2",Jw="storage";function Yw(e,t,n){return Bw(e=ce(e),t,n)}function Xw(e){return jw(e=ce(e))}function Zw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st(),t=arguments.length>1?arguments[1]:void 0,n=et(e=ce(e),Jw).getImmediate({identifier:t}),r=B("storage");return r&&$w.apply(void 0,[n].concat(T(r))),n}function $w(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:q(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function eb(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Hw(r,i,a,n,ot)}$e(new le(Jw,eb,"PUBLIC").setMultipleInstances(!0)),ht(Qw,Ww,""),ht(Qw,Ww,"esm2017");function tb(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var nb,rb={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ib="EMAIL_SIGNIN",ab="PASSWORD_RESET",ob="RECOVER_EMAIL",ub="REVERT_SECOND_FACTOR_ADDITION",sb="VERIFY_AND_CHANGE_EMAIL",cb="VERIFY_EMAIL";function lb(e){return void 0!==e&&void 0!==e.getResponse}function fb(e){return void 0!==e&&void 0!==e.enterprise}var hb=N((function e(t){if(S(this,e),this.siteKey="",this.emailPasswordEnabled=!1,void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.emailPasswordEnabled=t.recaptchaEnforcementState.some((function(e){return"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState}))}));function db(){return P({},"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.")}var pb=function(){var e;return P(e={},"admin-restricted-operation","This operation is restricted to administrators only."),P(e,"argument-error",""),P(e,"app-not-authorized","This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console."),P(e,"app-not-installed","The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device."),P(e,"captcha-check-failed","The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains."),P(e,"code-expired","The SMS code has expired. Please re-send the verification code to try again."),P(e,"cordova-not-ready","Cordova framework is not ready."),P(e,"cors-unsupported","This browser is not supported."),P(e,"credential-already-in-use","This credential is already associated with a different user account."),P(e,"custom-token-mismatch","The custom token corresponds to a different audience."),P(e,"requires-recent-login","This operation is sensitive and requires recent authentication. Log in again before retrying this request."),P(e,"dependent-sdk-initialized-before-auth","Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."),P(e,"dynamic-link-not-activated","Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions."),P(e,"email-change-needs-verification","Multi-factor users must always have a verified email."),P(e,"email-already-in-use","The email address is already in use by another account."),P(e,"emulator-config-failed",'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.'),P(e,"expired-action-code","The action code has expired."),P(e,"cancelled-popup-request","This operation has been cancelled due to another conflicting popup being opened."),P(e,"internal-error","An internal AuthError has occurred."),P(e,"invalid-app-credential","The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired."),P(e,"invalid-app-id","The mobile app identifier is not registed for the current project."),P(e,"invalid-user-token","This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key."),P(e,"invalid-auth-event","An internal AuthError has occurred."),P(e,"invalid-verification-code","The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user."),P(e,"invalid-continue-uri","The continue URL provided in the request is invalid."),P(e,"invalid-cordova-configuration","The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme."),P(e,"invalid-custom-token","The custom token format is incorrect. Please check the documentation."),P(e,"invalid-dynamic-link-domain","The provided dynamic link domain is not configured or authorized for the current project."),P(e,"invalid-email","The email address is badly formatted."),P(e,"invalid-emulator-scheme","Emulator URL must start with a valid scheme (http:// or https://)."),P(e,"invalid-api-key","Your API key is invalid, please check you have copied it correctly."),P(e,"invalid-cert-hash","The SHA-1 certificate hash provided is invalid."),P(e,"invalid-credential","The supplied auth credential is malformed or has expired."),P(e,"invalid-message-payload","The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console."),P(e,"invalid-multi-factor-session","The request does not contain a valid proof of first factor successful sign-in."),P(e,"invalid-oauth-provider","EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers."),P(e,"invalid-oauth-client-id","The OAuth client ID provided is either invalid or does not match the specified API key."),P(e,"unauthorized-domain","This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console."),P(e,"invalid-action-code","The action code is invalid. This can happen if the code is malformed, expired, or has already been used."),P(e,"wrong-password","The password is invalid or the user does not have a password."),P(e,"invalid-persistence-type","The specified persistence type is invalid. It can only be local, session or none."),P(e,"invalid-phone-number","The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code]."),P(e,"invalid-provider-id","The specified provider ID is invalid."),P(e,"invalid-recipient-email","The email corresponding to this action failed to send as the provided recipient email address is invalid."),P(e,"invalid-sender","The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console."),P(e,"invalid-verification-id","The verification ID used to create the phone auth credential is invalid."),P(e,"invalid-tenant-id","The Auth instance's tenant ID is invalid."),P(e,"login-blocked","Login blocked by user-provided method: {$originalMessage}"),P(e,"missing-android-pkg-name","An Android Package Name must be provided if the Android App is required to be installed."),P(e,"auth-domain-config-required","Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console."),P(e,"missing-app-credential","The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided."),P(e,"missing-verification-code","The phone auth credential was created with an empty SMS verification code."),P(e,"missing-continue-uri","A continue URL must be provided in the request."),P(e,"missing-iframe-start","An internal AuthError has occurred."),P(e,"missing-ios-bundle-id","An iOS Bundle ID must be provided if an App Store ID is provided."),P(e,"missing-or-invalid-nonce","The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload."),P(e,"missing-password","A non-empty password must be provided"),P(e,"missing-multi-factor-info","No second factor identifier is provided."),P(e,"missing-multi-factor-session","The request is missing proof of first factor successful sign-in."),P(e,"missing-phone-number","To send verification codes, provide a phone number for the recipient."),P(e,"missing-verification-id","The phone auth credential was created with an empty verification ID."),P(e,"app-deleted","This instance of FirebaseApp has been deleted."),P(e,"multi-factor-info-not-found","The user does not have a second factor matching the identifier provided."),P(e,"multi-factor-auth-required","Proof of ownership of a second factor is required to complete sign-in."),P(e,"account-exists-with-different-credential","An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address."),P(e,"network-request-failed","A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred."),P(e,"no-auth-event","An internal AuthError has occurred."),P(e,"no-such-provider","User was not linked to an account with the given provider."),P(e,"null-user","A null user object was provided as the argument for an operation which requires a non-null user object."),P(e,"operation-not-allowed","The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section."),P(e,"operation-not-supported-in-this-environment",'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.'),P(e,"popup-blocked","Unable to establish a connection with the popup. It may have been blocked by the browser."),P(e,"popup-closed-by-user","The popup has been closed by the user before finalizing the operation."),P(e,"provider-already-linked","User can only be linked to one identity for the given provider."),P(e,"quota-exceeded","The project's quota for this operation has been exceeded."),P(e,"redirect-cancelled-by-user","The redirect operation has been cancelled by the user before finalizing."),P(e,"redirect-operation-pending","A redirect sign-in operation is already pending."),P(e,"rejected-credential","The request contains malformed or mismatching credentials."),P(e,"second-factor-already-in-use","The second factor is already enrolled on this account."),P(e,"maximum-second-factor-count-exceeded","The maximum allowed number of second factors on a user has been exceeded."),P(e,"tenant-id-mismatch","The provided tenant ID does not match the Auth instance's tenant ID"),P(e,"timeout","The operation has timed out."),P(e,"user-token-expired","The user's credential is no longer valid. The user must sign in again."),P(e,"too-many-requests","We have blocked all requests from this device due to unusual activity. Try again later."),P(e,"unauthorized-continue-uri","The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console."),P(e,"unsupported-first-factor","Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor."),P(e,"unsupported-persistence-type","The current environment does not support the specified persistence type."),P(e,"unsupported-tenant-operation","This operation is not supported in a multi-tenant context."),P(e,"unverified-email","The operation requires a verified email."),P(e,"user-cancelled","The user did not grant your application the permissions it requested."),P(e,"user-not-found","There is no user record corresponding to this identifier. The user may have been deleted."),P(e,"user-disabled","The user account has been disabled by an administrator."),P(e,"user-mismatch","The supplied credentials do not correspond to the previously signed in user."),P(e,"user-signed-out",""),P(e,"weak-password","The password must be 6 characters long or more."),P(e,"web-storage-unsupported","This browser is not supported or 3rd party cookies and data may be disabled."),P(e,"already-initialized","initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."),P(e,"missing-recaptcha-token","The reCAPTCHA token is missing when sending request to the backend."),P(e,"invalid-recaptcha-token","The reCAPTCHA token is invalid when sending request to the backend."),P(e,"invalid-recaptcha-action","The reCAPTCHA action is invalid when sending request to the backend."),P(e,"recaptcha-not-enabled","reCAPTCHA Enterprise integration is not enabled for this project."),P(e,"missing-client-type","The reCAPTCHA client type is missing when sending request to the backend."),P(e,"missing-recaptcha-version","The reCAPTCHA version is missing when sending request to the backend."),P(e,"invalid-req-type","Invalid request parameters."),P(e,"invalid-recaptcha-version","The reCAPTCHA version is invalid when sending request to the backend."),P(e,"unsupported-password-policy-schema-version","The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK."),P(e,"password-does-not-meet-requirements","The password does not meet the requirements."),e},vb=db,yb=new X("auth","Firebase",db()),mb=new be("@firebase/auth");function gb(e){if(mb.logLevel<=pe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];mb.warn.apply(mb,["Auth (".concat(ot,"): ").concat(e)].concat(n))}}function kb(e){if(mb.logLevel<=pe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];mb.error.apply(mb,["Auth (".concat(ot,"): ").concat(e)].concat(n))}}function wb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ib.apply(void 0,[e].concat(n))}function bb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ib.apply(void 0,[e].concat(n))}function _b(e,t,n){var r=Object.assign(Object.assign({},vb()),P({},t,n));return new X("auth","Firebase",r).create(t,{appName:e.name})}function xb(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&wb(e,"argument-error"),_b(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ib(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){var i,a=n[0],o=T(n.slice(1));return o[0]&&(o[0].appName=e.name),(i=e._errorFactory).create.apply(i,[a].concat(T(o)))}return yb.create.apply(yb,[e].concat(n))}function Eb(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ib.apply(void 0,[t].concat(r))}}function Tb(e){var t="INTERNAL ASSERTION FAILED: "+e;throw kb(t),new Error(t)}function Sb(e,t){e||Tb(t)}function Ab(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Cb(){return"http:"===Nb()||"https:"===Nb()}function Nb(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}var Pb=function(){function e(t,n){S(this,e),this.shortDelay=t,this.longDelay=n,Sb(n>t,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(G())||Q()}return N(e,[{key:"get",value:function(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Cb()||H()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}]),e}();function Rb(e,t){Sb(e.emulator,"Emulator should always be set here");var n=e.emulator.url;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}var Db=function(){function e(){S(this,e)}return N(e,null,[{key:"initialize",value:function(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}},{key:"fetch",value:function(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void Tb("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"headers",value:function(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void Tb("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}},{key:"response",value:function(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void Tb("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}]),e}(),Ob=(P(nb={},"CREDENTIAL_MISMATCH","custom-token-mismatch"),P(nb,"MISSING_CUSTOM_TOKEN","internal-error"),P(nb,"INVALID_IDENTIFIER","invalid-email"),P(nb,"MISSING_CONTINUE_URI","internal-error"),P(nb,"INVALID_PASSWORD","wrong-password"),P(nb,"MISSING_PASSWORD","missing-password"),P(nb,"EMAIL_EXISTS","email-already-in-use"),P(nb,"PASSWORD_LOGIN_DISABLED","operation-not-allowed"),P(nb,"INVALID_IDP_RESPONSE","invalid-credential"),P(nb,"INVALID_PENDING_TOKEN","invalid-credential"),P(nb,"FEDERATED_USER_ID_ALREADY_LINKED","credential-already-in-use"),P(nb,"MISSING_REQ_TYPE","internal-error"),P(nb,"EMAIL_NOT_FOUND","user-not-found"),P(nb,"RESET_PASSWORD_EXCEED_LIMIT","too-many-requests"),P(nb,"EXPIRED_OOB_CODE","expired-action-code"),P(nb,"INVALID_OOB_CODE","invalid-action-code"),P(nb,"MISSING_OOB_CODE","internal-error"),P(nb,"CREDENTIAL_TOO_OLD_LOGIN_AGAIN","requires-recent-login"),P(nb,"INVALID_ID_TOKEN","invalid-user-token"),P(nb,"TOKEN_EXPIRED","user-token-expired"),P(nb,"USER_NOT_FOUND","user-token-expired"),P(nb,"TOO_MANY_ATTEMPTS_TRY_LATER","too-many-requests"),P(nb,"PASSWORD_DOES_NOT_MEET_REQUIREMENTS","password-does-not-meet-requirements"),P(nb,"INVALID_CODE","invalid-verification-code"),P(nb,"INVALID_SESSION_INFO","invalid-verification-id"),P(nb,"INVALID_TEMPORARY_PROOF","invalid-credential"),P(nb,"MISSING_SESSION_INFO","missing-verification-id"),P(nb,"SESSION_EXPIRED","code-expired"),P(nb,"MISSING_ANDROID_PACKAGE_NAME","missing-android-pkg-name"),P(nb,"UNAUTHORIZED_DOMAIN","unauthorized-continue-uri"),P(nb,"INVALID_OAUTH_CLIENT_ID","invalid-oauth-client-id"),P(nb,"ADMIN_ONLY_OPERATION","admin-restricted-operation"),P(nb,"INVALID_MFA_PENDING_CREDENTIAL","invalid-multi-factor-session"),P(nb,"MFA_ENROLLMENT_NOT_FOUND","multi-factor-info-not-found"),P(nb,"MISSING_MFA_ENROLLMENT_ID","missing-multi-factor-info"),P(nb,"MISSING_MFA_PENDING_CREDENTIAL","missing-multi-factor-session"),P(nb,"SECOND_FACTOR_EXISTS","second-factor-already-in-use"),P(nb,"SECOND_FACTOR_LIMIT_EXCEEDED","maximum-second-factor-count-exceeded"),P(nb,"BLOCKING_FUNCTION_ERROR_RESPONSE","internal-error"),P(nb,"RECAPTCHA_NOT_ENABLED","recaptcha-not-enabled"),P(nb,"MISSING_RECAPTCHA_TOKEN","missing-recaptcha-token"),P(nb,"INVALID_RECAPTCHA_TOKEN","invalid-recaptcha-token"),P(nb,"INVALID_RECAPTCHA_ACTION","invalid-recaptcha-action"),P(nb,"MISSING_CLIENT_TYPE","missing-client-type"),P(nb,"MISSING_RECAPTCHA_VERSION","missing-recaptcha-version"),P(nb,"INVALID_RECAPTCHA_VERSION","invalid-recaptcha-version"),P(nb,"INVALID_REQ_TYPE","invalid-req-type"),nb),Lb=new Pb(3e4,6e4);function Mb(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}function Fb(e,t,n,r){return Ub.apply(this,arguments)}function Ub(){return Ub=u(a().mark((function e(t,n,r,i){var o,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.abrupt("return",Vb(t,o,u(a().mark((function e(){var o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={},u={},i&&("GET"===n?u=i:o={body:JSON.stringify(i)}),s=re(Object.assign({key:t.config.apiKey},u)).slice(1),e.next=6,t._getAdditionalHeaders();case 6:return(c=e.sent)["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode),e.abrupt("return",Db.fetch()(qb(t,t.config.apiHost,r,s),Object.assign({method:n,headers:c,referrerPolicy:"no-referrer"},o)));case 10:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e)}))),Ub.apply(this,arguments)}function Vb(e,t,n){return Bb.apply(this,arguments)}function Bb(){return Bb=u(a().mark((function e(t,n,r){var i,o,u,s,c,l,f,d,p,v;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t._canInitEmulator=!1,i=Object.assign(Object.assign({},Ob),n),e.prev=2,o=new Gb(t),e.next=6,Promise.race([r(),o.promise]);case 6:return u=e.sent,o.clearNetworkTimeout(),e.next=10,u.json();case 10:if(!("needConfirmation"in(s=e.sent))){e.next=13;break}throw Kb(t,"account-exists-with-different-credential",s);case 13:if(!u.ok||"errorMessage"in s){e.next=17;break}return e.abrupt("return",s);case 17:if(c=u.ok?s.errorMessage:s.error.message,l=c.split(" : "),f=h(l,2),d=f[0],p=f[1],"FEDERATED_USER_ID_ALREADY_LINKED"!==d){e.next=23;break}throw Kb(t,"credential-already-in-use",s);case 23:if("EMAIL_EXISTS"!==d){e.next=27;break}throw Kb(t,"email-already-in-use",s);case 27:if("USER_DISABLED"!==d){e.next=29;break}throw Kb(t,"user-disabled",s);case 29:if(v=i[d]||d.toLowerCase().replace(/[_\s]+/g,"-"),!p){e.next=34;break}throw _b(t,v,p);case 34:wb(t,v);case 35:e.next=42;break;case 37:if(e.prev=37,e.t0=e.catch(2),!(e.t0 instanceof Y)){e.next=41;break}throw e.t0;case 41:wb(t,"network-request-failed",{message:String(e.t0)});case 42:case"end":return e.stop()}}),e,null,[[2,37]])}))),Bb.apply(this,arguments)}function jb(e,t,n,r){return zb.apply(this,arguments)}function zb(){return zb=u(a().mark((function e(t,n,r,i){var o,u,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=s.length>4&&void 0!==s[4]?s[4]:{},e.next=3,Fb(t,n,r,i,o);case 3:return"mfaPendingCredential"in(u=e.sent)&&wb(t,"multi-factor-auth-required",{_serverResponse:u}),e.abrupt("return",u);case 6:case"end":return e.stop()}}),e)}))),zb.apply(this,arguments)}function qb(e,t,n,r){var i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?Rb(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}var Gb=function(){function e(t){var n=this;S(this,e),this.auth=t,this.timer=null,this.promise=new Promise((function(e,t){n.timer=setTimeout((function(){return t(bb(n.auth,"network-request-failed"))}),Lb.get())}))}return N(e,[{key:"clearNetworkTimeout",value:function(){clearTimeout(this.timer)}}]),e}();function Kb(e,t,n){var r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);var i=bb(e,t,r);return i.customData._tokenResponse=n,i}function Hb(e){return Qb.apply(this,arguments)}function Qb(){return Qb=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fb(t,"GET","/v1/recaptchaParams");case 2:if(e.t0=e.sent.recaptchaSiteKey,e.t0){e.next=5;break}e.t0="";case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)}))),Qb.apply(this,arguments)}function Wb(e,t){return Jb.apply(this,arguments)}function Jb(){return Jb=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,"GET","/v2/recaptchaConfig",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Jb.apply(this,arguments)}function Yb(e,t){return Xb.apply(this,arguments)}function Xb(){return Xb=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,"POST","/v1/accounts:delete",n));case 1:case"end":return e.stop()}}),e)}))),Xb.apply(this,arguments)}function Zb(e,t){return $b.apply(this,arguments)}function $b(){return $b=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),$b.apply(this,arguments)}function e_(e,t){return t_.apply(this,arguments)}function t_(){return t_=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,"POST","/v1/accounts:lookup",n));case 1:case"end":return e.stop()}}),e)}))),t_.apply(this,arguments)}function n_(e){if(e)try{var t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(n){}}function r_(){return r_=u(a().mark((function e(t){var n,r,i,o,u,s,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]&&c[1],r=ce(t),e.next=4,r.getIdToken(n);case 4:return i=e.sent,Eb((o=a_(i))&&o.exp&&o.auth_time&&o.iat,r.auth,"internal-error"),u="object"===typeof o.firebase?o.firebase:void 0,s=null===u||void 0===u?void 0:u.sign_in_provider,e.abrupt("return",{claims:o,token:i,authTime:n_(i_(o.auth_time)),issuedAtTime:n_(i_(o.iat)),expirationTime:n_(i_(o.exp)),signInProvider:s||null,signInSecondFactor:(null===u||void 0===u?void 0:u.sign_in_second_factor)||null});case 10:case"end":return e.stop()}}),e)}))),r_.apply(this,arguments)}function i_(e){return 1e3*Number(e)}function a_(e){var t=h(e.split("."),3),n=t[0],r=t[1],i=t[2];if(void 0===n||void 0===r||void 0===i)return kb("JWT malformed, contained fewer than 3 sections"),null;try{var a=M(r);return a?JSON.parse(a):(kb("Failed to decode base64 JWT payload"),null)}catch(o){return kb("Caught error parsing JWT payload as JSON",null===o||void 0===o?void 0:o.toString()),null}}function o_(e,t){return u_.apply(this,arguments)}function u_(){return u_=u(a().mark((function e(t,n){var r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r.length>2&&void 0!==r[2]&&r[2])){e.next=3;break}return e.abrupt("return",n);case 3:return e.prev=3,e.next=6,n;case 6:return e.abrupt("return",e.sent);case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof Y&&s_(e.t0))){e.next=15;break}if(t.auth.currentUser!==t){e.next=15;break}return e.next=15,t.auth.signOut();case 15:throw e.t0;case 16:case"end":return e.stop()}}),e,null,[[3,9]])}))),u_.apply(this,arguments)}function s_(e){var t=e.code;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}var c_=function(){function e(t){S(this,e),this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}return N(e,[{key:"_start",value:function(){this.isRunning||(this.isRunning=!0,this.schedule())}},{key:"_stop",value:function(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}},{key:"getInterval",value:function(e){var t;if(e){var n=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),n}this.errorBackoff=3e4;var r=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,r)}},{key:"schedule",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isRunning){var n=this.getInterval(t);this.timerId=setTimeout(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.iteration();case 2:case"end":return t.stop()}}),t)}))),n)}}},{key:"iteration",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.user.getIdToken(!0);case 3:e.next=9;break;case 5:return e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")&&this.schedule(!0),e.abrupt("return");case 9:this.schedule();case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),l_=function(){function e(t,n){S(this,e),this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}return N(e,[{key:"_initializeTime",value:function(){this.lastSignInTime=n_(this.lastLoginAt),this.creationTime=n_(this.createdAt)}},{key:"_copy",value:function(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}},{key:"toJSON",value:function(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}]),e}();function f_(e){return h_.apply(this,arguments)}function h_(){return h_=u(a().mark((function e(t){var n,r,i,o,u,s,c,l,f,h,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.auth,e.next=3,t.getIdToken();case 3:return i=e.sent,e.next=6,o_(t,e_(r,{idToken:i}));case 6:Eb(null===(o=e.sent)||void 0===o?void 0:o.users.length,r,"internal-error"),u=o.users[0],t._notifyReloadListener(u),s=(null===(n=u.providerUserInfo)||void 0===n?void 0:n.length)?u.providerUserInfo.map((function(e){var t=e.providerId,n=tb(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],c=p_(t.providerData,s),l=t.isAnonymous,f=!(t.email&&u.passwordHash)&&!(null===c||void 0===c?void 0:c.length),h=!!l&&f,d={uid:u.localId,displayName:u.displayName||null,photoURL:u.photoUrl||null,email:u.email||null,emailVerified:u.emailVerified||!1,phoneNumber:u.phoneNumber||null,tenantId:u.tenantId||null,providerData:c,metadata:new l_(u.createdAt,u.lastLoginAt),isAnonymous:h},Object.assign(t,d);case 17:case"end":return e.stop()}}),e)}))),h_.apply(this,arguments)}function d_(){return(d_=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ce(t),e.next=3,f_(n);case 3:return e.next=5,n.auth._persistUserIfCurrent(n);case 5:n.auth._notifyListenersIfCurrent(n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p_(e,t){var n=e.filter((function(e){return!t.some((function(t){return t.providerId===e.providerId}))}));return[].concat(T(n),T(t))}function v_(e,t){return y_.apply(this,arguments)}function y_(){return y_=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Vb(t,{},u(a().mark((function e(){var r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=re({grant_type:"refresh_token",refresh_token:n}).slice(1),i=t.config,o=i.tokenApiHost,u=i.apiKey,s=qb(t,o,"/v1/token","key=".concat(u)),e.next=5,t._getAdditionalHeaders();case 5:return(c=e.sent)["Content-Type"]="application/x-www-form-urlencoded",e.abrupt("return",Db.fetch()(s,{method:"POST",headers:c,body:r}));case 8:case"end":return e.stop()}}),e)}))));case 2:return r=e.sent,e.abrupt("return",{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token});case 4:case"end":return e.stop()}}),e)}))),y_.apply(this,arguments)}var m_=function(){function e(){S(this,e),this.refreshToken=null,this.accessToken=null,this.expirationTime=null}return N(e,[{key:"isExpired",get:function(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}},{key:"updateFromServerResponse",value:function(e){Eb(e.idToken,"internal-error"),Eb("undefined"!==typeof e.idToken,"internal-error"),Eb("undefined"!==typeof e.refreshToken,"internal-error");var t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){var t=a_(e);return Eb(t,"internal-error"),Eb("undefined"!==typeof t.exp,"internal-error"),Eb("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}},{key:"getToken",value:function(){var e=u(a().mark((function e(t){var n,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]&&r[1],Eb(!this.accessToken||this.refreshToken,t,"user-token-expired"),n||!this.accessToken||this.isExpired){e.next=4;break}return e.abrupt("return",this.accessToken);case 4:if(!this.refreshToken){e.next=8;break}return e.next=7,this.refresh(t,this.refreshToken);case 7:return e.abrupt("return",this.accessToken);case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearRefreshToken",value:function(){this.refreshToken=null}},{key:"refresh",value:function(){var e=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v_(t,n);case 2:r=e.sent,i=r.accessToken,o=r.refreshToken,u=r.expiresIn,this.updateTokensAndExpiration(i,o,Number(u));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTokensAndExpiration",value:function(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}},{key:"toJSON",value:function(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}},{key:"_assign",value:function(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}},{key:"_clone",value:function(){return Object.assign(new e,this.toJSON())}},{key:"_performRefresh",value:function(){return Tb("not implemented")}}],[{key:"fromJSON",value:function(t,n){var r=n.refreshToken,i=n.accessToken,a=n.expirationTime,o=new e;return r&&(Eb("string"===typeof r,"internal-error",{appName:t}),o.refreshToken=r),i&&(Eb("string"===typeof i,"internal-error",{appName:t}),o.accessToken=i),a&&(Eb("number"===typeof a,"internal-error",{appName:t}),o.expirationTime=a),o}}]),e}();function g_(e,t){Eb("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}var k_=function(){function e(t){S(this,e);var n=t.uid,r=t.auth,i=t.stsTokenManager,a=tb(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new c_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=a.displayName||null,this.email=a.email||null,this.emailVerified=a.emailVerified||!1,this.phoneNumber=a.phoneNumber||null,this.photoURL=a.photoURL||null,this.isAnonymous=a.isAnonymous||!1,this.tenantId=a.tenantId||null,this.providerData=a.providerData?T(a.providerData):[],this.metadata=new l_(a.createdAt||void 0,a.lastLoginAt||void 0)}return N(e,[{key:"getIdToken",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o_(this,this.stsTokenManager.getToken(this.auth,t));case 2:if(Eb(n=e.sent,this.auth,"internal-error"),this.accessToken===n){e.next=9;break}return this.accessToken=n,e.next=8,this.auth._persistUserIfCurrent(this);case 8:this.auth._notifyListenersIfCurrent(this);case 9:return e.abrupt("return",n);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getIdTokenResult",value:function(e){return function(e){return r_.apply(this,arguments)}(this,e)}},{key:"reload",value:function(){return function(e){return d_.apply(this,arguments)}(this)}},{key:"_assign",value:function(e){this!==e&&(Eb(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((function(e){return Object.assign({},e)})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}},{key:"_clone",value:function(t){var n=new e(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}},{key:"_onReload",value:function(e){Eb(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}},{key:"_notifyReloadListener",value:function(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}},{key:"_startProactiveRefresh",value:function(){this.proactiveRefresh._start()}},{key:"_stopProactiveRefresh",value:function(){this.proactiveRefresh._stop()}},{key:"_updateTokensIfNecessary",value:function(){var e=u(a().mark((function e(t){var n,r,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],r=!1,t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),!n){e.next=6;break}return e.next=6,f_(this);case 6:return e.next=8,this.auth._persistUserIfCurrent(this);case 8:r&&this.auth._notifyListenersIfCurrent(this);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getIdToken();case 2:return t=e.sent,e.next=5,o_(this,Yb(this.auth,{idToken:t}));case 5:return this.stsTokenManager.clearRefreshToken(),e.abrupt("return",this.auth.signOut());case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"toJSON",value:function(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((function(e){return Object.assign({},e)})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}},{key:"refreshToken",get:function(){return this.stsTokenManager.refreshToken||""}}],[{key:"_fromJSON",value:function(t,n){var r,i,a,o,u,s,c,l,f=null!==(r=n.displayName)&&void 0!==r?r:void 0,h=null!==(i=n.email)&&void 0!==i?i:void 0,d=null!==(a=n.phoneNumber)&&void 0!==a?a:void 0,p=null!==(o=n.photoURL)&&void 0!==o?o:void 0,v=null!==(u=n.tenantId)&&void 0!==u?u:void 0,y=null!==(s=n._redirectEventId)&&void 0!==s?s:void 0,m=null!==(c=n.createdAt)&&void 0!==c?c:void 0,g=null!==(l=n.lastLoginAt)&&void 0!==l?l:void 0,k=n.uid,w=n.emailVerified,b=n.isAnonymous,_=n.providerData,x=n.stsTokenManager;Eb(k&&x,t,"internal-error");var I=m_.fromJSON(this.name,x);Eb("string"===typeof k,t,"internal-error"),g_(f,t.name),g_(h,t.name),Eb("boolean"===typeof w,t,"internal-error"),Eb("boolean"===typeof b,t,"internal-error"),g_(d,t.name),g_(p,t.name),g_(v,t.name),g_(y,t.name),g_(m,t.name),g_(g,t.name);var E=new e({uid:k,auth:t,email:h,emailVerified:w,displayName:f,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:v,stsTokenManager:I,createdAt:m,lastLoginAt:g});return _&&Array.isArray(_)&&(E.providerData=_.map((function(e){return Object.assign({},e)}))),y&&(E._redirectEventId=y),E}},{key:"_fromIdTokenResponse",value:function(){var t=u(a().mark((function t(n,r){var i,o,u,s=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=s.length>2&&void 0!==s[2]&&s[2],(o=new m_).updateFromServerResponse(r),u=new e({uid:r.localId,auth:n,stsTokenManager:o,isAnonymous:i}),t.next=6,f_(u);case 6:return t.abrupt("return",u);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}(),w_=new Map;function b_(e){Sb(e instanceof Function,"Expected a class definition");var t=w_.get(e);return t?(Sb(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,w_.set(e,t),t)}var __=function(){function e(){S(this,e),this.type="NONE",this.storage={}}return N(e,[{key:"_isAvailable",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",!0);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.storage[t]=n;case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.storage[t],e.abrupt("return",void 0===n?null:n);case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:delete this.storage[t];case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),e}();__.type="NONE";var x_=__;function I_(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}var E_=function(){function e(t,n,r){S(this,e),this.persistence=t,this.auth=n,this.userKey=r;var i=this.auth,a=i.config,o=i.name;this.fullUserKey=I_(this.userKey,a.apiKey,o),this.fullPersistenceKey=I_("persistence",a.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}return N(e,[{key:"setCurrentUser",value:function(e){return this.persistence._set(this.fullUserKey,e.toJSON())}},{key:"getCurrentUser",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.persistence._get(this.fullUserKey);case 2:return t=e.sent,e.abrupt("return",t?k_._fromJSON(this.auth,t):null);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeCurrentUser",value:function(){return this.persistence._remove(this.fullUserKey)}},{key:"savePersistenceForRedirect",value:function(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}},{key:"setPersistence",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.persistence!==t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.getCurrentUser();case 4:return n=e.sent,e.next=7,this.removeCurrentUser();case 7:if(this.persistence=t,!n){e.next=10;break}return e.abrupt("return",this.setCurrentUser(n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"delete",value:function(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}}],[{key:"create",value:function(){var t=u(a().mark((function t(n,r){var i,o,s,c,l,f,h,d,p,v,y,m=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=m.length>2&&void 0!==m[2]?m[2]:"authUser",r.length){t.next=3;break}return t.abrupt("return",new e(b_(x_),n,i));case 3:return t.next=5,Promise.all(r.map(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._isAvailable();case 2:if(!e.sent){e.next=4;break}return e.abrupt("return",t);case 4:return e.abrupt("return",void 0);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 5:o=t.sent.filter((function(e){return e})),s=o[0]||b_(x_),c=I_(i,n.config.apiKey,n.name),l=null,f=b(r),t.prev=10,f.s();case 12:if((h=f.n()).done){t.next=29;break}return d=h.value,t.prev=14,t.next=17,d._get(c);case 17:if(!(p=t.sent)){t.next=23;break}return v=k_._fromJSON(n,p),d!==s&&(l=v),s=d,t.abrupt("break",29);case 23:t.next=27;break;case 25:t.prev=25,t.t0=t.catch(14);case 27:t.next=12;break;case 29:t.next=34;break;case 31:t.prev=31,t.t1=t.catch(10),f.e(t.t1);case 34:return t.prev=34,f.f(),t.finish(34);case 37:if(y=o.filter((function(e){return e._shouldAllowMigration})),s._shouldAllowMigration&&y.length){t.next=40;break}return t.abrupt("return",new e(s,n,i));case 40:if(s=y[0],!l){t.next=44;break}return t.next=44,s._set(c,l.toJSON());case 44:return t.next=46,Promise.all(r.map(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t===s){e.next=8;break}return e.prev=1,e.next=4,t._remove(c);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()));case 46:return t.abrupt("return",new e(s,n,i));case 47:case"end":return t.stop()}}),t,null,[[10,31,34,37],[14,25]])})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();function T_(e){var t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(N_(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(S_(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(R_(t))return"Blackberry";if(D_(t))return"Webos";if(A_(t))return"Safari";if((t.includes("chrome/")||C_(t))&&!t.includes("edge/"))return"Chrome";if(P_(t))return"Android";var n=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);return 2===(null===n||void 0===n?void 0:n.length)?n[1]:"Other"}function S_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/firefox\//i.test(e)}function A_(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:G()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function C_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/crios\//i.test(e)}function N_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/iemobile/i.test(e)}function P_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/android/i.test(e)}function R_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/blackberry/i.test(e)}function D_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/webos/i.test(e)}function O_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function L_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return O_(e)||P_(e)||D_(e)||R_(e)||/windows phone/i.test(e)||N_(e)}function M_(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=T_(G());break;case"Worker":t="".concat(T_(G()),"-").concat(e);break;default:t=e}var r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(ot,"/").concat(r)}var F_=function(){function e(t){S(this,e),this.auth=t,this.queue=[]}return N(e,[{key:"pushCallback",value:function(e,t){var n=this,r=function(t){return new Promise((function(n,r){try{n(e(t))}catch(i){r(i)}}))};r.onAbort=t,this.queue.push(r);var i=this.queue.length-1;return function(){n.queue[i]=function(){return Promise.resolve()}}}},{key:"runMiddleware",value:function(){var e=u(a().mark((function e(t){var n,r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.auth.currentUser!==t){e.next=2;break}return e.abrupt("return");case 2:n=[],e.prev=3,r=b(this.queue),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=14;break}return o=i.value,e.next=11,o(t);case 11:o.onAbort&&n.push(o.onAbort);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),r.e(e.t0);case 19:return e.prev=19,r.f(),e.finish(19);case 22:e.next=30;break;case 24:e.prev=24,e.t1=e.catch(3),n.reverse(),u=b(n);try{for(u.s();!(s=u.n()).done;){c=s.value;try{c()}catch(a){}}}catch(l){u.e(l)}finally{u.f()}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===e.t1||void 0===e.t1?void 0:e.t1.message});case 30:case"end":return e.stop()}}),e,this,[[3,24],[5,16,19,22]])})));return function(t){return e.apply(this,arguments)}}()}]),e}();function U_(e){return V_.apply(this,arguments)}function V_(){return V_=u(a().mark((function e(t){var n,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Fb(t,"GET","/v2/passwordPolicy",Mb(t,n)));case 2:case"end":return e.stop()}}),e)}))),V_.apply(this,arguments)}var B_=function(){function e(t){var n,r,i,a;S(this,e);var o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(n=o.minPasswordLength)&&void 0!==n?n:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(r=t.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(a=t.forceUpgradeOnSignin)&&void 0!==a&&a,this.schemaVersion=t.schemaVersion}return N(e,[{key:"validatePassword",value:function(e){var t,n,r,i,a,o,u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=null===(t=u.meetsMinPasswordLength)||void 0===t||t),u.isValid&&(u.isValid=null===(n=u.meetsMaxPasswordLength)||void 0===n||n),u.isValid&&(u.isValid=null===(r=u.containsLowercaseLetter)||void 0===r||r),u.isValid&&(u.isValid=null===(i=u.containsUppercaseLetter)||void 0===i||i),u.isValid&&(u.isValid=null===(a=u.containsNumericCharacter)||void 0===a||a),u.isValid&&(u.isValid=null===(o=u.containsNonAlphanumericCharacter)||void 0===o||o),u}},{key:"validatePasswordLengthOptions",value:function(e,t){var n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}},{key:"validatePasswordCharacterOptions",value:function(e,t){var n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(var r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}},{key:"updatePasswordCharacterOptionsStatuses",value:function(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}]),e}(),j_=function(){function e(t,n,r,i){S(this,e),this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new q_(this),this.idTokenSubscription=new q_(this),this.beforeStateQueue=new F_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}return N(e,[{key:"_initializeWithPersistence",value:function(e,t){var n=this;return t&&(this._popupRedirectResolver=b_(t)),this._initializationPromise=this.queue(u(a().mark((function r(){var i,o;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!n._deleted){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,E_.create(n,e);case 4:if(n.persistenceManager=r.sent,!n._deleted){r.next=7;break}return r.abrupt("return");case 7:if(!(null===(i=n._popupRedirectResolver)||void 0===i?void 0:i._shouldInitProactively)){r.next=15;break}return r.prev=8,r.next=11,n._popupRedirectResolver._initialize(n);case 11:r.next=15;break;case 13:r.prev=13,r.t0=r.catch(8);case 15:return r.next=17,n.initializeCurrentUser(t);case 17:if(n.lastNotifiedUid=(null===(o=n.currentUser)||void 0===o?void 0:o.uid)||null,!n._deleted){r.next=20;break}return r.abrupt("return");case 20:n._isInitialized=!0;case 21:case"end":return r.stop()}}),r,null,[[8,13]])})))),this._initializationPromise}},{key:"_onStorageEvent",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._deleted){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.assertedPersistence.getCurrentUser();case 4:if(t=e.sent,this.currentUser||t){e.next=7;break}return e.abrupt("return");case 7:if(!this.currentUser||!t||this.currentUser.uid!==t.uid){e.next=12;break}return this._currentUser._assign(t),e.next=11,this.currentUser.getIdToken();case 11:return e.abrupt("return");case 12:return e.next=14,this._updateCurrentUser(t,!0);case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeCurrentUser",value:function(){var e=u(a().mark((function e(t){var n,r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.assertedPersistence.getCurrentUser();case 2:if(r=e.sent,i=r,o=!1,!t||!this.config.authDomain){e.next=14;break}return e.next=8,this.getOrInitRedirectPersistenceManager();case 8:return u=null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,e.next=12,this.tryRedirectSignIn(t);case 12:c=e.sent,u&&u!==s||!(null===c||void 0===c?void 0:c.user)||(i=c.user,o=!0);case 14:if(i){e.next=16;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 16:if(i._redirectEventId){e.next=32;break}if(!o){e.next=27;break}return e.prev=18,e.next=21,this.beforeStateQueue.runMiddleware(i);case 21:e.next=27;break;case 23:e.prev=23,e.t0=e.catch(18),i=r,this._popupRedirectResolver._overrideRedirectResult(this,(function(){return Promise.reject(e.t0)}));case 27:if(!i){e.next=31;break}return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 31:return e.abrupt("return",this.directlySetCurrentUser(null));case 32:return Eb(this._popupRedirectResolver,this,"argument-error"),e.next=35,this.getOrInitRedirectPersistenceManager();case 35:if(!this.redirectUser||this.redirectUser._redirectEventId!==i._redirectEventId){e.next=37;break}return e.abrupt("return",this.directlySetCurrentUser(i));case 37:return e.abrupt("return",this.reloadAndSetCurrentUserOrClear(i));case 38:case"end":return e.stop()}}),e,this,[[18,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"tryRedirectSignIn",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=null,e.prev=1,e.next=4,this._popupRedirectResolver._completeRedirectFn(this,t,!0);case 4:n=e.sent,e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(1),e.next=11,this._setRedirectUser(null);case 11:return e.abrupt("return",n);case 12:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"reloadAndSetCurrentUserOrClear",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f_(t);case 3:e.next=9;break;case 5:if(e.prev=5,e.t0=e.catch(0),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("network-request-failed")){e.next=9;break}return e.abrupt("return",this.directlySetCurrentUser(null));case 9:return e.abrupt("return",this.directlySetCurrentUser(t));case 10:case"end":return e.stop()}}),e,this,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"useDeviceLanguage",value:function(){this.languageCode=function(){if("undefined"===typeof navigator)return null;var e=navigator;return e.languages&&e.languages[0]||e.language||null}()}},{key:"_delete",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this._deleted=!0;case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t?ce(t):null)&&Eb(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),e.abrupt("return",this._updateCurrentUser(n&&n._clone(this)));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_updateCurrentUser",value:function(){var e=u(a().mark((function e(t){var n,r=this,i=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]&&i[1],!this._deleted){e.next=3;break}return e.abrupt("return");case 3:if(t&&Eb(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n){e.next=7;break}return e.next=7,this.beforeStateQueue.runMiddleware(t);case 7:return e.abrupt("return",this.queue(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.directlySetCurrentUser(t);case 2:r.notifyAuthListeners();case 3:case"end":return e.stop()}}),e)})))));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signOut",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.beforeStateQueue.runMiddleware(null);case 2:if(!this.redirectPersistenceManager&&!this._popupRedirectResolver){e.next=5;break}return e.next=5,this._setRedirectUser(null);case 5:return e.abrupt("return",this._updateCurrentUser(null,!0));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setPersistence",value:function(e){var t=this;return this.queue(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.assertedPersistence.setPersistence(b_(e));case 2:case"end":return n.stop()}}),n)}))))}},{key:"_getRecaptchaConfig",value:function(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}},{key:"validatePassword",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._getPasswordPolicyInternal()){e.next=3;break}return e.next=3,this._updatePasswordPolicy();case 3:if((n=this._getPasswordPolicyInternal()).schemaVersion===this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION){e.next=6;break}return e.abrupt("return",Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})));case 6:return e.abrupt("return",n.validatePassword(t));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getPasswordPolicyInternal",value:function(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}},{key:"_updatePasswordPolicy",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U_(this);case 2:t=e.sent,n=new B_(t),null===this.tenantId?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n;case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getPersistence",value:function(){return this.assertedPersistence.persistence.type}},{key:"_updateErrorMap",value:function(e){this._errorFactory=new X("auth","Firebase",e())}},{key:"onAuthStateChanged",value:function(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}},{key:"beforeAuthStateChanged",value:function(e,t){return this.beforeStateQueue.pushCallback(e,t)}},{key:"onIdTokenChanged",value:function(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}},{key:"authStateReady",value:function(){var e=this;return new Promise((function(t,n){if(e.currentUser)t();else var r=e.onAuthStateChanged((function(){r(),t()}),n)}))}},{key:"toJSON",value:function(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}},{key:"_setRedirectUser",value:function(){var e=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getOrInitRedirectPersistenceManager(n);case 2:return r=e.sent,e.abrupt("return",null===t?r.removeCurrentUser():r.setCurrentUser(t));case 4:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getOrInitRedirectPersistenceManager",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.redirectPersistenceManager){e.next=9;break}return Eb(n=t&&b_(t)||this._popupRedirectResolver,this,"argument-error"),e.next=5,E_.create(this,[b_(n._redirectPersistence)],"redirectUser");case 5:return this.redirectPersistenceManager=e.sent,e.next=8,this.redirectPersistenceManager.getCurrentUser();case 8:this.redirectUser=e.sent;case 9:return e.abrupt("return",this.redirectPersistenceManager);case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_redirectUserForId",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isInitialized){e.next=3;break}return e.next=3,this.queue(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))));case 3:if((null===(n=this._currentUser)||void 0===n?void 0:n._redirectEventId)!==t){e.next=5;break}return e.abrupt("return",this._currentUser);case 5:if((null===(r=this.redirectUser)||void 0===r?void 0:r._redirectEventId)!==t){e.next=7;break}return e.abrupt("return",this.redirectUser);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_persistUserIfCurrent",value:function(){var e=u(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==this.currentUser){e.next=2;break}return e.abrupt("return",this.queue(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.directlySetCurrentUser(t));case 1:case"end":return e.stop()}}),e)})))));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_notifyListenersIfCurrent",value:function(e){e===this.currentUser&&this.notifyAuthListeners()}},{key:"_key",value:function(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}},{key:"_startProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}},{key:"_stopProactiveRefresh",value:function(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}},{key:"_currentUser",get:function(){return this.currentUser}},{key:"notifyAuthListeners",value:function(){var e,t;if(this._isInitialized){this.idTokenSubscription.next(this.currentUser);var n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}}},{key:"registerStateListener",value:function(e,t,n,r){var i=this;if(this._deleted)return function(){};var a="function"===typeof t?t:t.next.bind(t),o=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(Eb(u,this,"internal-error"),u.then((function(){o||a(i.currentUser)})),"function"===typeof t){var s=e.addObserver(t,n,r);return function(){o=!0,s()}}var c=e.addObserver(t);return function(){o=!0,c()}}},{key:"directlySetCurrentUser",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,!t){e.next=8;break}return e.next=6,this.assertedPersistence.setCurrentUser(t);case 6:e.next=10;break;case 8:return e.next=10,this.assertedPersistence.removeCurrentUser();case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"queue",value:function(e){return this.operations=this.operations.then(e,e),this.operations}},{key:"assertedPersistence",get:function(){return Eb(this.persistenceManager,this,"internal-error"),this.persistenceManager}},{key:"_logFramework",value:function(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=M_(this.config.clientPlatform,this._getFrameworks()))}},{key:"_getFrameworks",value:function(){return this.frameworks}},{key:"_getAdditionalHeaders",value:function(){var e=u(a().mark((function e(){var t,n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=P({},"X-Client-Version",this.clientVersion),this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId),e.next=4,null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader();case 4:return(r=e.sent)&&(n["X-Firebase-Client"]=r),e.next=8,this._getAppCheckToken();case 8:return(i=e.sent)&&(n["X-Firebase-AppCheck"]=i),e.abrupt("return",n);case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken();case 2:return(null===(n=e.sent)||void 0===n?void 0:n.error)&&gb("Error while retrieving App Check token: ".concat(n.error)),e.abrupt("return",null===n||void 0===n?void 0:n.token);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function z_(e){return ce(e)}var q_=function(){function e(t){var n=this;S(this,e),this.auth=t,this.observer=null,this.addObserver=oe((function(e){return n.observer=e}))}return N(e,[{key:"next",get:function(){return Eb(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}]),e}();function G_(e){return new Promise((function(t,n){var r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=function(e){var t=bb("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}))}function K_(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}var H_=function(){function e(t){S(this,e),this.type="recaptcha-enterprise",this.auth=z_(t)}return N(e,[{key:"verify",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o,s=this,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e,n,r){var i=window.grecaptcha;fb(i)?i.enterprise.ready((function(){i.enterprise.execute(e,{action:t}).then((function(e){n(e)})).catch((function(){n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))},i=function(){return i=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=5;break}if(null!=t.tenantId||null==t._agentRecaptchaConfig){e.next=3;break}return e.abrupt("return",t._agentRecaptchaConfig.siteKey);case 3:if(null==t.tenantId||void 0===t._tenantRecaptchaConfigs[t.tenantId]){e.next=5;break}return e.abrupt("return",t._tenantRecaptchaConfigs[t.tenantId].siteKey);case 5:return e.abrupt("return",new Promise(function(){var e=u(a().mark((function e(n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Wb(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((function(e){if(void 0!==e.recaptchaKey){var i=new hb(e);return null==t.tenantId?t._agentRecaptchaConfig=i:t._tenantRecaptchaConfigs[t.tenantId]=i,n(i.siteKey)}r(new Error("recaptcha Enterprise site key undefined"))})).catch((function(e){r(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()));case 6:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)},r=function(e){return i.apply(this,arguments)},t=c.length>0&&void 0!==c[0]?c[0]:"verify",n=c.length>1&&void 0!==c[1]&&c[1],e.abrupt("return",new Promise((function(e,t){r(s.auth).then((function(r){if(!n&&fb(window.grecaptcha))o(r,e,t);else{if("undefined"===typeof window)return void t(new Error("RecaptchaVerifier is only supported in browser"));G_("https://www.google.com/recaptcha/enterprise.js?render="+r).then((function(){o(r,e,t)})).catch((function(e){t(e)}))}})).catch((function(e){t(e)}))})));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}();function Q_(e,t,n){return W_.apply(this,arguments)}function W_(){return W_=u(a().mark((function e(t,n,r){var i,o,u,s,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.length>3&&void 0!==c[3]&&c[3],o=new H_(t),e.prev=2,e.next=5,o.verify(r);case 5:u=e.sent,e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(2),e.next=12,o.verify(r,!0);case 12:u=e.sent;case 13:return s=Object.assign({},n),i?Object.assign(s,{captchaResp:u}):Object.assign(s,{captchaResponse:u}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),e.abrupt("return",s);case 18:case"end":return e.stop()}}),e,null,[[2,8]])}))),W_.apply(this,arguments)}function J_(e,t,n){var r=z_(e);Eb(r._canInitEmulator,r,"emulator-config-failed"),Eb(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");var i=!!(null===n||void 0===n?void 0:n.disableWarnings),a=Y_(t),o=function(e){var t=Y_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};var r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){var a=i[1];return{host:a,port:X_(r.substr(a.length+1))}}var o=h(r.split(":"),2);return{host:o[0],port:X_(o[1])}}(t),u=o.host,s=o.port,c=null===s?"":":".concat(s);r.config.emulator={url:"".concat(a,"//").concat(u).concat(c,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:u,port:s,protocol:a.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){var e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Y_(e){var t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function X_(e){if(!e)return null;var t=Number(e);return isNaN(t)?null:t}var Z_=function(){function e(t,n){S(this,e),this.providerId=t,this.signInMethod=n}return N(e,[{key:"toJSON",value:function(){return Tb("not implemented")}},{key:"_getIdTokenResponse",value:function(e){return Tb("not implemented")}},{key:"_linkToIdToken",value:function(e,t){return Tb("not implemented")}},{key:"_getReauthenticationResolver",value:function(e){return Tb("not implemented")}}]),e}();function $_(e,t){return ex.apply(this,arguments)}function ex(){return ex=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,"POST","/v1/accounts:resetPassword",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),ex.apply(this,arguments)}function tx(e,t){return nx.apply(this,arguments)}function nx(){return nx=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),nx.apply(this,arguments)}function rx(e,t){return ix.apply(this,arguments)}function ix(){return ix=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,"POST","/v1/accounts:update",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),ix.apply(this,arguments)}function ax(e,t){return ox.apply(this,arguments)}function ox(){return ox=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jb(t,"POST","/v1/accounts:signInWithPassword",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),ox.apply(this,arguments)}function ux(e,t){return sx.apply(this,arguments)}function sx(){return sx=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,"POST","/v1/accounts:sendOobCode",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),sx.apply(this,arguments)}function cx(e,t){return lx.apply(this,arguments)}function lx(){return lx=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ux(t,n));case 1:case"end":return e.stop()}}),e)}))),lx.apply(this,arguments)}function fx(e,t){return hx.apply(this,arguments)}function hx(){return hx=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ux(t,n));case 1:case"end":return e.stop()}}),e)}))),hx.apply(this,arguments)}function dx(e,t){return px.apply(this,arguments)}function px(){return px=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ux(t,n));case 1:case"end":return e.stop()}}),e)}))),px.apply(this,arguments)}function vx(e,t){return yx.apply(this,arguments)}function yx(){return yx=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ux(t,n));case 1:case"end":return e.stop()}}),e)}))),yx.apply(this,arguments)}function mx(e,t){return gx.apply(this,arguments)}function gx(){return gx=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jb(t,"POST","/v1/accounts:signInWithEmailLink",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),gx.apply(this,arguments)}function kx(e,t){return wx.apply(this,arguments)}function wx(){return wx=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jb(t,"POST","/v1/accounts:signInWithEmailLink",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),wx.apply(this,arguments)}var bx=function(e){_(n,e);var t=I(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return S(this,n),(a=t.call(this,"password",i))._email=e,a._password=r,a._tenantId=o,a}return N(n,[{key:"toJSON",value:function(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}},{key:"_getIdTokenResponse",value:function(){var e=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?12:13;break;case 3:if(r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},!(null===(n=t._getRecaptchaConfig())||void 0===n?void 0:n.emailPasswordEnabled)){e.next=11;break}return e.next=7,Q_(t,r,"signInWithPassword");case 7:return i=e.sent,e.abrupt("return",ax(t,i));case 11:return e.abrupt("return",ax(t,r).catch(function(){var e=u(a().mark((function e(n){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.code!=="auth/".concat("missing-recaptcha-token")){e.next=8;break}return console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Q_(t,r,"signInWithPassword");case 4:return i=e.sent,e.abrupt("return",ax(t,i));case 8:return e.abrupt("return",Promise.reject(n));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 12:return e.abrupt("return",mx(t,{email:this._email,oobCode:this._password}));case 13:wb(t,"internal-error");case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_linkToIdToken",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=this.signInMethod,e.next="password"===e.t0?3:"emailLink"===e.t0?4:5;break;case 3:return e.abrupt("return",tx(t,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password}));case 4:return e.abrupt("return",kx(t,{idToken:n,email:this._email,oobCode:this._password}));case 5:wb(t,"internal-error");case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getReauthenticationResolver",value:function(e){return this._getIdTokenResponse(e)}}],[{key:"_fromEmailAndPassword",value:function(e,t){return new n(e,t,"password")}},{key:"_fromEmailAndCode",value:function(e,t){return new n(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}}]),n}(Z_);function _x(e,t){return xx.apply(this,arguments)}function xx(){return xx=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jb(t,"POST","/v1/accounts:signInWithIdp",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),xx.apply(this,arguments)}var Ix=function(e){_(n,e);var t=I(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).pendingToken=null,e}return N(n,[{key:"toJSON",value:function(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}},{key:"_getIdTokenResponse",value:function(e){return _x(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_x(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_x(e,t)}},{key:"buildRequest",value:function(){var e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{var t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=re(t)}return e}}],[{key:"_fromParams",value:function(e){var t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):wb("argument-error"),t}},{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=tb(t,["providerId","signInMethod"]);if(!r||!i)return null;var o=new n(r,i);return o.idToken=a.idToken||void 0,o.accessToken=a.accessToken||void 0,o.secret=a.secret,o.nonce=a.nonce,o.pendingToken=a.pendingToken||null,o}}]),n}(Z_);function Ex(e,t){return Tx.apply(this,arguments)}function Tx(){return Tx=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,"POST","/v1/accounts:sendVerificationCode",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Tx.apply(this,arguments)}function Sx(){return Sx=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jb(t,"POST","/v1/accounts:signInWithPhoneNumber",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Sx.apply(this,arguments)}function Ax(){return Ax=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jb(t,"POST","/v1/accounts:signInWithPhoneNumber",Mb(t,n));case 2:if(!(r=e.sent).temporaryProof){e.next=5;break}throw Kb(t,"account-exists-with-different-credential",r);case 5:return e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)}))),Ax.apply(this,arguments)}var Cx=P({},"USER_NOT_FOUND","user-not-found");function Nx(){return Nx=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Object.assign(Object.assign({},n),{operation:"REAUTH"}),e.abrupt("return",jb(t,"POST","/v1/accounts:signInWithPhoneNumber",Mb(t,r),Cx));case 2:case"end":return e.stop()}}),e)}))),Nx.apply(this,arguments)}var Px=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this,"phone","phone")).params=e,r}return N(n,[{key:"_getIdTokenResponse",value:function(e){return function(e,t){return Sx.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_linkToIdToken",value:function(e,t){return function(e,t){return Ax.apply(this,arguments)}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}},{key:"_getReauthenticationResolver",value:function(e){return function(e,t){return Nx.apply(this,arguments)}(e,this._makeVerificationRequest())}},{key:"_makeVerificationRequest",value:function(){var e=this.params,t=e.temporaryProof,n=e.phoneNumber,r=e.verificationId,i=e.verificationCode;return t&&n?{temporaryProof:t,phoneNumber:n}:{sessionInfo:r,code:i}}},{key:"toJSON",value:function(){var e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}}],[{key:"_fromVerification",value:function(e,t){return new n({verificationId:e,verificationCode:t})}},{key:"_fromTokenResponse",value:function(e,t){return new n({phoneNumber:e,temporaryProof:t})}},{key:"fromJSON",value:function(e){"string"===typeof e&&(e=JSON.parse(e));var t=e,r=t.verificationId,i=t.verificationCode,a=t.phoneNumber,o=t.temporaryProof;return i||r||a||o?new n({verificationId:r,verificationCode:i,phoneNumber:a,temporaryProof:o}):null}}]),n}(Z_);var Rx=function(){function e(t){var n,r,i,a,o,u;S(this,e);var s=ie(ae(t)),c=null!==(n=s.apiKey)&&void 0!==n?n:null,l=null!==(r=s.oobCode)&&void 0!==r?r:null,f=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=s.mode)&&void 0!==i?i:null);Eb(c&&l&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=l,this.continueUrl=null!==(a=s.continueUrl)&&void 0!==a?a:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(u=s.tenantId)&&void 0!==u?u:null}return N(e,null,[{key:"parseLink",value:function(t){var n=function(e){var t=ie(ae(e)).link,n=t?ie(ae(t)).deep_link_id:null,r=ie(ae(e)).deep_link_id;return(r?ie(ae(r)).link:null)||r||n||t||e}(t);try{return new e(n)}catch(r){return null}}}]),e}();var Dx=function(){function e(){S(this,e),this.providerId=e.PROVIDER_ID}return N(e,null,[{key:"credential",value:function(e,t){return bx._fromEmailAndPassword(e,t)}},{key:"credentialWithLink",value:function(e,t){var n=Rx.parseLink(t);return Eb(n,"argument-error"),bx._fromEmailAndCode(e,n.code,n.tenantId)}}]),e}();Dx.PROVIDER_ID="password",Dx.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Dx.EMAIL_LINK_SIGN_IN_METHOD="emailLink";var Ox=function(){function e(t){S(this,e),this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}return N(e,[{key:"setDefaultLanguage",value:function(e){this.defaultLanguageCode=e}},{key:"setCustomParameters",value:function(e){return this.customParameters=e,this}},{key:"getCustomParameters",value:function(){return this.customParameters}}]),e}(),Lx=function(e){_(n,e);var t=I(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).scopes=[],e}return N(n,[{key:"addScope",value:function(e){return this.scopes.includes(e)||this.scopes.push(e),this}},{key:"getScopes",value:function(){return T(this.scopes)}}]),n}(Ox),Mx=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.apply(this,arguments)}return N(n,[{key:"credential",value:function(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}},{key:"_credential",value:function(e){return Eb(e.idToken||e.accessToken,"argument-error"),Ix._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}}],[{key:"credentialFromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e;return Eb("providerId"in t&&"signInMethod"in t,"argument-error"),Ix._fromParams(t)}},{key:"credentialFromResult",value:function(e){return n.oauthCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.oauthCredentialFromTaggedObject(e.customData||{})}},{key:"oauthCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken,a=t.oauthTokenSecret,o=t.pendingToken,u=t.nonce,s=t.providerId;if(!i&&!a&&!r&&!o)return null;if(!s)return null;try{return new n(s)._credential({idToken:r,accessToken:i,nonce:u,pendingToken:o})}catch(c){return null}}}]),n}(Lx),Fx=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.call(this,"facebook.com")}return N(n,null,[{key:"credential",value:function(e){return Ix._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Lx);Fx.FACEBOOK_SIGN_IN_METHOD="facebook.com",Fx.PROVIDER_ID="facebook.com";var Ux=function(e){_(n,e);var t=I(n);function n(){var e;return S(this,n),(e=t.call(this,"google.com")).addScope("profile"),e}return N(n,null,[{key:"credential",value:function(e,t){return Ix._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthIdToken,i=t.oauthAccessToken;if(!r&&!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Lx);Ux.GOOGLE_SIGN_IN_METHOD="google.com",Ux.PROVIDER_ID="google.com";var Vx=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.call(this,"github.com")}return N(n,null,[{key:"credential",value:function(e){return Ix._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GITHUB_SIGN_IN_METHOD,accessToken:e})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return n.credential(t.oauthAccessToken)}catch(r){return null}}}]),n}(Lx);Vx.GITHUB_SIGN_IN_METHOD="github.com",Vx.PROVIDER_ID="github.com";var Bx=function(e){_(n,e);var t=I(n);function n(e,r){var i;return S(this,n),(i=t.call(this,e,e)).pendingToken=r,i}return N(n,[{key:"_getIdTokenResponse",value:function(e){return _x(e,this.buildRequest())}},{key:"_linkToIdToken",value:function(e,t){var n=this.buildRequest();return n.idToken=t,_x(e,n)}},{key:"_getReauthenticationResolver",value:function(e){var t=this.buildRequest();return t.autoCreate=!1,_x(e,t)}},{key:"toJSON",value:function(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}},{key:"buildRequest",value:function(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}],[{key:"fromJSON",value:function(e){var t="string"===typeof e?JSON.parse(e):e,r=t.providerId,i=t.signInMethod,a=t.pendingToken;return r&&i&&a&&r===i?new n(r,a):null}},{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Z_),jx=function(e){_(n,e);var t=I(n);function n(e){return S(this,n),Eb(e.startsWith("saml."),"argument-error"),t.call(this,e)}return N(n,null,[{key:"credentialFromResult",value:function(e){return n.samlCredentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.samlCredentialFromTaggedObject(e.customData||{})}},{key:"credentialFromJSON",value:function(e){var t=Bx.fromJSON(e);return Eb(t,"argument-error"),t}},{key:"samlCredentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.pendingToken,r=t.providerId;if(!n||!r)return null;try{return Bx._create(r,n)}catch(i){return null}}}]),n}(Ox),zx=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.call(this,"twitter.com")}return N(n,null,[{key:"credential",value:function(e,t){return Ix._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}},{key:"credentialFromResult",value:function(e){return n.credentialFromTaggedObject(e)}},{key:"credentialFromError",value:function(e){return n.credentialFromTaggedObject(e.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var r=t.oauthAccessToken,i=t.oauthTokenSecret;if(!r||!i)return null;try{return n.credential(r,i)}catch(a){return null}}}]),n}(Lx);function qx(e,t){return Gx.apply(this,arguments)}function Gx(){return Gx=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jb(t,"POST","/v1/accounts:signUp",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),Gx.apply(this,arguments)}zx.TWITTER_SIGN_IN_METHOD="twitter.com",zx.PROVIDER_ID="twitter.com";var Kx=function(){function e(t){S(this,e),this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}return N(e,null,[{key:"_fromIdTokenResponse",value:function(){var t=u(a().mark((function t(n,r,i){var o,u,s,c,l=arguments;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=l.length>3&&void 0!==l[3]&&l[3],t.next=3,k_._fromIdTokenResponse(n,i,o);case 3:return u=t.sent,s=Hx(i),c=new e({user:u,providerId:s,_tokenResponse:i,operationType:r}),t.abrupt("return",c);case 7:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()},{key:"_forOperation",value:function(){var t=u(a().mark((function t(n,r,i){var o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n._updateTokensIfNecessary(i,!0);case 2:return o=Hx(i),t.abrupt("return",new e({user:n,providerId:o,_tokenResponse:i,operationType:r}));case 4:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}()}]),e}();function Hx(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}function Qx(){return Qx=u(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=z_(t),e.next=3,r._initializationPromise;case 3:if(!(null===(n=r.currentUser)||void 0===n?void 0:n.isAnonymous)){e.next=5;break}return e.abrupt("return",new Kx({user:r.currentUser,providerId:null,operationType:"signIn"}));case 5:return e.next=7,qx(r,{returnSecureToken:!0});case 7:return i=e.sent,e.next=10,Kx._fromIdTokenResponse(r,"signIn",i,!0);case 10:return o=e.sent,e.next=13,r._updateCurrentUser(o.user);case 13:return e.abrupt("return",o);case 14:case"end":return e.stop()}}),e)}))),Qx.apply(this,arguments)}var Wx=function(e){_(n,e);var t=I(n);function n(e,r,i,a){var o,u;return S(this,n),(o=t.call(this,r.code,r.message)).operationType=i,o.user=a,Object.setPrototypeOf(x(o),n.prototype),o.customData={appName:e.name,tenantId:null!==(u=e.tenantId)&&void 0!==u?u:void 0,_serverResponse:r.customData._serverResponse,operationType:i},o}return N(n,null,[{key:"_fromErrorAndOperation",value:function(e,t,r,i){return new n(e,t,r,i)}}]),n}(Y);function Jx(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((function(n){if(n.code==="auth/".concat("multi-factor-auth-required"))throw Wx._fromErrorAndOperation(e,n,t,r);throw n}))}function Yx(e){return new Set(e.map((function(e){return e.providerId})).filter((function(e){return!!e})))}function Xx(e,t){return Zx.apply(this,arguments)}function Zx(){return Zx=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ce(t),e.next=3,tI(!0,r,n);case 3:return e.t0=Zb,e.t1=r.auth,e.next=7,r.getIdToken();case 7:return e.t2=e.sent,e.t3=[n],e.t4={idToken:e.t2,deleteProvider:e.t3},e.next=12,(0,e.t0)(e.t1,e.t4);case 12:return i=e.sent,o=i.providerUserInfo,u=Yx(o||[]),r.providerData=r.providerData.filter((function(e){return u.has(e.providerId)})),u.has("phone")||(r.phoneNumber=null),e.next=19,r.auth._persistUserIfCurrent(r);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}}),e)}))),Zx.apply(this,arguments)}function $x(e,t){return eI.apply(this,arguments)}function eI(){return eI=u(a().mark((function e(t,n){var r,i,o=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]&&o[2],e.t0=o_,e.t1=t,e.t2=n,e.t3=t.auth,e.next=7,t.getIdToken();case 7:return e.t4=e.sent,e.t5=e.t2._linkToIdToken.call(e.t2,e.t3,e.t4),e.t6=r,e.next=12,(0,e.t0)(e.t1,e.t5,e.t6);case 12:return i=e.sent,e.abrupt("return",Kx._forOperation(t,"link",i));case 14:case"end":return e.stop()}}),e)}))),eI.apply(this,arguments)}function tI(e,t,n){return nI.apply(this,arguments)}function nI(){return(nI=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f_(n);case 2:i=Yx(n.providerData),o=!1===t?"provider-already-linked":"no-such-provider",Eb(i.has(r)===t,n.auth,o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rI(e,t){return iI.apply(this,arguments)}function iI(){return iI=u(a().mark((function e(t,n){var r,i,o,u,s,c,l=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=l.length>2&&void 0!==l[2]&&l[2],i=t.auth,o="reauthenticate",e.prev=3,e.next=6,o_(t,Jx(i,o,n,t),r);case 6:return Eb((u=e.sent).idToken,i,"internal-error"),Eb(s=a_(u.idToken),i,"internal-error"),c=s.sub,Eb(t.uid===c,i,"user-mismatch"),e.abrupt("return",Kx._forOperation(t,o,u));case 15:throw e.prev=15,e.t0=e.catch(3),(null===e.t0||void 0===e.t0?void 0:e.t0.code)==="auth/".concat("user-not-found")&&wb(i,"user-mismatch"),e.t0;case 19:case"end":return e.stop()}}),e,null,[[3,15]])}))),iI.apply(this,arguments)}function aI(e,t){return oI.apply(this,arguments)}function oI(){return oI=u(a().mark((function e(t,n){var r,i,o,u,s=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>2&&void 0!==s[2]&&s[2],i="signIn",e.next=4,Jx(t,i,n);case 4:return o=e.sent,e.next=7,Kx._fromIdTokenResponse(t,i,o);case 7:if(u=e.sent,r){e.next=11;break}return e.next=11,t._updateCurrentUser(u.user);case 11:return e.abrupt("return",u);case 12:case"end":return e.stop()}}),e)}))),oI.apply(this,arguments)}function uI(e,t){return sI.apply(this,arguments)}function sI(){return sI=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",aI(z_(t),n));case 1:case"end":return e.stop()}}),e)}))),sI.apply(this,arguments)}function cI(e,t){return lI.apply(this,arguments)}function lI(){return(lI=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ce(t),e.next=3,tI(!1,r,n.providerId);case 3:return e.abrupt("return",$x(r,n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fI(e,t){return hI.apply(this,arguments)}function hI(){return(hI=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",rI(ce(t),n));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dI(e,t){return pI.apply(this,arguments)}function pI(){return pI=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",jb(t,"POST","/v1/accounts:signInWithCustomToken",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),pI.apply(this,arguments)}function vI(){return vI=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=z_(t),e.next=3,dI(r,{token:n,returnSecureToken:!0});case 3:return i=e.sent,e.next=6,Kx._fromIdTokenResponse(r,"signIn",i);case 6:return o=e.sent,e.next=9,r._updateCurrentUser(o.user);case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)}))),vI.apply(this,arguments)}var yI=function(){function e(t,n){S(this,e),this.factorId=t,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}return N(e,null,[{key:"_fromServerResponse",value:function(e,t){return"phoneInfo"in t?mI._fromServerResponse(e,t):"totpInfo"in t?gI._fromServerResponse(e,t):wb(e,"internal-error")}}]),e}(),mI=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this,"phone",e)).phoneNumber=e.phoneInfo,r}return N(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(yI),gI=function(e){_(n,e);var t=I(n);function n(e){return S(this,n),t.call(this,"totp",e)}return N(n,null,[{key:"_fromServerResponse",value:function(e,t){return new n(t)}}]),n}(yI);function kI(e,t,n){var r;Eb((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Eb("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Eb(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Eb(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}function wI(e){return bI.apply(this,arguments)}function bI(){return bI=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=z_(t))._getPasswordPolicyInternal()){e.next=4;break}return e.next=4,n._updatePasswordPolicy();case 4:case"end":return e.stop()}}),e)}))),bI.apply(this,arguments)}function _I(){return _I=u(a().mark((function e(t,n,r){var i,o,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=z_(t),s={requestType:"PASSWORD_RESET",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=o._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=11;break}return e.next=5,Q_(o,s,"getOobCode",!0);case 5:return c=e.sent,r&&kI(o,c,r),e.next=9,fx(o,c);case 9:e.next=14;break;case 11:return r&&kI(o,s,r),e.next=14,fx(o,s).catch(function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow."),e.next=4,Q_(o,s,"getOobCode",!0);case 4:return n=e.sent,r&&kI(o,n,r),e.next=8,fx(o,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 14:case"end":return e.stop()}}),e)}))),_I.apply(this,arguments)}function xI(){return xI=u(a().mark((function e(t,n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$_(ce(t),{oobCode:n,newPassword:r}).catch(function(){var e=u(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&wI(t),n;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)}))),xI.apply(this,arguments)}function II(){return II=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rx(ce(t),{oobCode:n});case 2:case"end":return e.stop()}}),e)}))),II.apply(this,arguments)}function EI(e,t){return TI.apply(this,arguments)}function TI(){return TI=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ce(t),e.next=3,$_(r,{oobCode:n});case 3:i=e.sent,Eb(o=i.requestType,r,"internal-error"),e.t0=o,e.next="EMAIL_SIGNIN"===e.t0?9:"VERIFY_AND_CHANGE_EMAIL"===e.t0?10:"REVERT_SECOND_FACTOR_ADDITION"===e.t0?12:13;break;case 9:return e.abrupt("break",14);case 10:return Eb(i.newEmail,r,"internal-error"),e.abrupt("break",14);case 12:Eb(i.mfaInfo,r,"internal-error");case 13:Eb(i.email,r,"internal-error");case 14:return u=null,i.mfaInfo&&(u=yI._fromServerResponse(z_(r),i.mfaInfo)),e.abrupt("return",{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:u},operation:o});case 17:case"end":return e.stop()}}),e)}))),TI.apply(this,arguments)}function SI(){return SI=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,EI(ce(t),n);case 2:return r=e.sent,i=r.data,e.abrupt("return",i.email);case 5:case"end":return e.stop()}}),e)}))),SI.apply(this,arguments)}function AI(e,t,n){return CI.apply(this,arguments)}function CI(){return CI=u(a().mark((function e(t,n,r){var i,o,s,c,l,f,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=z_(t),s={returnSecureToken:!0,email:n,password:r,clientType:"CLIENT_TYPE_WEB"},!(null===(i=o._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=9;break}return e.next=5,Q_(o,s,"signUpPassword");case 5:l=e.sent,c=qx(o,l),e.next=10;break;case 9:c=qx(o,s).catch(function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=6;break}return console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow."),e.next=4,Q_(o,s,"signUpPassword");case 4:return n=e.sent,e.abrupt("return",qx(o,n));case 6:throw t;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:return e.next=12,c.catch((function(e){throw e.code==="auth/".concat("password-does-not-meet-requirements")&&wI(t),e}));case 12:return f=e.sent,e.next=15,Kx._fromIdTokenResponse(o,"signIn",f);case 15:return h=e.sent,e.next=18,o._updateCurrentUser(h.user);case 18:return e.abrupt("return",h);case 19:case"end":return e.stop()}}),e)}))),CI.apply(this,arguments)}function NI(){return NI=u(a().mark((function e(t,n,r){var i,o,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=function(e,t){Eb(t.handleCodeInApp,o,"argument-error"),t&&kI(o,e,t)},o=z_(t),s={requestType:"EMAIL_SIGNIN",email:n,clientType:"CLIENT_TYPE_WEB"},!(null===(i=o._getRecaptchaConfig())||void 0===i?void 0:i.emailPasswordEnabled)){e.next=12;break}return e.next=6,Q_(o,s,"getOobCode",!0);case 6:return l=e.sent,c(l,r),e.next=10,dx(o,l);case 10:e.next=15;break;case 12:return c(s,r),e.next=15,dx(o,s).catch(function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code!=="auth/".concat("missing-recaptcha-token")){e.next=10;break}return console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow."),e.next=4,Q_(o,s,"getOobCode",!0);case 4:return n=e.sent,c(n,r),e.next=8,dx(o,n);case 8:e.next=11;break;case 10:return e.abrupt("return",Promise.reject(t));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 15:case"end":return e.stop()}}),e)}))),NI.apply(this,arguments)}function PI(){return PI=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce(t),Eb((o=Dx.credentialWithLink(n,r||Ab()))._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),e.abrupt("return",uI(i,o));case 4:case"end":return e.stop()}}),e)}))),PI.apply(this,arguments)}function RI(e,t){return DI.apply(this,arguments)}function DI(){return DI=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,"POST","/v1/accounts:createAuthUri",Mb(t,n)));case 1:case"end":return e.stop()}}),e)}))),DI.apply(this,arguments)}function OI(){return OI=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Cb()?Ab():"http://localhost",i={identifier:n,continueUri:r},e.next=4,RI(ce(t),i);case 4:return o=e.sent,u=o.signinMethods,e.abrupt("return",u||[]);case 7:case"end":return e.stop()}}),e)}))),OI.apply(this,arguments)}function LI(){return(LI=u(a().mark((function e(t,n){var r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ce(t),e.next=3,t.getIdToken();case 3:return i=e.sent,o={requestType:"VERIFY_EMAIL",idToken:i},n&&kI(r.auth,o,n),e.next=8,cx(r.auth,o);case 8:if(u=e.sent,u.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function MI(){return(MI=u(a().mark((function e(t,n,r){var i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce(t),e.next=3,t.getIdToken();case 3:return o=e.sent,u={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:o,newEmail:n},r&&kI(i.auth,u,r),e.next=8,vx(i.auth,u);case 8:if(s=e.sent,s.email===t.email){e.next=13;break}return e.next=13,t.reload();case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function FI(e,t){return UI.apply(this,arguments)}function UI(){return UI=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fb(t,"POST","/v1/accounts:update",n));case 1:case"end":return e.stop()}}),e)}))),UI.apply(this,arguments)}function VI(){return(VI=u(a().mark((function e(t,n){var r,i,o,u,s,c,l;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.displayName,i=n.photoURL,void 0!==r||void 0!==i){e.next=3;break}return e.abrupt("return");case 3:return o=ce(t),e.next=6,o.getIdToken();case 6:return u=e.sent,s={idToken:u,displayName:r,photoUrl:i,returnSecureToken:!0},e.next=10,o_(o,FI(o.auth,s));case 10:return c=e.sent,o.displayName=c.displayName||null,o.photoURL=c.photoUrl||null,(l=o.providerData.find((function(e){return"password"===e.providerId})))&&(l.displayName=o.displayName,l.photoURL=o.photoURL),e.next=17,o._updateTokensIfNecessary(c);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BI(e,t,n){return jI.apply(this,arguments)}function jI(){return jI=u(a().mark((function e(t,n,r){var i,o,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.auth,e.next=3,t.getIdToken();case 3:return o=e.sent,u={idToken:o,returnSecureToken:!0},n&&(u.email=n),r&&(u.password=r),e.next=9,o_(t,tx(i,u));case 9:return s=e.sent,e.next=12,t._updateTokensIfNecessary(s,!0);case 12:case"end":return e.stop()}}),e)}))),jI.apply(this,arguments)}var zI=N((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};S(this,e),this.isNewUser=t,this.providerId=n,this.profile=r})),qI=function(e){_(n,e);var t=I(n);function n(e,r,i,a){var o;return S(this,n),(o=t.call(this,e,r,i)).username=a,o}return N(n)}(zI),GI=function(e){_(n,e);var t=I(n);function n(e,r){return S(this,n),t.call(this,e,"facebook.com",r)}return N(n)}(zI),KI=function(e){_(n,e);var t=I(n);function n(e,r){return S(this,n),t.call(this,e,"github.com",r,"string"===typeof(null===r||void 0===r?void 0:r.login)?null===r||void 0===r?void 0:r.login:null)}return N(n)}(qI),HI=function(e){_(n,e);var t=I(n);function n(e,r){return S(this,n),t.call(this,e,"google.com",r)}return N(n)}(zI),QI=function(e){_(n,e);var t=I(n);function n(e,r,i){return S(this,n),t.call(this,e,"twitter.com",r,i)}return N(n)}(qI);function WI(e){var t=e.user,n=e._tokenResponse;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;var r=e.providerId,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},a=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null===e||void 0===e?void 0:e.idToken)){var o=null===(n=null===(t=a_(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(o)return new zI(a,"anonymous"!==o&&"custom"!==o?o:null)}if(!r)return null;switch(r){case"facebook.com":return new GI(a,i);case"github.com":return new KI(a,i);case"google.com":return new HI(a,i);case"twitter.com":return new QI(a,i,e.screenName||null);case"custom":case"anonymous":return new zI(a,null);default:return new zI(a,r,i)}}(n)}var JI=function(){function e(t,n,r){S(this,e),this.type=t,this.credential=n,this.user=r}return N(e,[{key:"toJSON",value:function(){return{multiFactorSession:P({},"enroll"===this.type?"idToken":"pendingCredential",this.credential)}}}],[{key:"_fromIdtoken",value:function(t,n){return new e("enroll",t,n)}},{key:"_fromMfaPendingCredential",value:function(t){return new e("signin",t)}},{key:"fromJSON",value:function(t){var n,r;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.pendingCredential)return e._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(r=t.multiFactorSession)||void 0===r?void 0:r.idToken)return e._fromIdtoken(t.multiFactorSession.idToken)}return null}}]),e}(),YI=function(){function e(t,n,r){S(this,e),this.session=t,this.hints=n,this.signInResolver=r}return N(e,[{key:"resolveSignIn",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,e.abrupt("return",this.signInResolver(n));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromError",value:function(t,n){var r=z_(t),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map((function(e){return yI._fromServerResponse(r,e)}));Eb(i.mfaPendingCredential,r,"internal-error");var s=JI._fromMfaPendingCredential(i.mfaPendingCredential);return new e(s,o,function(){var e=u(a().mark((function e(t){var o,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._process(r,s);case 2:o=e.sent,delete i.mfaInfo,delete i.mfaPendingCredential,u=Object.assign(Object.assign({},i),{idToken:o.idToken,refreshToken:o.refreshToken}),e.t0=n.operationType,e.next="signIn"===e.t0?9:"reauthenticate"===e.t0?15:17;break;case 9:return e.next=11,Kx._fromIdTokenResponse(r,n.operationType,u);case 11:return c=e.sent,e.next=14,r._updateCurrentUser(c.user);case 14:return e.abrupt("return",c);case 15:return Eb(n.user,r,"internal-error"),e.abrupt("return",Kx._forOperation(n.user,n.operationType,u));case 17:wb(r,"internal-error");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}]),e}();function XI(e,t){return Fb(e,"POST","/v2/accounts/mfaEnrollment:start",Mb(e,t))}function ZI(e,t){return Fb(e,"POST","/v2/accounts/mfaEnrollment:start",Mb(e,t))}function $I(e,t){return Fb(e,"POST","/v2/accounts/mfaEnrollment:finalize",Mb(e,t))}function eE(e,t){return Fb(e,"POST","/v2/accounts/mfaEnrollment:withdraw",Mb(e,t))}var tE=function(){function e(t){var n=this;S(this,e),this.user=t,this.enrolledFactors=[],t._onReload((function(e){e.mfaInfo&&(n.enrolledFactors=e.mfaInfo.map((function(e){return yI._fromServerResponse(t.auth,e)})))}))}return N(e,[{key:"getSession",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JI,e.next=3,this.user.getIdToken();case 3:return e.t1=e.sent,e.t2=this.user,e.abrupt("return",e.t0._fromIdtoken.call(e.t0,e.t1,e.t2));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"enroll",value:function(){var e=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,this.getSession();case 3:return i=e.sent,e.next=6,o_(this.user,r._process(this.user.auth,i,n));case 6:return o=e.sent,e.next=9,this.user._updateTokensIfNecessary(o);case 9:return e.abrupt("return",this.user.reload());case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unenroll",value:function(){var e=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="string"===typeof t?t:t.uid,e.next=3,this.user.getIdToken();case 3:return r=e.sent,e.prev=4,e.next=7,o_(this.user,eE(this.user.auth,{idToken:r,mfaEnrollmentId:n}));case 7:return i=e.sent,this.enrolledFactors=this.enrolledFactors.filter((function(e){return e.uid!==n})),e.next=11,this.user._updateTokensIfNecessary(i);case 11:return e.next=13,this.user.reload();case 13:e.next=18;break;case 15:throw e.prev=15,e.t0=e.catch(4),e.t0;case 18:case"end":return e.stop()}}),e,this,[[4,15]])})));return function(t){return e.apply(this,arguments)}}()}],[{key:"_fromUser",value:function(t){return new e(t)}}]),e}(),nE=new WeakMap;var rE="__sak",iE=function(){function e(t,n){S(this,e),this.storageRetriever=t,this.type=n}return N(e,[{key:"_isAvailable",value:function(){try{return this.storage?(this.storage.setItem(rE,"1"),this.storage.removeItem(rE),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}},{key:"_set",value:function(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}},{key:"_get",value:function(e){var t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}},{key:"_remove",value:function(e){return this.storage.removeItem(e),Promise.resolve()}},{key:"storage",get:function(){return this.storageRetriever()}}]),e}();var aE=function(e){_(n,e);var t=I(n);function n(){var e;return S(this,n),(e=t.call(this,(function(){return window.localStorage}),"LOCAL")).boundEventHandler=function(t,n){return e.onStorageEvent(t,n)},e.listeners={},e.localCache={},e.pollTimer=null,e.safariLocalStorageNotSynced=function(){var e=G();return A_(e)||O_(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),e.fallbackToPolling=L_(),e._shouldAllowMigration=!0,e}return N(n,[{key:"forAllChangedKeys",value:function(e){for(var t=0,n=Object.keys(this.listeners);t<n.length;t++){var r=n[t],i=this.storage.getItem(r),a=this.localCache[r];i!==a&&e(r,a,i)}}},{key:"onStorageEvent",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.key){var r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){var i=this.storage.getItem(r);if(e.newValue!==i)null!==e.newValue?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}var a=function(){var e=t.storage.getItem(r);(n||t.localCache[r]!==e)&&t.notifyListeners(r,e)},o=this.storage.getItem(r);W()&&10===document.documentMode&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(a,10):a()}else this.forAllChangedKeys((function(e,n,r){t.notifyListeners(e,r)}))}},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t?JSON.parse(t):t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval((function(){e.forAllChangedKeys((function(t,n,r){e.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)}))}),1e3)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"attachListener",value:function(){window.addEventListener("storage",this.boundEventHandler)}},{key:"detachListener",value:function(){window.removeEventListener("storage",this.boundEventHandler)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}},{key:"_set",value:function(){var e=u(a().mark((function e(t,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(g(n.prototype),"_set",this).call(this,t,r);case 2:this.localCache[t]=JSON.stringify(r);case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=u(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(g(n.prototype),"_get",this).call(this,t);case 2:return r=e.sent,this.localCache[t]=JSON.stringify(r),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(g(n.prototype),"_remove",this).call(this,t);case 2:delete this.localCache[t];case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),n}(iE);aE.type="LOCAL";var oE=aE,uE=function(e){_(n,e);var t=I(n);function n(){return S(this,n),t.call(this,(function(){return window.sessionStorage}),"SESSION")}return N(n,[{key:"_addListener",value:function(e,t){}},{key:"_removeListener",value:function(e,t){}}]),n}(iE);uE.type="SESSION";var sE=uE;function cE(e){return Promise.all(e.map(function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:return n=e.sent,e.abrupt("return",{fulfilled:!0,value:n});case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",{fulfilled:!1,reason:e.t0});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}var lE=function(){function e(t){S(this,e),this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}return N(e,[{key:"isListeningto",value:function(e){return this.eventTarget===e}},{key:"handleEvent",value:function(){var e=u(a().mark((function e(t){var n,r,i,o,s,c,l,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(n=t).data,i=r.eventId,o=r.eventType,s=r.data,null===(c=this.handlersMap[o])||void 0===c?void 0:c.size){e.next=5;break}return e.abrupt("return");case 5:return n.ports[0].postMessage({status:"ack",eventId:i,eventType:o}),l=Array.from(c).map(function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t(n.origin,s));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=9,cE(l);case 9:f=e.sent,n.ports[0].postMessage({status:"done",eventId:i,eventType:o,response:f});case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_subscribe",value:function(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}},{key:"_unsubscribe",value:function(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}],[{key:"_getInstance",value:function(t){var n=this.receivers.find((function(e){return e.isListeningto(t)}));if(n)return n;var r=new e(t);return this.receivers.push(r),r}}]),e}();function fE(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="",r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}lE.receivers=[];var hE=function(){function e(t){S(this,e),this.target=t,this.handlers=new Set}return N(e,[{key:"removeMessageHandler",value:function(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}},{key:"_send",value:function(){var e=u(a().mark((function e(t,n){var r,i,o,u,s=this,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:50,i="undefined"!==typeof MessageChannel?new MessageChannel:null){e.next=4;break}throw new Error("connection_unavailable");case 4:return e.abrupt("return",new Promise((function(e,a){var c=fE("",20);i.port1.start();var l=setTimeout((function(){a(new Error("unsupported_event"))}),r);u={messageChannel:i,onMessage:function(t){var n=t;if(n.data.eventId===c)switch(n.data.status){case"ack":clearTimeout(l),o=setTimeout((function(){a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(o),e(n.data.response);break;default:clearTimeout(l),clearTimeout(o),a(new Error("invalid_response"))}}},s.handlers.add(u),i.port1.addEventListener("message",u.onMessage),s.target.postMessage({eventType:t,eventId:c,data:n},[i.port2])})).finally((function(){u&&s.removeMessageHandler(u)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}();function dE(){return window}function pE(e){dE().location.href=e}function vE(){return"undefined"!==typeof dE().WorkerGlobalScope&&"function"===typeof dE().importScripts}function yE(){return mE.apply(this,arguments)}function mE(){return(mE=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===navigator||void 0===navigator?void 0:navigator.serviceWorker){e.next=2;break}return e.abrupt("return",null);case 2:return e.prev=2,e.next=5,navigator.serviceWorker.ready;case 5:return t=e.sent,e.abrupt("return",t.active);case 9:return e.prev=9,e.t0=e.catch(2),e.abrupt("return",null);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function gE(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}var kE="firebaseLocalStorageDb",wE="firebaseLocalStorage",bE="fbase_key",_E=function(){function e(t){S(this,e),this.request=t}return N(e,[{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.request.addEventListener("success",(function(){t(e.request.result)})),e.request.addEventListener("error",(function(){n(e.request.error)}))}))}}]),e}();function xE(e,t){return e.transaction([wE],t?"readwrite":"readonly").objectStore(wE)}function IE(){var e=indexedDB.deleteDatabase(kE);return new _E(e).toPromise()}function EE(){var e=indexedDB.open(kE,1);return new Promise((function(t,n){e.addEventListener("error",(function(){n(e.error)})),e.addEventListener("upgradeneeded",(function(){var t=e.result;try{t.createObjectStore(wE,{keyPath:bE})}catch(r){n(r)}})),e.addEventListener("success",u(a().mark((function n(){var r;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if((r=e.result).objectStoreNames.contains(wE)){n.next=12;break}return r.close(),n.next=5,IE();case 5:return n.t0=t,n.next=8,EE();case 8:n.t1=n.sent,(0,n.t0)(n.t1),n.next=13;break;case 12:t(r);case 13:case"end":return n.stop()}}),n)}))))}))}function TE(e,t,n){return SE.apply(this,arguments)}function SE(){return SE=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=xE(t,!0).put((P(i={},bE,n),P(i,"value",r),i)),e.abrupt("return",new _E(o).toPromise());case 2:case"end":return e.stop()}}),e)}))),SE.apply(this,arguments)}function AE(e,t){return CE.apply(this,arguments)}function CE(){return CE=u(a().mark((function e(t,n){var r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=xE(t,!1).get(n),e.next=3,new _E(r).toPromise();case 3:return i=e.sent,e.abrupt("return",void 0===i?null:i.value);case 5:case"end":return e.stop()}}),e)}))),CE.apply(this,arguments)}function NE(e,t){var n=xE(e,!0).delete(t);return new _E(n).toPromise()}var PE=function(){function e(){S(this,e),this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((function(){}),(function(){}))}return N(e,[{key:"_openDb",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.db){e.next=2;break}return e.abrupt("return",this.db);case 2:return e.next=4,EE();case 4:return this.db=e.sent,e.abrupt("return",this.db);case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_withRetries",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=0;case 1:return e.prev=2,e.next=5,this._openDb();case 5:return r=e.sent,e.next=8,t(r);case 8:return e.abrupt("return",e.sent);case 11:if(e.prev=11,e.t0=e.catch(2),!(n++>3)){e.next=15;break}throw e.t0;case 15:this.db&&(this.db.close(),this.db=void 0);case 16:e.next=1;break;case 18:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"initializeServiceWorkerMessaging",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",vE()?this.initializeReceiver():this.initializeSender());case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeReceiver",value:function(){var e=u(a().mark((function e(){var t=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.receiver=lE._getInstance(vE()?self:null),this.receiver._subscribe("keyChanged",function(){var e=u(a().mark((function e(n,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._poll();case 2:return i=e.sent,e.abrupt("return",{keyProcessed:i.includes(r.key)});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this.receiver._subscribe("ping",function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",["keyChanged"]);case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"initializeSender",value:function(){var e=u(a().mark((function e(){var t,n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yE();case 2:if(this.activeServiceWorker=e.sent,this.activeServiceWorker){e.next=5;break}return e.abrupt("return");case 5:return this.sender=new hE(this.activeServiceWorker),e.next=8,this.sender._send("ping",{},800);case 8:if(r=e.sent){e.next=11;break}return e.abrupt("return");case 11:(null===(t=r[0])||void 0===t?void 0:t.fulfilled)&&(null===(n=r[0])||void 0===n?void 0:n.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyServiceWorker",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.sender&&this.activeServiceWorker&&gE()===this.activeServiceWorker){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50);case 5:e.next=9;break;case 7:e.prev=7,e.t0=e.catch(2);case 9:case"end":return e.stop()}}),e,this,[[2,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_isAvailable",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,indexedDB){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,EE();case 5:return t=e.sent,e.next=8,TE(t,rE,"1");case 8:return e.next=10,NE(t,rE);case 10:return e.abrupt("return",!0);case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}()},{key:"_withPendingWrite",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.pendingWrites++,e.prev=1,e.next=4,t();case 4:return e.prev=4,this.pendingWrites--,e.finish(4);case 7:case"end":return e.stop()}}),e,this,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}()},{key:"_set",value:function(){var e=u(a().mark((function e(t,n){var r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._withRetries((function(e){return TE(e,t,n)}));case 2:return r.localCache[t]=n,e.abrupt("return",r.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){return AE(e,t)}));case 2:return n=e.sent,this.localCache[t]=n,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_remove",value:function(){var e=u(a().mark((function e(t){var n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._withPendingWrite(u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n._withRetries((function(e){return NE(e,t)}));case 2:return delete n.localCache[t],e.abrupt("return",n.notifyServiceWorker(t));case 4:case"end":return e.stop()}}),e)})))));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_poll",value:function(){var e=u(a().mark((function e(){var t,n,r,i,o,u,s,c,l,f,h;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._withRetries((function(e){var t=xE(e,!1).getAll();return new _E(t).toPromise()}));case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:if(0===this.pendingWrites){e.next=7;break}return e.abrupt("return",[]);case 7:n=[],r=new Set,i=b(t);try{for(i.s();!(o=i.n()).done;)u=o.value,s=u.fbase_key,c=u.value,r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(c)&&(this.notifyListeners(s,c),n.push(s))}catch(a){i.e(a)}finally{i.f()}for(l=0,f=Object.keys(this.localCache);l<f.length;l++)h=f[l],this.localCache[h]&&!r.has(h)&&(this.notifyListeners(h,null),n.push(h));return e.abrupt("return",n);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyListeners",value:function(e,t){this.localCache[e]=t;var n=this.listeners[e];if(n)for(var r=0,i=Array.from(n);r<i.length;r++){(0,i[r])(t)}}},{key:"startPolling",value:function(){var e=this;this.stopPolling(),this.pollTimer=setInterval(u(a().mark((function t(){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e._poll());case 1:case"end":return t.stop()}}),t)}))),800)}},{key:"stopPolling",value:function(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}},{key:"_addListener",value:function(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}},{key:"_removeListener",value:function(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}]),e}();PE.type="LOCAL";var RE=PE;function DE(e,t){return Fb(e,"POST","/v2/accounts/mfaSignIn:start",Mb(e,t))}function OE(e,t){return Fb(e,"POST","/v2/accounts/mfaSignIn:finalize",Mb(e,t))}var LE=1e12,ME=function(){function e(t){S(this,e),this.auth=t,this.counter=LE,this._widgets=new Map}return N(e,[{key:"render",value:function(e,t){var n=this.counter;return this._widgets.set(n,new FE(e,this.auth.name,t||{})),this.counter++,n}},{key:"reset",value:function(e){var t,n=e||LE;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}},{key:"getResponse",value:function(e){var t,n=e||LE;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}},{key:"execute",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t||LE,null===(n=this._widgets.get(r))||void 0===n||n.execute(),e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),FE=function(){function e(t,n,r){var i=this;S(this,e),this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=function(){i.execute()};var a="string"===typeof t?document.getElementById(t):t;Eb(a,"argument-error",{appName:n}),this.container=a,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}return N(e,[{key:"getResponse",value:function(){return this.checkIfDeleted(),this.responseToken}},{key:"delete",value:function(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}},{key:"execute",value:function(){var e=this;this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((function(){e.responseToken=function(e){for(var t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);var t=e.params,n=t.callback,r=t["expired-callback"];if(n)try{n(e.responseToken)}catch(i){}e.timerId=window.setTimeout((function(){if(e.timerId=null,e.responseToken=null,r)try{r()}catch(i){}e.isVisible&&e.execute()}),6e4)}),500))}},{key:"checkIfDeleted",value:function(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}]),e}();var UE=K_("rcb"),VE=new Pb(3e4,6e4),BE=function(){function e(){var t;S(this,e),this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=dE().grecaptcha)||void 0===t?void 0:t.render)}return N(e,[{key:"load",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Eb(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(n),e,"argument-error"),this.shouldResolveImmediately(n)&&lb(dE().grecaptcha)?Promise.resolve(dE().grecaptcha):new Promise((function(r,i){var a=dE().setTimeout((function(){i(bb(e,"network-request-failed"))}),VE.get());dE()[UE]=function(){dE().clearTimeout(a),delete dE()[UE];var o=dE().grecaptcha;if(o&&lb(o)){var u=o.render;o.render=function(e,n){var r=u(e,n);return t.counter++,r},t.hostLanguage=n,r(o)}else i(bb(e,"internal-error"))},G_("".concat("https://www.google.com/recaptcha/api.js?","?").concat(re({onload:UE,render:"explicit",hl:n}))).catch((function(){clearTimeout(a),i(bb(e,"internal-error"))}))}))}},{key:"clearedOneInstance",value:function(){this.counter--}},{key:"shouldResolveImmediately",value:function(e){var t;return!!(null===(t=dE().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}]),e}();var jE=function(){function e(){S(this,e)}return N(e,[{key:"load",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new ME(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearedOneInstance",value:function(){}}]),e}(),zE="recaptcha",qE={theme:"light",type:"image"},GE=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.assign({},qE);S(this,e),this.parameters=r,this.type=zE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=z_(t),this.isInvisible="invisible"===this.parameters.size,Eb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");var i="string"===typeof n?document.getElementById(n):n;Eb(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new jE:new BE,this.validateStartingState()}return N(e,[{key:"verify",value:function(){var e=u(a().mark((function e(){var t,n,r,i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertNotDestroyed(),e.next=3,this.render();case 3:if(t=e.sent,n=this.getAssertedRecaptcha(),!(r=n.getResponse(t))){e.next=8;break}return e.abrupt("return",r);case 8:return e.abrupt("return",new Promise((function(e){i.tokenChangeListeners.add((function t(n){n&&(i.tokenChangeListeners.delete(t),e(n))})),i.isInvisible&&n.execute(t)})));case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((function(t){throw e.renderPromise=null,t}))),this.renderPromise}},{key:"_reset",value:function(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}},{key:"clear",value:function(){var e=this;this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((function(t){e.container.removeChild(t)}))}},{key:"validateStartingState",value:function(){Eb(!this.parameters.sitekey,this.auth,"argument-error"),Eb(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Eb("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}},{key:"makeTokenCallback",value:function(e){var t=this;return function(n){if(t.tokenChangeListeners.forEach((function(e){return e(n)})),"function"===typeof e)e(n);else if("string"===typeof e){var r=dE()[e];"function"===typeof r&&r(n)}}}},{key:"assertNotDestroyed",value:function(){Eb(!this.destroyed,this.auth,"internal-error")}},{key:"makeRenderPromise",value:function(){var e=u(a().mark((function e(){var t,n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.init();case 2:return this.widgetId||(t=this.container,this.isInvisible||(n=document.createElement("div"),t.appendChild(n),t=n),this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)),e.abrupt("return",this.widgetId);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"init",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Eb(Cb()&&!vE(),this.auth,"internal-error"),e.next=3,KE();case 3:return e.next=5,this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);case 5:return this.recaptcha=e.sent,e.next=8,Hb(this.auth);case 8:Eb(t=e.sent,this.auth,"internal-error"),this.parameters.sitekey=t;case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getAssertedRecaptcha",value:function(){return Eb(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}]),e}();function KE(){var e=null;return new Promise((function(t){"complete"!==document.readyState?(e=function(){return t()},window.addEventListener("load",e)):t()})).catch((function(t){throw e&&window.removeEventListener("load",e),t}))}var HE=function(){function e(t,n){S(this,e),this.verificationId=t,this.onConfirmation=n}return N(e,[{key:"confirm",value:function(e){var t=Px._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}]),e}();function QE(){return QE=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=z_(t),e.next=3,XE(i,n,ce(r));case 3:return o=e.sent,e.abrupt("return",new HE(o,(function(e){return uI(i,e)})));case 5:case"end":return e.stop()}}),e)}))),QE.apply(this,arguments)}function WE(e,t,n){return JE.apply(this,arguments)}function JE(){return(JE=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce(t),e.next=3,tI(!1,i,"phone");case 3:return e.next=5,XE(i.auth,n,ce(r));case 5:return o=e.sent,e.abrupt("return",new HE(o,(function(e){return cI(i,e)})));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YE(){return(YE=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ce(t),e.next=3,XE(i.auth,n,ce(r));case 3:return o=e.sent,e.abrupt("return",new HE(o,(function(e){return fI(i,e)})));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XE(e,t,n){return ZE.apply(this,arguments)}function ZE(){return ZE=u(a().mark((function e(t,n,r){var i,o,u,s,c,l,f,h,d;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.verify();case 2:if(o=e.sent,e.prev=3,Eb("string"===typeof o,t,"argument-error"),Eb(r.type===zE,t,"argument-error"),!("session"in(u="string"===typeof n?{phoneNumber:n}:n))){e.next=26;break}if(s=u.session,!("phoneNumber"in u)){e.next=17;break}return Eb("enroll"===s.type,t,"internal-error"),e.next=13,XI(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:u.phoneNumber,recaptchaToken:o}});case 13:return c=e.sent,e.abrupt("return",c.phoneSessionInfo.sessionInfo);case 17:return Eb("signin"===s.type,t,"internal-error"),Eb(l=(null===(i=u.multiFactorHint)||void 0===i?void 0:i.uid)||u.multiFactorUid,t,"missing-multi-factor-info"),e.next=22,DE(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:l,phoneSignInInfo:{recaptchaToken:o}});case 22:return f=e.sent,e.abrupt("return",f.phoneResponseInfo.sessionInfo);case 24:e.next=31;break;case 26:return e.next=28,Ex(t,{phoneNumber:u.phoneNumber,recaptchaToken:o});case 28:return h=e.sent,d=h.sessionInfo,e.abrupt("return",d);case 31:return e.prev=31,r._reset(),e.finish(31);case 34:case"end":return e.stop()}}),e,null,[[3,,31,34]])}))),ZE.apply(this,arguments)}function $E(){return($E=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$x(ce(t),n);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var eT=function(){function e(t){S(this,e),this.providerId=e.PROVIDER_ID,this.auth=z_(t)}return N(e,[{key:"verifyPhoneNumber",value:function(e,t){return XE(this.auth,e,ce(t))}}],[{key:"credential",value:function(e,t){return Px._fromVerification(e,t)}},{key:"credentialFromResult",value:function(t){var n=t;return e.credentialFromTaggedObject(n)}},{key:"credentialFromError",value:function(t){return e.credentialFromTaggedObject(t.customData||{})}},{key:"credentialFromTaggedObject",value:function(e){var t=e._tokenResponse;if(!t)return null;var n=t.phoneNumber,r=t.temporaryProof;return n&&r?Px._fromTokenResponse(n,r):null}}]),e}();function tT(e,t){return t?b_(t):(Eb(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}eT.PROVIDER_ID="phone",eT.PHONE_SIGN_IN_METHOD="phone";var nT=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this,"custom","custom")).params=e,r}return N(n,[{key:"_getIdTokenResponse",value:function(e){return _x(e,this._buildIdpRequest())}},{key:"_linkToIdToken",value:function(e,t){return _x(e,this._buildIdpRequest(t))}},{key:"_getReauthenticationResolver",value:function(e){return _x(e,this._buildIdpRequest())}},{key:"_buildIdpRequest",value:function(e){var t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}]),n}(Z_);function rT(e){return aI(e.auth,new nT(e),e.bypassAuthState)}function iT(e){var t=e.auth,n=e.user;return Eb(n,t,"internal-error"),rI(n,new nT(e),e.bypassAuthState)}function aT(e){return oT.apply(this,arguments)}function oT(){return oT=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.auth,Eb(r=t.user,n,"internal-error"),e.abrupt("return",$x(r,new nT(t),t.bypassAuthState));case 3:case"end":return e.stop()}}),e)}))),oT.apply(this,arguments)}var uT=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];S(this,e),this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=a,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}return N(e,[{key:"execute",value:function(){var e=this;return new Promise(function(){var t=u(a().mark((function t(n,r){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.pendingPromise={resolve:n,reject:r},t.prev=1,t.next=4,e.resolver._initialize(e.auth);case 4:return e.eventManager=t.sent,t.next=7,e.onExecution();case 7:e.eventManager.registerConsumer(e),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),e.reject(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"onAuthEvent",value:function(){var e=u(a().mark((function e(t){var n,r,i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.urlResponse,r=t.sessionId,i=t.postBody,o=t.tenantId,u=t.error,s=t.type,!u){e.next=4;break}return this.reject(u),e.abrupt("return");case 4:return c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState},e.prev=5,e.t0=this,e.next=9,this.getIdpTask(s)(c);case 9:e.t1=e.sent,e.t0.resolve.call(e.t0,e.t1),e.next=16;break;case 13:e.prev=13,e.t2=e.catch(5),this.reject(e.t2);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"onError",value:function(e){this.reject(e)}},{key:"getIdpTask",value:function(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rT;case"linkViaPopup":case"linkViaRedirect":return aT;case"reauthViaPopup":case"reauthViaRedirect":return iT;default:wb(this.auth,"internal-error")}}},{key:"resolve",value:function(e){Sb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}},{key:"reject",value:function(e){Sb(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}},{key:"unregisterAndCleanUp",value:function(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}]),e}(),sT=new Pb(2e3,1e4);function cT(e,t,n){return lT.apply(this,arguments)}function lT(){return lT=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=z_(t),xb(t,n,Ox),o=tT(i,r),u=new pT(i,"signInViaPopup",n,o),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)}))),lT.apply(this,arguments)}function fT(){return(fT=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xb((i=ce(t)).auth,n,Ox),o=tT(i.auth,r),u=new pT(i.auth,"reauthViaPopup",n,o,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hT(e,t,n){return dT.apply(this,arguments)}function dT(){return(dT=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xb((i=ce(t)).auth,n,Ox),o=tT(i.auth,r),u=new pT(i.auth,"linkViaPopup",n,o,i),e.abrupt("return",u.executeNotNull());case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var pT=function(e){_(n,e);var t=I(n);function n(e,r,i,a,o){var u;return S(this,n),(u=t.call(this,e,r,a,o)).provider=i,u.authWindow=null,u.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=x(u),u}return N(n,[{key:"executeNotNull",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.execute();case 2:return Eb(t=e.sent,this.auth,"internal-error"),e.abrupt("return",t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=u(a().mark((function e(){var t,n=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sb(1===this.filter.length,"Popup operations only handle one event"),t=fE(),e.next=4,this.resolver._openPopup(this.auth,this.provider,this.filter[0],t);case 4:this.authWindow=e.sent,this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((function(e){n.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(function(e){e||n.reject(bb(n.auth,"web-storage-unsupported"))})),this.pollUserCancellation();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"eventId",get:function(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}},{key:"cancel",value:function(){this.reject(bb(this.auth,"cancelled-popup-request"))}},{key:"cleanUp",value:function(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}},{key:"pollUserCancellation",value:function(){var e=this;!function t(){var n,r;(null===(r=null===(n=e.authWindow)||void 0===n?void 0:n.window)||void 0===r?void 0:r.closed)?e.pollId=window.setTimeout((function(){e.pollId=null,e.reject(bb(e.auth,"popup-closed-by-user"))}),8e3):e.pollId=window.setTimeout(t,sT.get())}()}}]),n}(uT);pT.currentPopupAction=null;var vT="pendingRedirect",yT=new Map,mT=function(e){_(n,e);var t=I(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return S(this,n),(i=t.call(this,e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,a)).eventId=null,i}return N(n,[{key:"execute",value:function(){var e=u(a().mark((function e(){var t,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=yT.get(this.auth._key())){e.next=21;break}return e.prev=2,e.next=5,gT(this.resolver,this.auth);case 5:if(!e.sent){e.next=12;break}return e.next=9,k(g(n.prototype),"execute",this).call(this);case 9:e.t0=e.sent,e.next=13;break;case 12:e.t0=null;case 13:r=e.t0,t=function(){return Promise.resolve(r)},e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),t=function(){return Promise.reject(e.t1)};case 20:yT.set(this.auth._key(),t);case 21:return this.bypassAuthState||yT.set(this.auth._key(),(function(){return Promise.resolve(null)})),e.abrupt("return",t());case 23:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"onAuthEvent",value:function(){var e=u(a().mark((function e(t){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("signInViaRedirect"!==t.type){e.next=4;break}return e.abrupt("return",k(g(n.prototype),"onAuthEvent",this).call(this,t));case 4:if("unknown"!==t.type){e.next=7;break}return this.resolve(null),e.abrupt("return");case 7:if(!t.eventId){e.next=17;break}return e.next=10,this.auth._redirectUserForId(t.eventId);case 10:if(!(r=e.sent)){e.next=16;break}return this.user=r,e.abrupt("return",k(g(n.prototype),"onAuthEvent",this).call(this,t));case 16:this.resolve(null);case 17:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onExecution",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"cleanUp",value:function(){}}]),n}(uT);function gT(e,t){return kT.apply(this,arguments)}function kT(){return kT=u(a().mark((function e(t,n){var r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=IT(n),i=xT(t),e.next=4,i._isAvailable();case 4:if(e.sent){e.next=6;break}return e.abrupt("return",!1);case 6:return e.next=8,i._get(r);case 8:return e.t0=e.sent,o="true"===e.t0,e.next=12,i._remove(r);case 12:return e.abrupt("return",o);case 13:case"end":return e.stop()}}),e)}))),kT.apply(this,arguments)}function wT(e,t){return bT.apply(this,arguments)}function bT(){return bT=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",xT(t)._set(IT(n),"true"));case 1:case"end":return e.stop()}}),e)}))),bT.apply(this,arguments)}function _T(e,t){yT.set(e._key(),t)}function xT(e){return b_(e._redirectPersistence)}function IT(e){return I_(vT,e.config.apiKey,e.name)}function ET(e,t,n){return function(e,t,n){return TT.apply(this,arguments)}(e,t,n)}function TT(){return TT=u(a().mark((function e(t,n,r){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=z_(t),xb(t,n,Ox),e.next=4,i._initializationPromise;case 4:return o=tT(i,r),e.next=7,wT(o,i);case 7:return e.abrupt("return",o._openRedirect(i,n,"signInViaRedirect"));case 8:case"end":return e.stop()}}),e)}))),TT.apply(this,arguments)}function ST(e,t,n){return function(e,t,n){return AT.apply(this,arguments)}(e,t,n)}function AT(){return(AT=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xb((i=ce(t)).auth,n,Ox),e.next=4,i.auth._initializationPromise;case 4:return o=tT(i.auth,r),e.next=7,wT(o,i.auth);case 7:return e.next=9,LT(i);case 9:return u=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"reauthViaRedirect",u));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function CT(e,t,n){return function(e,t,n){return NT.apply(this,arguments)}(e,t,n)}function NT(){return(NT=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xb((i=ce(t)).auth,n,Ox),e.next=4,i.auth._initializationPromise;case 4:return o=tT(i.auth,r),e.next=7,tI(!1,i,n.providerId);case 7:return e.next=9,wT(o,i.auth);case 9:return e.next=11,LT(i);case 11:return u=e.sent,e.abrupt("return",o._openRedirect(i.auth,n,"linkViaRedirect",u));case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function PT(e,t){return RT.apply(this,arguments)}function RT(){return RT=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z_(t)._initializationPromise;case 2:return e.abrupt("return",DT(t,n,!1));case 3:case"end":return e.stop()}}),e)}))),RT.apply(this,arguments)}function DT(e,t){return OT.apply(this,arguments)}function OT(){return OT=u(a().mark((function e(t,n){var r,i,o,u,s,c=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>2&&void 0!==c[2]&&c[2],i=z_(t),o=tT(i,n),u=new mT(i,o,r),e.next=6,u.execute();case 6:if(!(s=e.sent)||r){e.next=13;break}return delete s.user._redirectEventId,e.next=11,i._persistUserIfCurrent(s.user);case 11:return e.next=13,i._setRedirectUser(null,n);case 13:return e.abrupt("return",s);case 14:case"end":return e.stop()}}),e)}))),OT.apply(this,arguments)}function LT(e){return MT.apply(this,arguments)}function MT(){return(MT=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=fE("".concat(t.uid,":::")),t._redirectEventId=n,e.next=4,t.auth._setRedirectUser(t);case 4:return e.next=6,t.auth._persistUserIfCurrent(t);case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var FT=function(){function e(t){S(this,e),this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}return N(e,[{key:"registerConsumer",value:function(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}},{key:"unregisterConsumer",value:function(e){this.consumers.delete(e)}},{key:"onEvent",value:function(e){var t=this;if(this.hasEventBeenHandled(e))return!1;var n=!1;return this.consumers.forEach((function(r){t.isEventForConsumer(e,r)&&(n=!0,t.sendToConsumer(e,r),t.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return VT(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}},{key:"sendToConsumer",value:function(e,t){var n;if(e.error&&!VT(e)){var r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(bb(this.auth,r))}else t.onAuthEvent(e)}},{key:"isEventForConsumer",value:function(e,t){var n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}},{key:"hasEventBeenHandled",value:function(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(UT(e))}},{key:"saveEventToCache",value:function(e){this.cachedEventUids.add(UT(e)),this.lastProcessedEventTime=Date.now()}}]),e}();function UT(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((function(e){return e})).join("-")}function VT(e){var t=e.type,n=e.error;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}function BT(e){return jT.apply(this,arguments)}function jT(){return jT=u(a().mark((function e(t){var n,r=arguments;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.abrupt("return",Fb(t,"GET","/v1/projects",n));case 2:case"end":return e.stop()}}),e)}))),jT.apply(this,arguments)}var zT=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qT=/^https?/;function GT(){return GT=u(a().mark((function e(t){var n,r,i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.config.emulator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,BT(t);case 4:n=e.sent,r=n.authorizedDomains,i=b(r),e.prev=7,i.s();case 9:if((o=i.n()).done){e.next=20;break}if(u=o.value,e.prev=11,!KT(u)){e.next=14;break}return e.abrupt("return");case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(11);case 18:e.next=9;break;case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(7),i.e(e.t1);case 25:return e.prev=25,i.f(),e.finish(25);case 28:wb(t,"unauthorized-domain");case 29:case"end":return e.stop()}}),e,null,[[7,22,25,28],[11,16]])}))),GT.apply(this,arguments)}function KT(e){var t=Ab(),n=new URL(t),r=n.protocol,i=n.hostname;if(e.startsWith("chrome-extension://")){var a=new URL(e);return""===a.hostname&&""===i?"chrome-extension:"===r&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===r&&a.hostname===i}if(!qT.test(r))return!1;if(zT.test(e))return i===e;var o=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(i)}var HT=new Pb(3e4,6e4);function QT(){var e=dE().___jsl;if(null===e||void 0===e?void 0:e.H)for(var t=0,n=Object.keys(e.H);t<n.length;t++){var r=n[t];if(e.H[r].r=e.H[r].r||[],e.H[r].L=e.H[r].L||[],e.H[r].r=T(e.H[r].L),e.CP)for(var i=0;i<e.CP.length;i++)e.CP[i]=null}}var WT=null;function JT(e){return WT=WT||function(e){return new Promise((function(t,n){var r,i,a;function o(){QT(),gapi.load("gapi.iframes",{callback:function(){t(gapi.iframes.getContext())},ontimeout:function(){QT(),n(bb(e,"network-request-failed"))},timeout:HT.get()})}if(null===(i=null===(r=dE().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(a=dE().gapi)||void 0===a?void 0:a.load)){var u=K_("iframefcb");return dE()[u]=function(){gapi.load?o():n(bb(e,"network-request-failed"))},G_("https://apis.google.com/js/api.js?onload=".concat(u)).catch((function(e){return n(e)}))}o()}})).catch((function(e){throw WT=null,e}))}(e),WT}var YT=new Pb(5e3,15e3),XT="__/auth/iframe",ZT="emulator/auth/iframe",$T={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eS=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tS(e){var t=e.config;Eb(t.authDomain,e,"auth-domain-config-required");var n=t.emulator?Rb(t,ZT):"https://".concat(e.config.authDomain,"/").concat(XT),r={apiKey:t.apiKey,appName:e.name,v:ot},i=eS.get(e.config.apiHost);i&&(r.eid=i);var a=e._getFrameworks();return a.length&&(r.fw=a.join(",")),"".concat(n,"?").concat(re(r).slice(1))}function nS(e){return rS.apply(this,arguments)}function rS(){return rS=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,JT(t);case 2:return n=e.sent,Eb(r=dE().gapi,t,"internal-error"),e.abrupt("return",n.open({where:document.body,url:tS(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$T,dontclear:!0},(function(e){return new Promise(function(){var n=u(a().mark((function n(r,i){var o,u,s;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=function(){dE().clearTimeout(u),r(e)},n.next=3,e.restyle({setHideOnLeave:!1});case 3:o=bb(t,"network-request-failed"),u=dE().setTimeout((function(){i(o)}),YT.get()),e.ping(s).then(s,(function(){i(o)}));case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())})));case 6:case"end":return e.stop()}}),e)}))),rS.apply(this,arguments)}var iS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},aS=function(){function e(t){S(this,e),this.window=t,this.associatedEvent=null}return N(e,[{key:"close",value:function(){if(this.window)try{this.window.close()}catch(e){}}}]),e}();function oS(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600,a=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString(),u="",s=Object.assign(Object.assign({},iS),{width:r.toString(),height:i.toString(),top:a,left:o}),c=G().toLowerCase();n&&(u=C_(c)?"_blank":n),S_(c)&&(t=t||"http://localhost",s.scrollbars="yes");var l=Object.entries(s).reduce((function(e,t){var n=h(t,2),r=n[0],i=n[1];return"".concat(e).concat(r,"=").concat(i,",")}),"");if(function(){var e;return O_(arguments.length>0&&void 0!==arguments[0]?arguments[0]:G())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==u)return function(e,t){var n=document.createElement("a");n.href=e,n.target=t;var r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",u),new aS(null);var f=window.open(t||"",u,l);Eb(f,e,"popup-blocked");try{f.focus()}catch(d){}return new aS(f)}var uS="__/auth/handler",sS="emulator/auth/handler",cS=encodeURIComponent("fac");function lS(e,t,n,r,i,a){return fS.apply(this,arguments)}function fS(){return fS=u(a().mark((function e(t,n,r,i,o,u){var s,c,l,f,d,p,v,y,m,g,k,w,b;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Eb(t.config.authDomain,t,"auth-domain-config-required"),Eb(t.config.apiKey,t,"invalid-api-key"),s={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:i,v:ot,eventId:o},n instanceof Ox)for(n.setDefaultLanguage(t.languageCode),s.providerId=n.providerId||"",ee(n.getCustomParameters())||(s.customParameters=JSON.stringify(n.getCustomParameters())),c=0,l=Object.entries(u||{});c<l.length;c++)f=h(l[c],2),d=f[0],p=f[1],s[d]=p;for(n instanceof Lx&&(v=n.getScopes().filter((function(e){return""!==e}))).length>0&&(s.scopes=v.join(",")),t.tenantId&&(s.tid=t.tenantId),y=s,m=0,g=Object.keys(y);m<g.length;m++)k=g[m],void 0===y[k]&&delete y[k];return e.next=10,t._getAppCheckToken();case 10:return w=e.sent,b=w?"#".concat(cS,"=").concat(encodeURIComponent(w)):"",e.abrupt("return","".concat(hS(t),"?").concat(re(y).slice(1)).concat(b));case 13:case"end":return e.stop()}}),e)}))),fS.apply(this,arguments)}function hS(e){var t=e.config;return t.emulator?Rb(t,sS):"https://".concat(t.authDomain,"/").concat(uS)}var dS="webStorageSupport",pS=function(){function e(){S(this,e),this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sE,this._completeRedirectFn=DT,this._overrideRedirectResult=_T}return N(e,[{key:"_openPopup",value:function(){var e=u(a().mark((function e(t,n,r,i){var o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Sb(null===(o=this.eventManagers[t._key()])||void 0===o?void 0:o.manager,"_initialize() not called before _openPopup()"),e.next=3,lS(t,n,r,Ab(),i);case 3:return u=e.sent,e.abrupt("return",oS(t,u,fE()));case 5:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=u(a().mark((function e(t,n,r,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._originValidation(t);case 2:return e.next=4,lS(t,n,r,Ab(),i);case 4:return pE(e.sent),e.abrupt("return",new Promise((function(){})));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_initialize",value:function(e){var t=this,n=e._key();if(this.eventManagers[n]){var r=this.eventManagers[n],i=r.manager,a=r.promise;return i?Promise.resolve(i):(Sb(a,"If manager is not set, promise should be"),a)}var o=this.initAndGetManager(e);return this.eventManagers[n]={promise:o},o.catch((function(){delete t.eventManagers[n]})),o}},{key:"initAndGetManager",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,nS(t);case 2:return n=e.sent,r=new FT(t),n.register("authEvent",(function(e){return Eb(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event"),{status:r.onEvent(e.authEvent)?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,e.abrupt("return",r);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.iframes[e._key()].send(dS,{type:dS},(function(n){var r,i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[dS];void 0!==i&&t(!!i),wb(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return GT.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"_shouldInitProactively",get:function(){return L_()||A_()||O_()}}]),e}(),vS=pS,yS=function(){function e(t){S(this,e),this.factorId=t}return N(e,[{key:"_process",value:function(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return Tb("unexpected MultiFactorSessionType")}}}]),e}(),mS=function(e){_(n,e);var t=I(n);function n(e){var r;return S(this,n),(r=t.call(this,"phone")).credential=e,r}return N(n,[{key:"_finalizeEnroll",value:function(e,t,n){return function(e,t){return Fb(e,"POST","/v2/accounts/mfaEnrollment:finalize",Mb(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}},{key:"_finalizeSignIn",value:function(e,t){return function(e,t){return Fb(e,"POST","/v2/accounts/mfaSignIn:finalize",Mb(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}],[{key:"_fromCredential",value:function(e){return new n(e)}}]),n}(yS),gS=function(){function e(){S(this,e)}return N(e,null,[{key:"assertion",value:function(e){return mS._fromCredential(e)}}]),e}();gS.FACTOR_ID="phone";var kS=function(){function e(){S(this,e)}return N(e,null,[{key:"assertionForEnrollment",value:function(e,t){return wS._fromSecret(e,t)}},{key:"assertionForSignIn",value:function(e,t){return wS._fromEnrollmentId(e,t)}},{key:"generateSecret",value:function(){var e=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Eb("undefined"!==typeof(null===(n=(r=t).user)||void 0===n?void 0:n.auth),"internal-error"),e.next=4,ZI(r.user.auth,{idToken:r.credential,totpEnrollmentInfo:{}});case 4:return i=e.sent,e.abrupt("return",bS._fromStartTotpMfaEnrollmentResponse(i,r.user.auth));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();kS.FACTOR_ID="totp";var wS=function(e){_(n,e);var t=I(n);function n(e,r,i){var a;return S(this,n),(a=t.call(this,"totp")).otp=e,a.enrollmentId=r,a.secret=i,a}return N(n,[{key:"_finalizeEnroll",value:function(){var e=u(a().mark((function e(t,n,r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Eb("undefined"!==typeof this.secret,t,"argument-error"),e.abrupt("return",$I(t,{idToken:n,displayName:r,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}));case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"_finalizeSignIn",value:function(){var e=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Eb(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error"),r={verificationCode:this.otp},e.abrupt("return",OE(t,{mfaPendingCredential:n,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:r}));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_fromSecret",value:function(e,t){return new n(t,void 0,e)}},{key:"_fromEnrollmentId",value:function(e,t){return new n(t,e)}}]),n}(yS),bS=function(){function e(t,n,r,i,a,o,u){S(this,e),this.sessionInfo=o,this.auth=u,this.secretKey=t,this.hashingAlgorithm=n,this.codeLength=r,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=a}return N(e,[{key:"_makeTotpVerificationInfo",value:function(e){return{sessionInfo:this.sessionInfo,verificationCode:e}}},{key:"generateQrCodeUrl",value:function(e,t){var n,r=!1;return(_S(e)||_S(t))&&(r=!0),r&&(_S(e)&&(e=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),_S(t)&&(t=this.auth.name)),"otpauth://totp/".concat(t,":").concat(e,"?secret=").concat(this.secretKey,"&issuer=").concat(t,"&algorithm=").concat(this.hashingAlgorithm,"&digits=").concat(this.codeLength)}}],[{key:"_fromStartTotpMfaEnrollmentResponse",value:function(t,n){return new e(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,n)}}]),e}();function _S(e){return"undefined"===typeof e||0===(null===e||void 0===e?void 0:e.length)}var xS="@firebase/auth",IS="1.3.0",ES=function(){function e(t){S(this,e),this.auth=t,this.internalListeners=new Map}return N(e,[{key:"getUid",value:function(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}},{key:"getToken",value:function(){var e=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.assertAuthConfigured(),e.next=3,this.auth._initializationPromise;case 3:if(this.auth.currentUser){e.next=5;break}return e.abrupt("return",null);case 5:return e.next=7,this.auth.currentUser.getIdToken(t);case 7:return n=e.sent,e.abrupt("return",{accessToken:n});case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"addAuthTokenListener",value:function(e){if(this.assertAuthConfigured(),!this.internalListeners.has(e)){var t=this.auth.onIdTokenChanged((function(t){e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}}},{key:"removeAuthTokenListener",value:function(e){this.assertAuthConfigured();var t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}},{key:"assertAuthConfigured",value:function(){Eb(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}},{key:"updateProactiveRefresh",value:function(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}]),e}();var TS;!function(e){var t;null===(t=V())||void 0===t||t["_".concat(e)]}("authIdTokenMaxAge");function SS(){return window}TS="Browser",$e(new le("auth",(function(e,t){var n=t.options,r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),a=e.getProvider("app-check-internal"),o=r.options,u=o.apiKey,s=o.authDomain;Eb(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});var c={apiKey:u,authDomain:s,clientPlatform:TS,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:M_(TS)},l=new j_(r,i,a,c);return function(e,t){var n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(b_);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((function(e,t,n){e.getProvider("auth-internal").initialize()}))),$e(new le("auth-internal",(function(e){return function(e){return new ES(e)}(z_(e.getProvider("auth").getImmediate()))}),"PRIVATE").setInstantiationMode("EXPLICIT")),ht(xS,IS,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(TS)),ht(xS,IS,"esm2017");var AS=2e3;function CS(e,t,n){return NS.apply(this,arguments)}function NS(){return NS=u(a().mark((function e(t,n,r){var i,o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=SS(),u=o.BuildInfo,Sb(n.sessionId,"AuthEvent did not contain a session ID"),e.next=4,MS(n.sessionId);case 4:return s=e.sent,c={},O_()?c.ibi=u.packageName:P_()?c.apn=u.packageName:wb(t,"operation-not-supported-in-this-environment"),u.displayName&&(c.appDisplayName=u.displayName),c.sessionId=s,e.abrupt("return",lS(t,r,n.type,void 0,null!==(i=n.eventId)&&void 0!==i?i:void 0,c));case 10:case"end":return e.stop()}}),e)}))),NS.apply(this,arguments)}function PS(){return PS=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=SS(),r=n.BuildInfo,i={},O_()?i.iosBundleId=r.packageName:P_()?i.androidPackageName=r.packageName:wb(t,"operation-not-supported-in-this-environment"),e.next=5,BT(t,i);case 5:case"end":return e.stop()}}),e)}))),PS.apply(this,arguments)}function RS(e){var t=SS().cordova;return new Promise((function(n){t.plugins.browsertab.isAvailable((function(r){var i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}function DS(e,t,n){return OS.apply(this,arguments)}function OS(){return OS=u(a().mark((function e(t,n,r){var i,o,u;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=SS(),o=i.cordova,u=function(){},e.prev=2,e.next=5,new Promise((function(e,i){var a=null;function s(){var t;e();var n=null===(t=o.plugins.browsertab)||void 0===t?void 0:t.close;"function"===typeof n&&n(),"function"===typeof(null===r||void 0===r?void 0:r.close)&&r.close()}function c(){a||(a=window.setTimeout((function(){i(bb(t,"redirect-cancelled-by-user"))}),AS))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&c()}n.addPassiveListener(s),document.addEventListener("resume",c,!1),P_()&&document.addEventListener("visibilitychange",l,!1),u=function(){n.removePassiveListener(s),document.removeEventListener("resume",c,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}}));case 5:return e.prev=5,u(),e.finish(5);case 8:case"end":return e.stop()}}),e,null,[[2,,5,8]])}))),OS.apply(this,arguments)}function LS(e){var t,n,r,i,a,o,u,s,c,l,f=SS();Eb("function"===typeof(null===(t=null===f||void 0===f?void 0:f.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Eb("undefined"!==typeof(null===(n=null===f||void 0===f?void 0:f.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Eb("function"===typeof(null===(a=null===(i=null===(r=null===f||void 0===f?void 0:f.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===a?void 0:a.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Eb("function"===typeof(null===(s=null===(u=null===(o=null===f||void 0===f?void 0:f.cordova)||void 0===o?void 0:o.plugins)||void 0===u?void 0:u.browsertab)||void 0===s?void 0:s.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Eb("function"===typeof(null===(l=null===(c=null===f||void 0===f?void 0:f.cordova)||void 0===c?void 0:c.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}function MS(e){return FS.apply(this,arguments)}function FS(){return(FS=u(a().mark((function e(t){var n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=US(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return r=e.sent,i=Array.from(new Uint8Array(r)),e.abrupt("return",i.map((function(e){return e.toString(16).padStart(2,"0")})).join(""));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function US(e){if(Sb(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!==typeof TextEncoder)return(new TextEncoder).encode(e);for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}var VS=20,BS=function(e){_(n,e);var t=I(n);function n(){var e;return S(this,n),(e=t.apply(this,arguments)).passiveListeners=new Set,e.initPromise=new Promise((function(t){e.resolveInialized=t})),e}return N(n,[{key:"addPassiveListener",value:function(e){this.passiveListeners.add(e)}},{key:"removePassiveListener",value:function(e){this.passiveListeners.delete(e)}},{key:"resetRedirect",value:function(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}},{key:"onEvent",value:function(e){return this.resolveInialized(),this.passiveListeners.forEach((function(t){return t(e)})),k(g(n.prototype),"onEvent",this).call(this,e)}},{key:"initialized",value:function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initPromise;case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(FT);function jS(e,t){return{type:t,eventId:arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,urlResponse:null,sessionId:HS(),postBody:null,tenantId:e.tenantId,error:bb(e,"no-auth-event")}}function zS(e,t){return QS()._set(WS(e),t)}function qS(e){return GS.apply(this,arguments)}function GS(){return GS=u(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,QS()._get(WS(t));case 2:if(!(n=e.sent)){e.next=6;break}return e.next=6,QS()._remove(WS(t));case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)}))),GS.apply(this,arguments)}function KS(e,t){var n,r,i=function(e){var t=JS(e),n=t.link?decodeURIComponent(t.link):void 0,r=JS(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return JS(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){var a=JS(i),o=a.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(a.firebaseError)):null,u=null===(r=null===(n=null===o||void 0===o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=u?bb(u):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function HS(){for(var e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<VS;n++){var r=Math.floor(62*Math.random());e.push(t.charAt(r))}return e.join("")}function QS(){return b_(oE)}function WS(e){return I_("authEvent",e.config.apiKey,e.name)}function JS(e){if(!(null===e||void 0===e?void 0:e.includes("?")))return{};var t,n=e.split("?"),r=s(t=n)||E(t)||l(t)||f();r[0];return ie(r.slice(1).join("?"))}var YS=function(){function e(){S(this,e),this._redirectPersistence=sE,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=DT,this._overrideRedirectResult=_T}return N(e,[{key:"_initialize",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t._key(),(r=this.eventManagers.get(n))||(r=new BS(t),this.eventManagers.set(n,r),this.attachCallbackListeners(t,r)),e.abrupt("return",r);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(e){wb(e,"operation-not-supported-in-this-environment")}},{key:"_openRedirect",value:function(){var e=u(a().mark((function e(t,n,r,i){var o,u,s,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return LS(t),e.next=3,this._initialize(t);case 3:return o=e.sent,e.next=6,o.initialized();case 6:return o.resetRedirect(),yT.clear(),e.next=10,this._originValidation(t);case 10:return u=jS(t,r,i),e.next=13,zS(t,u);case 13:return e.next=15,CS(t,u,n);case 15:return s=e.sent,e.next=18,RS(s);case 18:return c=e.sent,e.abrupt("return",DS(t,o,c));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){throw new Error("Method not implemented.")}},{key:"_originValidation",value:function(e){var t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=function(e){return PS.apply(this,arguments)}(e)),this.originValidationPromises[t]}},{key:"attachCallbackListeners",value:function(e,t){var n=SS(),r=n.universalLinks,i=n.handleOpenURL,o=n.BuildInfo,s=setTimeout(u(a().mark((function n(){return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,qS(e);case 2:t.onEvent(ZS());case 3:case"end":return n.stop()}}),n)}))),500),c=function(){var n=u(a().mark((function n(r){var i,o;return a().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return clearTimeout(s),n.next=3,qS(e);case 3:i=n.sent,o=null,i&&(null===r||void 0===r?void 0:r.url)&&(o=KS(i,r.url)),t.onEvent(o||ZS());case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();"undefined"!==typeof r&&"function"===typeof r.subscribe&&r.subscribe(null,c);var l=i,f="".concat(o.packageName.toLowerCase(),"://");SS().handleOpenURL=function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.toLowerCase().startsWith(f)&&c({url:t}),"function"===typeof l)try{l(t)}catch(n){console.error(n)}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}}]),e}(),XS=YS;function ZS(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:bb("no-auth-event")}}var $S=1e3;function eA(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function tA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return!("file:"!==eA()&&"ionic:"!==eA()&&"capacitor:"!==eA()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function nA(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return W()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G();return/Edge\/\d+/.test(e)}(e)}function rA(){try{var e=self.localStorage,t=fE();if(e)return e.setItem(t,"1"),e.removeItem(t),!nA()||J()}catch(n){return iA()&&J()}return!1}function iA(){return"undefined"!==typeof n.g&&"WorkerGlobalScope"in n.g&&"importScripts"in n.g}function aA(){return("http:"===eA()||"https:"===eA()||H()||tA())&&!(Q()||K())&&rA()&&!iA()}function oA(){return tA()&&"undefined"!==typeof document}function uA(){return sA.apply(this,arguments)}function sA(){return(sA=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(oA()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",new Promise((function(e){var t=setTimeout((function(){e(!1)}),$S);document.addEventListener("deviceready",(function(){clearTimeout(t),e(!0)}))})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var cA={LOCAL:"local",NONE:"none",SESSION:"session"},lA=Eb,fA="persistence";function hA(e,t){lA(Object.values(cA).includes(t),e,"invalid-persistence-type"),Q()?lA(t!==cA.SESSION,e,"unsupported-persistence-type"):K()?lA(t===cA.NONE,e,"unsupported-persistence-type"):iA()?lA(t===cA.NONE||t===cA.LOCAL&&J(),e,"unsupported-persistence-type"):lA(t===cA.NONE||rA(),e,"unsupported-persistence-type")}function dA(e){return pA.apply(this,arguments)}function pA(){return pA=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t._initializationPromise;case 2:n=vA(),r=I_(fA,t.config.apiKey,t.name),n&&n.setItem(r,t._getPersistence());case 5:case"end":return e.stop()}}),e)}))),pA.apply(this,arguments)}function vA(){var e;try{return(null===(e="undefined"!==typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(t){return null}}var yA=Eb,mA=function(){function e(){S(this,e),this.browserResolver=b_(vS),this.cordovaResolver=b_(XS),this.underlyingResolver=null,this._redirectPersistence=sE,this._completeRedirectFn=DT,this._overrideRedirectResult=_T}return N(e,[{key:"_initialize",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._initialize(t));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_openPopup",value:function(){var e=u(a().mark((function e(t,n,r,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openPopup(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_openRedirect",value:function(){var e=u(a().mark((function e(t,n,r,i){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.selectUnderlyingResolver();case 2:return e.abrupt("return",this.assertedUnderlyingResolver._openRedirect(t,n,r,i));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"_isIframeWebStorageSupported",value:function(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}},{key:"_originValidation",value:function(e){return this.assertedUnderlyingResolver._originValidation(e)}},{key:"_shouldInitProactively",get:function(){return oA()||this.browserResolver._shouldInitProactively}},{key:"assertedUnderlyingResolver",get:function(){return yA(this.underlyingResolver,"internal-error"),this.underlyingResolver}},{key:"selectUnderlyingResolver",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.underlyingResolver){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,uA();case 4:t=e.sent,this.underlyingResolver=t?this.cordovaResolver:this.browserResolver;case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function gA(e){return e.unwrap()}function kA(e,t){var n,r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null===t||void 0===t?void 0:t.code))t.resolver=new IA(e,function(e,t){var n,r=ce(e),i=t;return Eb(t.customData.operationType,r,"argument-error"),Eb(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),YI._fromError(r,i)}(e,t));else if(r){var i=wA(t),a=t;i&&(a.credential=i,a.tenantId=r.tenantId||void 0,a.email=r.email||void 0,a.phoneNumber=r.phoneNumber||void 0)}}function wA(e){var t=(e instanceof Y?e.customData:e)._tokenResponse;if(!t)return null;if(!(e instanceof Y)&&"temporaryProof"in t&&"phoneNumber"in t)return eT.credentialFromResult(e);var n,r=t.providerId;if(!r||r===rb.PASSWORD)return null;switch(r){case rb.GOOGLE:n=Ux;break;case rb.FACEBOOK:n=Fx;break;case rb.GITHUB:n=Vx;break;case rb.TWITTER:n=zx;break;default:var i=t.oauthIdToken,a=t.oauthAccessToken,o=t.oauthTokenSecret,u=t.pendingToken,s=t.nonce;return a||o||i||u?u?r.startsWith("saml.")?Bx._create(r,u):Ix._fromParams({providerId:r,signInMethod:r,pendingToken:u,idToken:i,accessToken:a}):new Mx(r).credential({idToken:i,accessToken:a,rawNonce:s}):null}return e instanceof Y?n.credentialFromError(e):n.credentialFromResult(e)}function bA(e,t){return t.catch((function(t){throw t instanceof Y&&kA(e,t),t})).then((function(e){var t,n=e.operationType,r=e.user;return{operationType:n,credential:(t=e,wA(t)),additionalUserInfo:WI(e),user:EA.getOrCreate(r)}}))}function _A(e,t){return xA.apply(this,arguments)}function xA(){return xA=u(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return r=e.sent,e.abrupt("return",{verificationId:r.verificationId,confirm:function(e){return bA(t,r.confirm(e))}});case 4:case"end":return e.stop()}}),e)}))),xA.apply(this,arguments)}var IA=function(){function e(t,n){S(this,e),this.resolver=n,this.auth=t.wrapped()}return N(e,[{key:"session",get:function(){return this.resolver.session}},{key:"hints",get:function(){return this.resolver.hints}},{key:"resolveSignIn",value:function(e){return bA(gA(this.auth),this.resolver.resolveSignIn(e))}}]),e}(),EA=function(){function e(t){S(this,e),this._delegate=t,this.multiFactor=function(e){var t=ce(e);return nE.has(t)||nE.set(t,tE._fromUser(t)),nE.get(t)}(t)}return N(e,[{key:"delete",value:function(){return this._delegate.delete()}},{key:"reload",value:function(){return this._delegate.reload()}},{key:"toJSON",value:function(){return this._delegate.toJSON()}},{key:"getIdTokenResult",value:function(e){return this._delegate.getIdTokenResult(e)}},{key:"getIdToken",value:function(e){return this._delegate.getIdToken(e)}},{key:"linkAndRetrieveDataWithCredential",value:function(e){return this.linkWithCredential(e)}},{key:"linkWithCredential",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bA(this.auth,cI(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithPhoneNumber",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_A(this.auth,WE(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"linkWithPopup",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bA(this.auth,hT(this._delegate,t,mA)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"linkWithRedirect",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dA(z_(this.auth));case 2:return e.abrupt("return",CT(this._delegate,t,mA));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateAndRetrieveDataWithCredential",value:function(e){return this.reauthenticateWithCredential(e)}},{key:"reauthenticateWithCredential",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bA(this.auth,fI(this._delegate,t)));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reauthenticateWithPhoneNumber",value:function(e,t){return _A(this.auth,function(e,t,n){return YE.apply(this,arguments)}(this._delegate,e,t))}},{key:"reauthenticateWithPopup",value:function(e){return bA(this.auth,function(e,t,n){return fT.apply(this,arguments)}(this._delegate,e,mA))}},{key:"reauthenticateWithRedirect",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dA(z_(this.auth));case 2:return e.abrupt("return",ST(this._delegate,t,mA));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendEmailVerification",value:function(e){return function(e,t){return LI.apply(this,arguments)}(this._delegate,e)}},{key:"unlink",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xx(this._delegate,t);case 2:return e.abrupt("return",this);case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateEmail",value:function(e){return function(e,t){return BI(ce(e),t,null)}(this._delegate,e)}},{key:"updatePassword",value:function(e){return function(e,t){return BI(ce(e),null,t)}(this._delegate,e)}},{key:"updatePhoneNumber",value:function(e){return function(e,t){return $E.apply(this,arguments)}(this._delegate,e)}},{key:"updateProfile",value:function(e){return function(e,t){return VI.apply(this,arguments)}(this._delegate,e)}},{key:"verifyBeforeUpdateEmail",value:function(e,t){return function(e,t,n){return MI.apply(this,arguments)}(this._delegate,e,t)}},{key:"emailVerified",get:function(){return this._delegate.emailVerified}},{key:"isAnonymous",get:function(){return this._delegate.isAnonymous}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"phoneNumber",get:function(){return this._delegate.phoneNumber}},{key:"providerData",get:function(){return this._delegate.providerData}},{key:"refreshToken",get:function(){return this._delegate.refreshToken}},{key:"tenantId",get:function(){return this._delegate.tenantId}},{key:"displayName",get:function(){return this._delegate.displayName}},{key:"email",get:function(){return this._delegate.email}},{key:"photoURL",get:function(){return this._delegate.photoURL}},{key:"providerId",get:function(){return this._delegate.providerId}},{key:"uid",get:function(){return this._delegate.uid}},{key:"auth",get:function(){return this._delegate.auth}}],[{key:"getOrCreate",value:function(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}}]),e}();EA.USER_MAP=new WeakMap;var TA=Eb,SA=function(){function e(t,n){if(S(this,e),this.app=t,n.isInitialized())return this._delegate=n.getImmediate(),void this.linkUnderlyingAuth();var r=t.options.apiKey;TA(r,"invalid-api-key",{appName:t.name}),TA(r,"invalid-api-key",{appName:t.name});var i="undefined"!==typeof window?mA:void 0;this._delegate=n.initialize({options:{persistence:CA(r,t.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(pb),this.linkUnderlyingAuth()}return N(e,[{key:"emulatorConfig",get:function(){return this._delegate.emulatorConfig}},{key:"currentUser",get:function(){return this._delegate.currentUser?EA.getOrCreate(this._delegate.currentUser):null}},{key:"languageCode",get:function(){return this._delegate.languageCode},set:function(e){this._delegate.languageCode=e}},{key:"settings",get:function(){return this._delegate.settings}},{key:"tenantId",get:function(){return this._delegate.tenantId},set:function(e){this._delegate.tenantId=e}},{key:"useDeviceLanguage",value:function(){this._delegate.useDeviceLanguage()}},{key:"signOut",value:function(){return this._delegate.signOut()}},{key:"useEmulator",value:function(e,t){J_(this._delegate,e,t)}},{key:"applyActionCode",value:function(e){return function(e,t){return II.apply(this,arguments)}(this._delegate,e)}},{key:"checkActionCode",value:function(e){return EI(this._delegate,e)}},{key:"confirmPasswordReset",value:function(e,t){return function(e,t,n){return xI.apply(this,arguments)}(this._delegate,e,t)}},{key:"createUserWithEmailAndPassword",value:function(){var e=u(a().mark((function e(t,n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",bA(this._delegate,AI(this._delegate,t,n)));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchProvidersForEmail",value:function(e){return this.fetchSignInMethodsForEmail(e)}},{key:"fetchSignInMethodsForEmail",value:function(e){return function(e,t){return OI.apply(this,arguments)}(this._delegate,e)}},{key:"isSignInWithEmailLink",value:function(e){return function(e,t){var n=Rx.parseLink(t);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}(this._delegate,e)}},{key:"getRedirectResult",value:function(){var e=u(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TA(aA(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,PT(this._delegate,mA);case 3:if(t=e.sent){e.next=6;break}return e.abrupt("return",{credential:null,user:null});case 6:return e.abrupt("return",bA(this._delegate,Promise.resolve(t)));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"addFrameworkForLogging",value:function(e){!function(e,t){z_(e)._logFramework(t)}(this._delegate,e)}},{key:"onAuthStateChanged",value:function(e,t,n){var r=AA(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onAuthStateChanged(i,a,o)}},{key:"onIdTokenChanged",value:function(e,t,n){var r=AA(e,t,n),i=r.next,a=r.error,o=r.complete;return this._delegate.onIdTokenChanged(i,a,o)}},{key:"sendSignInLinkToEmail",value:function(e,t){return function(e,t,n){return NI.apply(this,arguments)}(this._delegate,e,t)}},{key:"sendPasswordResetEmail",value:function(e,t){return function(e,t,n){return _I.apply(this,arguments)}(this._delegate,e,t||void 0)}},{key:"setPersistence",value:function(){var e=u(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:hA(this._delegate,t),e.t0=t,e.next=e.t0===cA.SESSION?4:e.t0===cA.LOCAL?6:e.t0===cA.NONE?11:13;break;case 4:return n=sE,e.abrupt("break",14);case 6:return e.next=8,b_(RE)._isAvailable();case 8:return r=e.sent,n=r?RE:oE,e.abrupt("break",14);case 11:return n=x_,e.abrupt("break",14);case 13:return e.abrupt("return",wb("argument-error",{appName:this._delegate.name}));case 14:return e.abrupt("return",this._delegate.setPersistence(n));case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInAndRetrieveDataWithCredential",value:function(e){return this.signInWithCredential(e)}},{key:"signInAnonymously",value:function(){return bA(this._delegate,function(e){return Qx.apply(this,arguments)}(this._delegate))}},{key:"signInWithCredential",value:function(e){return bA(this._delegate,uI(this._delegate,e))}},{key:"signInWithCustomToken",value:function(e){return bA(this._delegate,function(e,t){return vI.apply(this,arguments)}(this._delegate,e))}},{key:"signInWithEmailAndPassword",value:function(e,t){return bA(this._delegate,function(e,t,n){return uI(ce(e),Dx.credential(t,n)).catch(function(){var t=u(a().mark((function t(n){return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:throw n.code==="auth/".concat("password-does-not-meet-requirements")&&wI(e),n;case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}(this._delegate,e,t))}},{key:"signInWithEmailLink",value:function(e,t){return bA(this._delegate,function(e,t,n){return PI.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPhoneNumber",value:function(e,t){return _A(this._delegate,function(e,t,n){return QE.apply(this,arguments)}(this._delegate,e,t))}},{key:"signInWithPopup",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TA(aA(),this._delegate,"operation-not-supported-in-this-environment"),e.abrupt("return",bA(this._delegate,cT(this._delegate,t,mA)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"signInWithRedirect",value:function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return TA(aA(),this._delegate,"operation-not-supported-in-this-environment"),e.next=3,dA(this._delegate);case 3:return e.abrupt("return",ET(this._delegate,t,mA));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateCurrentUser",value:function(e){return this._delegate.updateCurrentUser(e)}},{key:"verifyPasswordResetCode",value:function(e){return function(e,t){return SI.apply(this,arguments)}(this._delegate,e)}},{key:"unwrap",value:function(){return this._delegate}},{key:"_delete",value:function(){return this._delegate._delete()}},{key:"linkUnderlyingAuth",value:function(){var e=this;this._delegate.wrapped=function(){return e}}}]),e}();function AA(e,t,n){var r=e;"function"!==typeof e&&(r=e.next,t=e.error,n=e.complete);var i=r;return{next:function(e){return i(e&&EA.getOrCreate(e))},error:t,complete:n}}function CA(e,t){var n=function(e,t){var n=vA();if(!n)return[];var r=I_(fA,e,t);switch(n.getItem(r)){case cA.NONE:return[x_];case cA.LOCAL:return[RE,sE];case cA.SESSION:return[sE];default:return[]}}(e,t);if("undefined"===typeof self||n.includes(RE)||n.push(RE),"undefined"!==typeof window)for(var r=0,i=[oE,sE];r<i.length;r++){var a=i[r];n.includes(a)||n.push(a)}return n.includes(x_)||n.push(x_),n}SA.Persistence=cA;var NA=function(){function e(){S(this,e),this.providerId="phone",this._delegate=new eT(gA(lk.auth()))}return N(e,[{key:"verifyPhoneNumber",value:function(e,t){return this._delegate.verifyPhoneNumber(e,t)}},{key:"unwrap",value:function(){return this._delegate}}],[{key:"credential",value:function(e,t){return eT.credential(e,t)}}]),e}();NA.PHONE_SIGN_IN_METHOD=eT.PHONE_SIGN_IN_METHOD,NA.PROVIDER_ID=eT.PROVIDER_ID;var PA=Eb,RA=function(){function e(t,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lk.app();S(this,e),PA(null===(r=i.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new GE(i.auth(),t,n),this.type=this._delegate.type}return N(e,[{key:"clear",value:function(){this._delegate.clear()}},{key:"render",value:function(){return this._delegate.render()}},{key:"verify",value:function(){return this._delegate.verify()}}]),e}();function DA(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{s(r.next(e))}catch(t){a(t)}}function u(e){try{s(r.throw(e))}catch(t){a(t)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,u)}s((r=r.apply(e,t||[])).next())}))}function OA(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"===typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=(i=o.trys).length>0&&i[i.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(u){a=[6,u],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}!function(e){e.INTERNAL.registerComponent(new le("auth-compat",(function(e){var t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new SA(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ib,PASSWORD_RESET:ab,RECOVER_EMAIL:ob,REVERT_SECOND_FACTOR_ADDITION:ub,VERIFY_AND_CHANGE_EMAIL:sb,VERIFY_EMAIL:cb}},EmailAuthProvider:Dx,FacebookAuthProvider:Fx,GithubAuthProvider:Vx,GoogleAuthProvider:Ux,OAuthProvider:Mx,SAMLAuthProvider:jx,PhoneAuthProvider:NA,PhoneMultiFactorGenerator:gS,RecaptchaVerifier:RA,TwitterAuthProvider:zx,Auth:SA,AuthCredential:Z_,Error:Y}).setInstantiationMode("LAZY").setMultipleInstances(!1)),e.registerVersion("@firebase/auth-compat","0.4.6")}(lk);var LA=function(){return LA=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},LA.apply(this,arguments)},MA=function(e){return{loading:void 0===e||null===e,value:e}},FA=function(e){var n=e?e():void 0,r=(0,t.useReducer)((function(e,t){switch(t.type){case"error":return LA(LA({},e),{error:t.error,loading:!1,value:void 0});case"reset":return MA(t.defaultValue);case"value":return LA(LA({},e),{error:void 0,loading:!1,value:t.value});default:return e}}),MA(n)),i=r[0],a=r[1],o=(0,t.useCallback)((function(){var t=e?e():void 0;a({type:"reset",defaultValue:t})}),[e]),u=(0,t.useCallback)((function(e){a({type:"error",error:e})}),[]),s=(0,t.useCallback)((function(e){a({type:"value",value:e})}),[]);return(0,t.useMemo)((function(){return{error:i.error,loading:i.loading,reset:o,setError:u,setValue:s,value:i.value}}),[i.error,i.loading,o,u,s,i.value])},UA=function(e,n){var r=FA((function(){return e.currentUser})),i=r.error,a=r.loading,o=r.setError,u=r.setValue,s=r.value;return(0,t.useEffect)((function(){var t=function(e,t,n,r){return ce(e).onAuthStateChanged(t,n,r)}(e,(function(e){return DA(void 0,void 0,void 0,(function(){var t;return OA(this,(function(r){switch(r.label){case 0:if(!(null===n||void 0===n?void 0:n.onUserChanged))return[3,4];r.label=1;case 1:return r.trys.push([1,3,,4]),[4,n.onUserChanged(e)];case 2:return r.sent(),[3,4];case 3:return t=r.sent(),o(t),[3,4];case 4:return u(e),[2]}}))}))}),o);return function(){t()}}),[e]),[s,a,i]},VA=n.p+"static/media/shutdown.17b27a7739ac4262d145.png",BA=(n.p,n.p+"static/media/chatImage.c97e5a066376db57d456.png"),jA=(n.p,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIACAYAAAD0eNT6AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAROwAAETsBZCdQzwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAACAASURBVHic7d1drK15YRbw52xmoDDMQKCSNjAzAk7baAO2WD/QCq2WFBWtTZraxI+LpiYmKlpjvNLUSzU14YKYVGtqNaYajVbEtKaBgTLUWkwR/CgdPv5QeoEp0A5QhhYGL9ZZzJkz+5yz9t7rXc/78fslT4AhnPzXu8N+nvW+a+9zLaf1giQPXc+Lkzz7ep6Z5PNJfiPJY0kevZ5fSfLEic8IAMdwluSB7DrvdyW5L8nzsuu938qu9z6f5OPZdd4Hk3zqVIe7NvGf/7Ik35HkjyZ5TXalfxGfS/JzSd6Z5G3X/71BAMAcnSX5w0m+Lbve+0NJnnPBP+PjSd6RXe/91yTjiOeb3IuS/PXsyvrLR87Hk/xwkm8+2asBgNt7VZJ/nORXc9zOeyLJu5P8tSS/42Sv5hJeluRN2b1rP3bxn5d3JXlDpr+LAQA3u5bkjyd5S07TeY8n+fEkX3+KF3eor83uUF/KaS7CzXlvktdO/SIB4LpvT/K+dDrvi0l+LMnXTP0ib+fuJH8ruw/tNS7CzfmJJC+Z9BUDsGUvSfJv0++7L2f3ofkfTHLXpK/4HA9kdwu+fQHOuyDfO+HrBmCb/myST6bfczfnv2f3CP4kvjvJpyd+QVfNm5M8a6oLAMBmfFWSf5J+r90un0ryXVNdgL03pves/6J5OLuftwSAy3h+dj+S1+6zQ/JEkr8zxUW4luQfzOAFXjTvj88FAHBxX5PkF9PvsYvmTdn9PoKjefMMXtRl86HsPrMAAId4ILvuaPfXZfPmY12IH5rBi7lqRpKXHuuCALBa92f3K3nbvXXV/N2rXogfmMGLOFbcCQDgdpb+zv/mfP9lL8QrsvtLCtov4JgZcScAgKdbyzv/G/N4km+66IV4bpJfmsHhjQAAprbG8t/n0ST3XuRi/OgMDj1lPA4AIFnfbf/z8iOHXoxvyXJ+1v8qGXEnAGDL1vzO/8Z8KckfuNPFOEvy8zM4rBEAwJS2Uv77vCd3+P0Af34Ghzx1PA4A2JYt3PY/L7f9u3KW+FuPjpERdwIAtmBr7/xvzHuz+82+T/MnZnA4IwCAqWy5/Pd53XkX5i0zOFg7HgcArNNWb/vfnJ+8+cK8IMkXZnCwOWTEnQCANfHO/8n8VpIXJk9+IvB7kzzzctd1dR5M8vYYAQBrcH9239Nf3j7ITNyd5Ltv/Ac/lf4qmVs8DgBYNrf9z89b9xforiSPzeBAc8yIOwEAS+S2/63zG0mekSS/fwaHmXNGjACAJVH+d843n+WAXw+4cQ8m+Zl4HACwBA8keTie+d/JHzxL8vXtUyzAy5K8M+4EAMzZ/Unelt33bG7v686SPNQ+xUI8GD8dADBXPu1/MQ+dJfmd7VMsiMcBAPPjtv/FvfQsyX3tUyyMxwEA8+G2/+Xcd5bkue1TLJDHAQB9bvtf3nOvJflirv88IBf24STfluRj7YMAbMwD2ZW/d/6X88Wz7P4OAC7H4wCA03Pb/+oeP0vy2fYpFs7jAIDTcdv/OD5jAByHnw4AmJ5P+x/PZ8+S/Er7FCvhcQDAdNz2P66PnSV5tH2KFfE4AOD43PY/vkfPkvxy+xQr43EAwPG47T+NR8+S/I/2KVbI4wCAq3PbfzrvuZbk2Uk+neRZ5cOs0Uez+z0BH2kfBGBh3PafzheSPP8syeeTvKd8mLXymQCAi1P+0/pvuf57AJLkrc2TrJwRAHA45T+9p3T+A0meSPJlmSwjRgDA7dyf5IPpf79ec57I7o3pUzwyg4OtPSNGAMB5lP9p8s79Bd8/AkiSH7nll4VjeTB+RBDgZn7U73T+6Xn/8O7sPrXeXidbyIg7AQCJd/6nzMey6/okT70D8NtJ3nT+14cjezA+GAjgA3+n9Y+y6/pzPTu7n1lvr5StZMQIALbJO//T5qNJnnOnL8r3zOCgW8qIEQBsi/I/fb7roK9Mdh9Uax92S/lQfDAQ2IYHsvue1/6+u6X89EFfmevuT/JrMzj0ljLiTgCwbt75nz6fyjk/938nfyp+OdCpM2IEAOuk/E+fJ5L8mUO+OOf54Rm8gK3F4wBgbdz27+QfHvLFuZWzJP9mBi9iaxlxJwBYB+/8O/mJPPVH/S/lmdl9gKD9YraWESMAWDbl38nbkzzrgK/PQe5N8q4ZvKitxeMAYKnc9u/kXdl19lHdk92qaL+4rWXEnQBgWbzz7+SRTFD+e0ZAJyNGALAMyr+TSct/zwjoZMQIAOZN+XdykvLfMwI6GTECgHlS/p2ctPz3jIBORowAYF6UfyeV8t8zAjoZMQKAeVD+nVTLf88I6GTECAC6lH8nsyj/PSOgkxEjAOhQ/p3Mqvz3jIBORowA4LSUfyezLP89I6CTESMAOA3l38msy3/PCOhkxAgApqX8O1lE+e8ZAZ2MGAHANJR/J4sq/z0joJMRIwA4LuXfySLLf88I6GTECACOQ/l3sujy3zMCOhkxAoCrUf6drKL894yATkaMAOBylH8nqyr/PSOgkxEjALgY5d/JKst/zwjoZMQIAA6j/DtZdfnvGQGdjBgBwO0p/042Uf57RkAnI0YAcD7l38mmyn/PCOhkxAgAnkr5d7LJ8t8zAjoZMQKAHeXfyabLf88I6GTECICtU/6dKP8bGAGdjBgBsFXKvxPlfw4joJMRIwC2Rvl3ovxvwwjoZMQIgK1Q/p0o/wMYAZ2MGAGwdsq/E+V/AUZAJyNGAKyV8u9E+V+CEdDJiBEAa6P8O1H+V2AEdDJiBMBaKP9OlP8RGAGdjBgBsHTKvxPlf0RGQCcjRgAslfLvRPlPwAjoZMQIgKVR/p0o/wkZAZ2MGAGwFMq/E+V/AkZAJyNGAMyd8u9E+Z+QEdDJiBEAc6X8O1H+BUZAJyNGAMyN8u9E+RcZAZ2MGAEwF8q/E+U/A0ZAJyNGALQp/06U/4wYAZ2MGAHQovw7Uf4zZAR0MmIEwKkp/06U/4wZAZ2MGAFwKsq/E+W/AEZAJyNGAExN+Xei/BfECOhkxAiAqSj/TpT/AhkBnYwYAXBsyr8T5b9gRkAnI0YAHIvy70T5r4AR0MmIEQBXpfw7Uf4rYgR0MmIEwGUp/06U/woZAZ2MGAFwUcq/E+W/YkZAJyNGABxK+Xei/DfACOhkxAiAO1H+nSj/DTECOhkxAuBWlH8nyn+DjIBORowAuJny70T5b5gR0MmIEQB7yr8T5Y8RUMqIEQDKvxPlz1cYAZ2MGAFsl/LvRPnzNEZAJyNGANuj/DtR/tySEdDJiBHAdij/TpQ/d2QEdDJiBLB+yr8T5c/BjIBORowA1kv5d6L8uTAjoJMRI4D1Uf6dKH8uzQjoZMQIYD2UfyfKnyszAjoZMQJYPuXfifLnaIyATkaMAJZL+Xei/Dk6I6CTESOA5VH+nSh/JmMEdDJiBLAcyr8T5c/kjIBORowA5k/5d6L8ORkjoJMRI4D5Uv6dKH9OzgjoZMQIYH6UfyfKnxojoJMRI4D5UP6dKH/qjIBORowA+pR/J8qf2TACOhkxAuhR/p0of2bHCOhkxAjg9JR/J8qf2TICOhkxAjgd5d+J8mf2jIBORowApqf8O1H+LIYR0MmIEcB0lH8nyp/FMQI6GTECOD7l34nyZ7GMgE5GjACOR/l3ovxZPCOgkxEjgKtT/p0of1bDCOhkxAjg8pR/J8qf1TECOhkxArg45d+J8me1jIBORowADqf8O1H+rJ4R0MmIEcCdKf9OlD+bYQR0MmIEcGvKvxPlz+YYAZ2MGAE8nfLvRPmzWUZAJyNGAE9S/p0ofzbPCOhkxAhA+bei/OE6I6CTESNgy5R/J8ofbmIEdDJiBGyR8u9E+cMtGAGdjBgBW6L8O1H+cAdGQCcjRsAWKP9OlD8cyAjoZMQIWDPl34nyhwsyAjoZMQLWSPl3ovzhkoyATkaMgDVR/p0of7giI6CTESNgDZR/J8ofjsQI6GTECFgy5d+J8ocjMwI6GTEClkj5d6L8YSJGQCcjRsCSKP9OlD9M7J4kD6f/f/atZcQIWALl34nyhxMxAjoZMQLmTPl38kiS+w74+gBHYgR0MmIEzJHy70T5Q4kR0MmIETAnyr8T5Q9lRkAnI0bAHCj/TpQ/zIQR0MmIEdCk/DtR/jAzRkAnI0ZAg/LvRPnDTBkBnYwYAaek/DtR/jBzRkAnI0bAKSj/TpQ/LIQR0MmIETAl5d+J8oeFMQI6GTECpqD8O1H+sFBGQCcjRsAxKf9OlD8snBHQyYgRcAzKvxPlDythBHQyYgRchfLvRPnDyhgBnYwYAZeh/DtR/rBSRkAnI0bARSj/TpQ/rJwR0MmIEXAI5d+J8oeNMAI6GTECbkf5d6L8YWOMgE5GjIDzKP9OlD9slBHQyYgRcCPl34nyh40zAjoZMQIS5d+K8geSGAGtjGx7BCj/TpQ/8BRGQCcj2xwByr8T5Q+cywjoZGRbI0D5d6L8gdsyAjoZ2cYIUP6dKH/gIEZAJyPrHgHKvxPlD1yIEdDJyDpHgPLvRPkDl2IEdDKyrhGg/DtR/sCVGAGdjKxjBCj/TpQ/cBRGQCcjyx4Byr8T5Q8clRHQycgyR4Dy70T5A5MwAjoZWdYIUP6dKH9gUkZAJyPLGAHKvxPlD5yEEdDJyLxHgPLvRPkDJ2UEdDIyzxGg/DtR/kCFEdDJyLxGgPLvRPkDVUZAJyPzGAHKvxPlD8yCEdDJSHcEKP9OlD8wK0ZAJyOdEaD8O1H+wCwZAZ2MnHYEKP9OlD8wa0ZAJyOnGQHKvxPlDyyCEdDJyLQjQPl3ovyBRTECOhmZZgQo/06UP7BIRkAnI8cdAcq/E+UPLJoR0MnIcUaA8u9E+QOrYAR0MnK1EaD8O1H+wKoYAZ2MXG4EKP9OlD+wSkZAJyMXGwHKvxPlD6yaEdDJyGEjQPl3ovyBTTACOhm5/QhQ/p0of2BTjIBORs4fAcq/E+UPbJIR0MnIU0eA8u9E+QObZgR0MrIbAcq/E+VP3bX2ASDJvUl+Ksmr2wfZmA9n9z2g8dcJb9m7k3xnks+0D8K2GQDMxT1J3prkNe2DwITeneT1SR5rHwQMAObECGDNlD+zYgAwN0YAa6T8mR0DgDkyAlgT5c8sGQDMlRHAGih/ZssAYM6MAJZM+TNrBgBzZwSwRMqf2TMAWAIjgCVR/iyCAcBSGAEsgfJnMQwAlsQIYM6UP4tiALA0RgBzpPxZHAOAJTICmBPlzyIZACyVEcAcKH8WywBgyYwAmpQ/i2YAsHRGAA3Kn8UzAFgDI4BTUv6sggHAWhgBnILyZzUMANbECGBKyp9VMQBYGyOAKSh/gAW4J8nDSb4scoQ8kuS+ALAIRoAcI8ofYIGMALlKlD/AghkBcpkof4AVMALkIlH+ACtiBMghUf4AK2QEyO2i/AFWzAiQ86L8ATbACJAbo/wBNsQIEOUPsFFGwLaj/AE2zAjYZpQ/AEbAxqL8AfgKI2AbUf4API0RsO4ofwBuyQhYZ5Q/AHdkBKwryh+AgxkB64jyB+DCjIBlR/kDcGlGwDKj/AG4MiNgWVH+AByNEbCMKH8Ajs4ImHeUPwCTMQLmGeUPwOSMgHlF+QNwMkbAPKL8ATg5I0D5w2Jdax8AFu73JHlfkrP2QTbmiSSvSPK/2weBpfJNCy7v/iQ/Gf8/ajhL8l+SvLR9EAC25f4kH0z/NvjW89EYAQCciPKfV4wAACan/OcZIwCAySj/eccIAODolP8yYgQAcDTKf1kxAgC4MuW/zBgBAFya8l92jAAALkz5ryNGAAAHU/7rihEAwB0p/3XGCADglpT/umMEAPA0yn8bMQIA+Arlv60YAQAo/43GCADYMOW/7RgBbNq19gGg5P4kb0/y8vZBqPpYktcm+Uj5HHByBgBbpPy5kRHAJhkAbI3y5zxGAJtjALAlyp/bMQLYFAOArVD+HMIIYDMMALZA+XMRRgCbYACwdsqfyzACWD0DgDVT/lyFEcCqGQCslfLnGIwAVssAYI2UP8dkBLBKBgBro/yZghHA6hgArInyZ0pGAKtiALAWyp9TMAJYDQOANVD+nJIRwCoYACyd8qfBCGDxDACWTPnTZASwaAYAS6X8mQMjgMUyAFgi5c+cGAEskgHA0ih/5sgIYHEMAJZE+TNnRgCLYgCwFMqfJTACWAwDgCVQ/iyJEcAiGADMnfJniYwAZs8AYM6UP0tmBDBrBgBzpfxZAyOA2TIAmCPlz5oYAcySAcDcKH/WyAhgdgwA5kT5s2ZGALNiADAXyp8tMAKYjbP2ASDJA0kejvI/tUeS/Fz7EBvzQJKfuf6vAJt2f5IPJvmynDSPJLk3yT3Zja/2ebaWjyZ5aQA2Svl3si//PSOgEyMA2CTl38nN5b9nBHRiBACbovw7uVX57xkBnYwYAcAGKP9O7lT+e0ZAJyNGALBiyr+TQ8t/zwjoZMQIAFZI+Xdy0fLfMwI6GTECgBVR/p1ctvz3jIBORowAYAWUfydXLf89I6CTESMAWDDl38mxyn/PCOhkxAgAFkj5d3Ls8t8zAjoZMQKABVH+nUxV/ntGQCcjRgCwAMq/k6nLf88I6GTECABmTPl3cqry3zMCOhkxAoAZUv6dnLr894yATkaMAGBGlH8nrfLfMwI6GTECgBlQ/p20y3/PCOhkxAgAipR/J3Mp/z0joJMRIwAoUP6dzK3894yATkaMAOCElH8ncy3/PSOgkxEjADgB5d/J3Mt/zwjoZMQIACak/DtZSvnvGQGdjBgBwASUfydLK/89I6CTESMAOCLl38lSy3/PCOhkxAgAjkD5d7L08t8zAjoZMQKAK1D+nayl/PeMgE5GjADgEpR/J2sr/z0joJMRIwC4AOXfyVrLf88I6GTECAAOoPw7WXv57xkBnYwYAcBtKP9OtlL+e0ZAJyNGAHAO5d/J1sp/zwjoZMQIAG6g/DvZavnvGQGdjBgBQJR/K1sv/z0joJMRIwA2Tfl3ovyfygjoZMQIgE1S/p0o//MZAZ2MGAGwKcq/E+V/e0ZAJyNGAGyC8u9E+R/GCOhkxAiAVVP+nSj/izECOhkxAmCVlH8nyv9yjIBORowAWBXl34nyvxojoJMRIwBWQfl3ovyPwwjoZMQIgEVT/p0o/+MyAjoZMQJgkZR/J8p/GkZAJyNGACyK8u9E+U/LCOhkxAiARVD+nSj/0zACOhkxAmDWlH8nyv+0jIBORowAmCXl34ny7zACOhkxAmBWlH8nyr/LCOhkxAiAWVD+nSj/eTACOhkxAqBK+Xei/OfFCOhkxAiACuXfifKfJyOgkxEjAE5K+Xei/OfNCOhkxAiAk1D+nSj/ZTACOhkxAmBSyr8T5b8sRkAnI0YATEL5d6L8l8kI6GTECICjUv6dKP9lMwI6GTEC4CiUfyfKfx2MgE5GjAC4EuXfifJfFyOgkxEjAC5F+Xei/NfJCOhkxAiAC1H+nSj/dTMCOhkxAuAgyr8T5b8NRkAnI0YA3Jby70T5b4sR0MmIEQDnUv6dKP9tMgI6GTEC4CmUfyfKf9uMgE5GjABIovxbUf4kRkArI0YAG6f8O1H+3MgI6GTECGCjlH8nyp/zGAGdjBgBbIzy70T5cztGQCcjRgAbofw7Uf4cwgjoZMQIYOWUfyfKn4swAjoZMQJYKeXfifLnMoyATkaMAFZG+Xei/LkKI6CTESOAlVD+nSh/jsEI6GTECGDhlH8nyp9jMgI6GTECWCjl34nyZwpGQCcjRgALo/w7Uf5MyQjoZMQIYCGUfyfKn1MwAjoZMQKYOeXfifLnlIyATkaMAGZK+Xei/GkwAjoZMQKYGeXfifKnyQjoZMQIYCaUfyfKnzkwAjoZMQIoU/6dKH/mxAjoZMQIoET5d6L8mSMjoJMRI4ATU/6dKH/mzAjoZMQI4ESUfyfKnyUwAjoZMQKYmPLvRPmzJEZAJyNGABNR/p0of5bICOhkxAjgyJR/J8qfJTMCOhkxAjgS5d+J8mcNjIBORowArkj5d6L8WRMjoJMRI4BLUv6dKH/WyAjoZMQI4IKUfyfKnzUzAjoZMQI4kPLvRPmzBUZAJyNGAHeg/DtR/myJEdDJiBHALSj/TpQ/W2QEdDJiBHAT5d+J8mfLjIBORowArlP+nSh/MAJaGTECNk/5d6L84UlGQCcjRsBmKf9OlD88nRHQyYgRsDnKvxPlD7dmBHQyYgRshvLv5JEk9x3w9YEtMwI6GTECVk/5d6L84XBGQCcjRsBqKf9OlD9cnBHQyYgRsDrKvxPlD5dnBHQyYgSshvLvRPnD1RkBnYwYAYun/DtR/nA8RkAnI0bAYin/TpQ/HJ8R0MmIEbA4yr8T5Q/TMQI6GTECFkP5d6L8YXpGQCcjRsDsKf9OlD+cjhHQyYgRMFvKvxPlD6dnBHQyYgTMjvLvRPlDjxHQyYgRMBvKvxPlD31GQCcjRkCd8u9E+cN8GAGdjBgBNcq/E+UP82MEdDJiBJyc8u9E+cN8GQGdjBgBJ6P8O1H+MH9GQCcjRsDklH8nyh+WwwjoZMQImIzy70T5w/IYAZ2MGAFHp/w7Uf6wXEZAJyNGwNEo/06UPyyfEdDJiBFwZcq/E+UP62EEdDJiBFya8u9E+cP6GAGdjBgBF6b8O1H+sF5GQCcjRsDBlH8nyh/WzwjoZMQIuCPl34nyh+0wAjoZMQJuSfl3ovxhe4yATkaMgKdR/p0of9guI6CTESPgK5R/J8ofMAI6GTEClH8pyh/YMwI6GdnwCFD+nSh/4GZGQCcjGxwByr8T5Q/cihHQyciGRoDy70T5A3diBHQysoERoPw7Uf7AoYyATkZWPAKUfyfKH7goI6CTkRWOAOXfifIHLssI6GRkRSNA+Xei/IGrMgI6GVnBCFD+nSh/4FiMgE5GFjwClH8nyh84NiOgk5EFjgDl34nyB6ZiBHQysqARoPw7Uf7A1IyATkYWMAKUfyfKHzgVI6CTkRmPAOXfifIHTs0I6GRkhiNA+Xei/IEWI6CTkRmNAOXfifIH2oyATkZmMAKUfyfKH5gLI6CTkeIIUP6dKH9gboyATkYKI0D5d6L8gbkyAjoZOeEIUP6dKH9g7oyATkZOMAKUfyfKH1gKI6CTkQlHgPLvRPkDS2MEdDIywQi4P8mHZvDitpZHktx7wNcHYG7uy+57WPv76Nbyoew6+yhemOT/zOBFbS3e+QNL505AJ7+c5EV3/vLc3nNiwTWi/IG1MAI6+fnr1/5SriX5DzN4EVuL2/7A2twbbyYb+ffZdfmF/Y0ZHH5r8c4fWCt3Ajr5qwd8bZ7iVUken8HBtxTlD6ydEXD6PJ7kmw742iRJnpHkvTM49Jai/IGtMAJOn/cnueuAr03eOIPDbinKH9gaI+D0+St3+qK8KMmnZ3DQrcQH/oCt8sHA0+aT2f1Y/1ec3fQF+ZtJnh9O4d1JXp/kM+2DABR8JsnrkryjfZCNeEF2d/jPdW+8+z9V3PYH2PE44HT5ZJLn7i/8jXcAfiDe/Z/Cu5N8Z5LH2gcBmIHPJXlDdt8bmdYLknz/ef/F+9NfJ2uPd/4A53Mn4DT5nzdf+FfO4FBrj/IHuD0j4DT5xuTJRwDfd6evClfitj/AnXkccBpP6fxfTH+RrDXe+QNcjDsB0+YXkt1fEvC87D4Z+IxDvipcyP5H/bzzB7iYe5K8Nclr2gdZoS8leeFZkm+N8p+C2/4Al+dxwHSekeTVZ0l+b/skK+SX/ABcnV8WNJ1XniV5qH2KlXHbH+B4PpfkT8YIOLaHDIDjUv4Ax2cEHN9DZ0m+tn2KlfDMH2A6PhNwXC8+yw2/F5hL88wfYHo+E3A89xgAV+e2P8DpeBxwHPeeJbmrfYoFc9sf4PQ8Dri6u8+S/Gb7FAvltj9Aj8cBV/PZsySfbZ9igdz2B+jzOODyPnuW5Nfbp1gYt/0B5sPjgMv59bMkH26fYkHc9geYH48DLu5DZ0kebZ9iIdz2B5gvjwMu5tGzJL/UPsUCuO0PMH8eBxzuA0nyjen/3cRzziNJ7rvkBQbg9O5J8nD6/THnfEOSXEvyiRkcZo5R/gDLZATcOp9Icu3s+n/42Ute4DVz2x9guTwOuLWHs+v+JMn3pb9I5hTv/AHWwZ2Ap+d7brxAz8nuxyjah5pDlD/AuhgBT+axJM+++QL9yxkcrJ1Hktx784UBYPHuze57fLtn2vkX512c3zeDg7XL3zt/gPVyJyB51a0uzttmcDjlD8BUtjwCfvp2F+Z1Mzhgo/zd9gfYjq0+Dvi2O12Y/zyDQ56y/L3zB9ierd0J+I+HXJSXJ3l8BodV/gBMaSsj4PEkDx16Uf7+DA48dfm77Q/AFh4H/L2LXJC7krxrBoeeqvy98wdgb813At6ZXadfyEuS/NoMDq/8AZjaGkfAp5I8eNkL8h1JvjCDF3Gs8nfbH4BbWdPjgC8k+WNXvSB/LsmXZvBirlr+3vkDcCdruBPwRJK/cKwL8sbrf2D7RV0m74p3/gAc7t4s93NwT2TX2Uf1l5L89gxe3EXyn7L7i44A4CKeleTfpd9jF8kXk/zlKS5GkvzpJL85gxd5SP5ZLvHJRwC47q4kP5p+nx2SzyV5wzSX4Um/O8n7yy/0dvl8Jrj9AcBm/cXsCrbdb7fK/03yysle/U2em+THJnwxV7kIr5juZQOwUa/MrmPaPXdz/nl2H1w8uW9P8r8ueNgp8rkkP5TkqyZ9tQBs2TOzu8P8mfR77wNJXj/ty72zZyb520n+X05/Ab6Y5F8luX/yVwkAOw8m+dfZddCpe+8TSX4wyd2Tv8oLeFZ2z0k+kOkvwONJfjzJ153klQHA0700yZtyms8HfCS7uw+z/sm2syR/JLuLcsy7Al/K7ucy35jkq0/2agDg9p6X3Rvgt+S4Py7/6eze7L4hE/xU27Vj/4E3uTvJtyR5TZJvze4Dei8+8H/7WHZ3Ex5J8o4kP5vkkxOcEQCO5auzexP82iSvTvINOfyX0f1qkvdl9xf4pMkChAAAAA9JREFUvDPJL2Q3KCbx/wFAUgeuI+do3wAAAABJRU5ErkJggg=="),zA="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABAEAYAAAD6+a2dAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAGYktHRAAAAAAAAPlDu38AAAAJcEhZcwAAAGAAAABgAPBrQs8AABD1SURBVHja7Z15XFTX2cd/59yBuKCIoIgaUV8lapCa9xWJzuaMWiUqGNG4xSUuuICYWI0b0eAS16qJNUTQutTaONAojUtMVNyrxDY2bnGNGwgEorhr5D7949x7G/ClzCA6A/L753A/d3zm+Z3vec49dxuBClWoQi+umLMTqJDxXSI/PyD/FtCwIYBbQO3agLwEuHkTkFoBmZnAwVzg3DkAYEyWS+vbKwbAc5OZiGrU4JV+yQFiYhCFS0BEBJZgHBAUVOw/bwUGZGfTOEwGbdlCg+VWwNKlwOGXGT9+vKRZVQyAZyzdibb3iMaMYZ+wQcCsWViNDKBmzacOXAUTAVmmg9QZWLfucSB/GRQTAxzMZfz2bXvDVAyAUlcLG8nu7u5zalQG4uPZTMwFGzr0iY9Z4AHcv489NAK0Zw9+4KPAjh6lelQPlJOD5tQczNMT3bAaaNwYRmQDnTuz/qw/4Of3RLwQ2gmcPIlQ6bdAWNjDKQcOMHbxorN74wWSAF/FX9+NKCWlShW9nohIawfqvYnu36+co59HFBfnSeKQ4Mg3EHFe6Xi7M0R9+lSJ1nuTfOHCE9/jqTcTpadXa6j3JnrlFWf3ygsgAb7qJwK8h4cAobWmdvlEGRnV7hlmkhwSUlrf6ulpMBB5eXlM0H9ItGPHE9/btWIgFOwwamcjGjLE018/iig31zNZH0y0bFnJIwrw1d8X4D09RcerbfV5zwtAMXl8pp9JdO1azXuvXyWqV+/597yTVdNPP4Vo2DCv/9P/jSg/38tLdIzXAP3nRDk5jkcUHe41QHS4Fk9paxwQ4L1TnnflFZPXFP1SorQ0fzITUaVKzy8vJ8lnkwDvYxDgfXxER6jbtXqLGcH+iKKDfcyig7V4auvvLPD/f54ij/37n8jzl3Z7iKZOdV5+z1i+nQT42lYBunZtYVzdVvfb352iQ2ulCPBaPLUd4CrgC6q2NWQDyb6+tT/VNyP6+Wct3+ntsohu3FDXEM7Os9Tkd06A9esqQPv5CcPa9rmSga/zqQCvxVPaOvECfF2La4F/ol9W6L8hmjy5cP51h7fzJHrnHe7sBJ9W9d8TYKUpaAskJEj/wnyAc0mPSYAsSwH4OxAZeb3pwbmMrVpVXDwVfN4xr3VgSUm6j3ADCAuTJLGfn4EOyMjgNpwArNaM1IO5jJ054+x+KEpu/nwrsHat5A89QKT6YEuRBnTv7uz8Siz/lwT4Bv0NW4ny8xs0MBiIiNRtdb+98VTwDQYbdhOlpGjx1DbIMJAoPb3hv1y74otSg1aGIUQnTmh+kg0tiM6cKXMzQKO7Bh+ioUP5QGYAEhKkv2MuwLnUBAaASHcYJiA6+vJDxyr+fprXAzCbTdqH6b+ueOkxJgBZWeiKT4FOnS79xrUrvihJQ3EIuHpVm8ke4wpQt26ZGQAa+IlYCyQm8lQBnjcV4NklTAOioi5ePFCNsfj44uKp4B+YBHi+iSUA4eFc6REeJMBLk9EBsFqvzD1QjbFTp5zdDyUVa0N/BRjT/LWHGSBy+QEQcERM5W7TBXhpp1LxPTAFkGVpFjFgxAhHwf9ys6YPWFKSziTAaxX/IxoBGRk6bxoGmM3nY8o2eFW68+z3QP36ms8f8CNw/brO2YkVpeaDBXjaLKZ6bBXgESHAsww6AERGng5xbKqXTwrw0kYx1UMtgdoCPBloG2C1nvlj2ZzqC6vZXeV5gwFUCWjRAhznAYBaIw504oTLDYBX7yqLt98r4Dcq4PsL8PidAH+yqmPg2Q4F/GEFvFIJGCvA8/4C/PHq5QO8Kj5A/gcwZAg7xwhgTPVNnVAJbMsWZ+enSQXfcp5YxbdsKVar6rY2MOyUCj7wpFjVa/GUNnC7WNW3vFU2V/XFKXCOuBAU+Fj/C9GNG5rvAtteXk6fAV5rZPIkGjaMVpIZSEjA55gDcI7hiAVkmS1lfYDIyO8m78tzpOLdaoiKZwPYDKXixbMPl2ECMjLy9fJn5bHiVf+6TPfKYMnJaA0rUKOG6p/5sCvA/Pnf3dx/gLEbN5y2CFTBs/dpI5CQwNcK8HwkphUA/6Nj4CvdUab6yQK8tuptIMDrxpdv8Kp/vgYLAINB9c+mIR1IS6t+gzcWj5I5SW26C/DBa4xfEeXnBwcbjURE6ra631HjwbPEVK/FU9vPjdOI0tNbzyqfU31x/lsfNO4hunbttXZ6b6K6dZ2WqAo2ZIMAHRIiElS3Swq+zV1hXIuntG0OuRb4EDL2JhoyJKS28WOi3NyQrw23n+Z5hDLjXz9FgG23SYBu104kqG6r+x013vasMK7FU9tGwrje2zXAF+l/mWF3SZ5HKDP+TZ7CuPErYdxoFAmq2+p+R40bdgvjWjy1neYixu30b+wtZoRy59+UIi7ZmncLo2azSNA83TiVSJbNwwy3iUaPdtS4aaHRl2jzZi2e0prSDZuJMjMNtw23iVq0cJrxMuq/1E4DLWGmFKKhQ+GDKkBiIvsAswDO0Ulcc6Zwdh2IikptudeuS7a9ewnjuSafy2A2G/rjFSA8XLuAc4sWAVlZLADNAat1113nXrItq/6f+r2ADtmK8cuK8SmK8Y4wAUTYKYzv3Ll3lSPGb1RSjGfiSyA8XPtAU2Gc1pFLgC/r/kt8HeC3c4VxKVsY18UK49IbwjgPLJnxW3nCuPSTMK7dvJgojLt94xrgX1j/oU2E8S5nTd8Q5eeHhppMREShn5hiiWQ5tIl5mCPHONV4lx2mhUSbN2vxlLbLcWMaUWZmaBPXOMaXN/92HwK67lWmusbKVDdameq6iRFPj8WI3xrt2Ii/FyZGPLMVmupOixEv+YkRn3LAuRX/wvrvvkycznTPEiM+LEyMTHVb3W9vPNV4mJ+pFVFKihpPa9ubEojS08MOuMbpXPgA47skDx9elH91f1n1X+QM8OYhMxF16YLp8gNgyxZUY50BScKbyoj/Xoz4zYscG/GPGyqLmwuFRvxbYsTLy12j4ns8Uir+gVLxg5WKL+/+I/rq5xG9+mrPs6Ykory8iAgxMiM2iGNcz9SSVXzEFTHitXhqe1qM+N69XaPie00VFd3zgahwNU91W91fXvxr1wFmkHj79NRuXXNgwwYWi8VA9erabdSXCEBcnM1i3905Vax+rQ+BP/xBmoBaBR7E2IUpQEYGTec/AVZrUtI+p96d61PZTCQPH05zkQq2YgU/jziAc3yBDwFZZl6wgEaO3Hh/XyfGV64sLp4Knv2u1kOwpCRpAjxd0b92GnimtjkcNGCAlIjFQFCQdht1GHUDUlJsEftmAzNn2t2hSWZ/otBQnolaYCNGaPF64icgM5OsqvHUgc4E32+FAM9kBXwfAZ6nYAYgy9JnKvi9zBHwUroAzz/GygK3pR8p4F3EP1crX9LhZbC4OO28sxmmA48e8bVyCjB+PAAwRmRvYN0++gSYNk2LN1hcEdNVktcAERHONv52MwGeTxLgpV4CvPSVAK9rJMD/ZaRj4N3TlIpvLMBr/nsK8NJy1wCvil/0tTQHBQdLnXAcaNRIS/gYrMDq1Rs2OPZLE/2qWA+T7OsrJbNqQNu2WrxkGgds3bq+x/42jB065CzDg7Yr4PMU8GEK+N1Kxf9FgF//g2PgK3+hgG9fEDxfJMBDL8D/uZ5rgFfFpcvyKbDu3bUpSj0oBEMHbNzoaED3u/khYM2b887KVKrEk46ymqAdO5xl9J3OCvjRylSv5rdPAR8kwK8LdQx81WXKVD+o0FR/UIB3W+ya4FVxaRaSAKNRq9TvaROQl9doKh6D9u93NKD0JTsEeHtr8dR30TxoFlh29vM2OOyUAv6KUvEdlIo/ooDfJsCv3uEY+OqTlIqPLTTVvyzA854C/B8XuiZ4VZy/jolA3brayL3D9gIXLsSxvYzxx48dDaj7kqaA/lP5aqtrwXaC7F9DPK1GXBLn8byfUvEGpeJHibWIZMSfgejoVS0cA1/jA3EezxMKVXwj2gBkZeka5euBTp1cHbwqLq1gTYA6dSSJMQCQZuGe+GHCkuk/la/E09rnY2hUrCWMaOhQqS+rBiQmSm3ZTIBzKZpZACKpKtKBqKiEBHsv4PTuRbK7u/eIWr3BbDYpnm8VN2kUXzHYA2Rl8bpuAYDVumJo2XqTiHN/5AMeHtpItrB6oLt3nz5wwfZZK8pPgOf75HeBxET+vwI8H4v2AJE0ka4CUVGftXAMfK2z2UlgNhtPYZZfvzvI5lAqkJVF3+o8BPhdd8sSeFW88LH6aSu1qHjPagYYu00BHyTAS79RKv49BfxlAX751/aBn0ECfJ19ArxkFuA1H8cFeN2Rsg1e1RPHah73dAGlVWwumCwXjiuNYNPBSm8+GDfSTCRHR/N4peKbKRV/iaYDsiwdphmgyMhlbzgG/uag7HCwpCTer2DF80sIA65f5/34esBsXvZG2QavqtRnAGaW6wEZGU/EDcVaoG/f9wP03iRXq2ZvvDE2M5Hs4THhbctNIqt1fKaZiDZvlqoyC9iyZVJTpeKvC/C6dLGqXzrQvsWdCv52BwFeqsVWFVjVBwvwCGW1AIvl4zFlY3Fnr3SFa5JmKH8sKVnA9Oq+E4G0NP++2ROAs2dhY4uAgAAMwFWgRw8Zbi3Bbt2agPaw65wgDRYAQB3xYb5IuYGp5t2KUoGHD9nnfCAoMnJhRqqV8XXrigurgr/3ilLxYQK89oExSsV3EeAXny1f4FWV+gyQlJSUxFh+PluArkCfPpJE7wNXrhS3NnC4XU6poCNH+CVpMMhkWpiRut4R8A89FPBvFqr49QXBLyin4FXpOGcFnwmQSudUfWHyXsbYsWOT3u/YgeSgIP4/8mWw0aPRjGKAwEC8Tq+B3N2LDwRPsDt3EMotoIsX+QSEAV9/Pef+bgb27beIte8ehQr+0fScvWBJSSyG5wJhYUx9JuIHjAGuX5dW4wFgscwOLd/gVemeqPhSXq3PX7BzF+N5eWJr3jwA75UoUKz2V7FV/mup4GXfnIZgNpsUidwCt2Vb4wyQlZUfw4cAHTvO9tt190UAr+qZDwBnSQUPCPB8NP5R4AmcDwV4gOcBVutsVj5W9Y6q1E8DnS0VPJ+ggJ8pwGv+EgqCj3tBwavi0kew/PoHBKV7bGdpnq8/L6ng3WuIY7zkJcBrvm6JYzwPwnzAbH7Rwavi7B7OgnJztQoBNQec+B65g5o3t2MHkj09X+qWEwWWksImIbDATZrmAjydEIu7D3a8GIs7e8V1dTEM7OhRrVK+YIOANm0+2tlhEMkBAc5OsCgtXGcmkgMDeXx+W+DwYcmEmUCXLqoP3QfKqv7VCvD/TZy1pnxgzRqtYkbCBEiSmyS3BDZuFBXWoIGzE138uplIbtJkYazlT0QrV2IB14EdO8bG4iBYs2Za/tFYAJw+rQuWe4FMpknNKsD/NzEigIixJd9b3YBdu7ALRsBi0T4xBD8CeXl4A0YgPp61Z02BEydkH9oNevSo1BJJphZgbm6IQ2fA1xcz4AP4+9M37A7QoQNLxDwgMLDIADYsB7Zu1dV4qTuof/+Yr7afZ/zWLWd3sKtLuwi06KiZSPbx0f2VXwfbtg2+7G0gONjZCRaZ+AL8Ezh7libiNVBs7Lh3d6eCJScz5tjDqy+6nngzaLXyX4rcmcjnAxMnIpH9BIqJwWx8B+bj89wzHEVrgZ9/ZuFIBrZvpy7sb6CUlJyx+buBTZtK+uRShYSKfTnUZuvdm0iScnJycoBWrWgKLQbq12cf8fF2Xcq1UzRVXgz26BEFSEuA7Gx+XmoPunbNZ4XndrCMjLfeEvcYnN1hFapQhSpUfvRvcyl/OsJClhMAAAAASUVORK5CYII=",qA=n(184);lk.initializeApp({apiKey:"AIzaSyBvdZf8HDhmF9Y0xz467IT8TwkgAL-bdVE",authDomain:"chatgroup-489be.firebaseapp.com",projectId:"chatgroup-489be",storageBucket:"chatgroup-489be.appspot.com",messagingSenderId:"652478643929",appId:"1:652478643929:web:83584cb0063fd0cdd4c8c8",measurementId:"G-FXNQJRD4BE"});var GA=lk.auth(),KA=lk.firestore();function HA(){var e=KA.collection("users"),t=function(){var t=u(a().mark((function t(n){var r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=new lk.auth.GoogleAuthProvider,t.next=4,GA.signInWithPopup(r);case 4:return t.next=6,e.doc(GA.currentUser.uid).set({name:GA.currentUser.displayName,email:GA.currentUser.email,photo:GA.currentUser.photoURL,uid:GA.currentUser.uid},{merge:!0});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return(0,qA.jsx)("div",{className:"HomePage",children:(0,qA.jsxs)("div",{className:"mainContent",children:[(0,qA.jsxs)("div",{className:"mainLogo",children:[(0,qA.jsx)("img",{src:BA,className:"chatImage",alt:"LogoImage"}),(0,qA.jsx)("p",{className:"headingMain",children:"Chat Group"})]}),(0,qA.jsxs)("div",{className:"login",children:[(0,qA.jsx)("p",{className:"headingMain",children:"Join Our Group Chat!"}),(0,qA.jsx)("button",{onClick:t,className:"SignInButton",children:"Sign in with google"})]})]})})}function QA(){var e=h((0,t.useState)(""),2),n=e[0],r=e[1];function i(e){r(e.target.value)}var o=KA.collection("messages"),s=KA.collection("messages").orderBy("timeStamp"),c=h(nk(s),1)[0],l=o.doc().id;(0,t.useEffect)((function(){!function(){var e=document.getElementById("messagess");e&&(e.scrollTop=e.scrollHeight-e.clientHeight)}()}),[c]);var f=function(){var e=u(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),""===n){e.next=5;break}return e.next=4,o.doc(l).set({name:GA.currentUser.displayName,uid:GA.currentUser.uid,value:n,photo:GA.currentUser.photoURL,mId:l,timeStamp:lk.firestore.FieldValue.serverTimestamp(),delivered:!0,message:!0,reply:!1,photoM:!1},{merge:!0});case 4:r("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var v=h((0,t.useState)(!1),2),y=v[0],m=v[1],g=h((0,t.useState)(""),2),k=g[0],w=(g[1],h((0,t.useState)(""),2)),b=w[0],_=(w[1],h((0,t.useState)(""),2)),x=_[0],I=(_[1],function(){var e=u(a().mark((function e(t){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),i=o.doc().id,o.doc(i).set({name:GA.currentUser.displayName,senderName:k,uid:GA.currentUser.uid,senderUid:x,value:n,senderMsg:b,photo:GA.currentUser.photoURL,mId:i,timeStamp:lk.firestore.FieldValue.serverTimestamp(),delivered:!0,message:!1,reply:!0,photoM:!1}),e.next=5,m(!1);case 5:return e.next=7,r("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),E=h((0,t.useState)(null),2),T=E[0],S=E[1],A=h((0,t.useState)(null),2),C=A[0],N=A[1],P=function(e){var t=e.target.files[0];N(URL.createObjectURL(t)),S(t),document.getElementById("previewBox").style.display="flex"},R=document.getElementById("clipButton");R&&R.addEventListener("change",P);var D=function(){var e=u(a().mark((function e(t){var n,r,i,u,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),document.getElementById("previewBox").style.display="none",r=Zw(),i=T.name+"-"+Date.now()+(null===(n=GA.currentUser)||void 0===n?void 0:n.uid),a=i,u=Gw(ce(r),a),e.next=7,Yw(u,T);case 7:return e.next=9,Xw(u);case 9:return s=e.sent,e.next=12,o.doc(l).set({name:GA.currentUser.displayName,uid:GA.currentUser.uid,photo:GA.currentUser.photoURL,mId:l,timeStamp:lk.firestore.FieldValue.serverTimestamp(),delivered:!0,photoM:!0,src:s,message:!1,reply:!1},{merge:!0});case 12:return e.next=14,N(null);case 14:return e.next=16,S(null);case 16:case"end":return e.stop()}var a}),e)})));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=u(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return document.getElementById("previewBox").style.display="none",e.next=3,N(null);case 3:return e.next=5,S(null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,qA.jsxs)(qA.Fragment,{children:[(0,qA.jsx)("div",{id:"previewBox",className:"preview-box-container",children:(0,qA.jsxs)("div",{className:"preview-box",children:[(0,qA.jsxs)("div",{className:"head-preview",children:[(0,qA.jsx)("h2",{children:"Preview"}),(0,qA.jsx)("img",{className:"close",onClick:O,src:jA})]}),(0,qA.jsx)("div",{className:"image-div",children:(0,qA.jsx)("img",{src:C,className:"selectedImage",alt:"selected image"})}),(0,qA.jsx)("div",{className:"button-send",children:(0,qA.jsx)("button",{onClick:D,children:"Send"})})]})}),(0,qA.jsxs)("div",{className:"ChatPage",children:[(0,qA.jsxs)("div",{className:"nav",children:[(0,qA.jsxs)("div",{className:"logo",children:[(0,qA.jsx)("img",{src:BA,className:"userImg",alt:"LogoImage"}),(0,qA.jsx)("p",{className:"heading",children:"Chat Group"})]}),(0,qA.jsxs)("div",{className:"userDiv",children:[(0,qA.jsx)("img",{src:GA.currentUser.photoURL,className:"userImg",alt:"userImage"}),(0,qA.jsx)("p",{className:"userNameNav",children:GA.currentUser.displayName}),(0,qA.jsx)("img",{src:VA,className:"signout",onClick:function(){GA.signOut()},alt:"logoutButton"})]})]}),(0,qA.jsxs)("div",{className:"chatParent",children:[(0,qA.jsx)("div",{className:"chatBox",children:(0,qA.jsx)("div",{id:"messagess",className:"mainChat",children:c&&c.map((function(e){return!0===e.message?e.uid===GA.currentUser.id?(0,qA.jsx)("div",{className:"userMessage",children:(0,qA.jsx)("p",{children:"Right"})}):(0,qA.jsx)("div",{className:"senderMessage",children:(0,qA.jsx)("p",{children:"left"})}):!0===e.reply?e.uid===GA.currentUser.id?(0,qA.jsx)("div",{className:"userReply",children:(0,qA.jsx)("p",{children:"Right"})}):(0,qA.jsx)("div",{className:"senderReply",children:(0,qA.jsx)("p",{children:"left"})}):!0===e.photoM?e.uid===GA.currentUser.id?(0,qA.jsx)("div",{className:"userPhotoM",children:(0,qA.jsx)("p",{children:"Right"})}):(0,qA.jsx)("div",{className:"senderPhotoM"}):null}))})}),(0,qA.jsx)("div",{className:"inputRow",children:y?(0,qA.jsxs)("div",{className:"replying",children:[(0,qA.jsxs)("div",{children:[(0,qA.jsxs)("p",{children:[" Replying to: ",k]}),(0,qA.jsxs)("p",{children:[" Msg: ",b]}),(0,qA.jsxs)("form",{className:"inputField",onSubmit:y?I:f,children:[(0,qA.jsx)("img",{src:d,className:"icon",alt:"emojiButton"}),(0,qA.jsx)("input",{type:"text",className:"inputText",placeholder:"Enter Message",value:n,onChange:i}),(0,qA.jsx)("img",{src:p,className:"icon",onClick:y?I:f,alt:"sendButton"})]})]}),(0,qA.jsx)("img",{className:"close",onClick:function(){m(!1)},src:jA,alt:"closeReply"})]}):(0,qA.jsxs)("form",{className:"inputField",onSubmit:y?I:f,children:[(0,qA.jsx)("img",{src:d,className:"icon",alt:"emojiButton"}),(0,qA.jsx)("input",{type:"text",className:"inputText",placeholder:"Enter Message",value:n,onChange:i}),(0,qA.jsx)("input",{type:"file",id:"clipButton",className:"attachment",onChange:P}),(0,qA.jsx)("img",{src:zA,className:"clip",onClick:function(){var e=document.getElementById("clipButton");e.value=null;var t=new MouseEvent("click",{view:window,cancelable:!0});e.dispatchEvent(t)},alt:"fileInputButton"}),(0,qA.jsx)("img",{src:p,className:"icon",onClick:y?I:f,alt:"sendButton"})]})})]})]})]})}var WA=function(){var e=h(UA(GA),1)[0];return(0,qA.jsx)("div",{className:"App",children:e?(0,qA.jsx)(QA,{}):(0,qA.jsx)(HA,{})})},JA=function(e){e&&e instanceof Function&&n.e(787).then(n.bind(n,787)).then((function(t){var n=t.getCLS,r=t.getFID,i=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),i(e),a(e),o(e)}))};r.createRoot(document.getElementById("root")).render((0,qA.jsx)(t.StrictMode,{children:(0,qA.jsx)(WA,{})})),JA()}()}();
//# sourceMappingURL=main.f416b6d7.js.map